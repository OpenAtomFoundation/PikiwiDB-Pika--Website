"use strict";(self.webpackChunkPikiwiDB_Pika_=self.webpackChunkPikiwiDB_Pika_||[]).push([[8130],{7735:t=>{t.exports=JSON.parse('{"archive":{"blogPosts":[{"id":"PikiwiDB-Pika--4.0.0","metadata":{"permalink":"/blog/PikiwiDB-Pika--4.0.0","source":"@site/blog/2024-07-08-PikiwiDB(Pika)-4.0.0.md","title":"What\'s new in PikiwiDB(Pika) v4.0.0","description":"\u5c0a\u656c\u7684\u793e\u533a\u6210\u5458\u53ca\u6280\u672f\u7231\u597d\u8005\u4eec\uff1a","date":"2024-07-08T00:00:00.000Z","tags":[],"readingTime":17.605,"hasTruncateMarker":false,"authors":[{"name":"360 \u8f66\u91d1\u9e3d","title":"Pika \u5f00\u6e90\u793e\u533a"}],"frontMatter":{"title":"What\'s new in PikiwiDB(Pika) v4.0.0","slug":"PikiwiDB-Pika--4.0.0","authors":[{"name":"360 \u8f66\u91d1\u9e3d","title":"Pika \u5f00\u6e90\u793e\u533a"}],"hide_table_of_contents":false},"unlisted":false,"nextItem":{"title":"What\'s new in PikiwiDB(Pika) v3.5.4","permalink":"/blog/Pika-3.5.4"}},"content":"\u5c0a\u656c\u7684\u793e\u533a\u6210\u5458\u53ca\u6280\u672f\u7231\u597d\u8005\u4eec\uff1a\\n\\nPikiwiDB \u793e\u533a\u8363\u8000\u5730\u5ba3\u544a \u2014\u2014 \u7ecf\u8fc7 9 \u4e2a\u6708\u6253\u78e8\u5e76\u5728\u751f\u4ea7\u73af\u5883\u7a33\u5b9a\u8fd0\u884c 5 \u4e2a\u6708\u7684 PikiwiDB (Pika) v4.0.0 \u3010\u4e0b\u6587\u7b80\u79f0 Pika\u3011\u4eca\u5929\u6b63\u5f0f\u53d1\u5e03\u3002\u5e0c\u671b\u57fa\u4e8e\u7b2c\u4e09\u4ee3\u5b58\u50a8\u5f15\u64ce Floyd \u7684\u8fd9\u4e2a\u65b0\u7248\u672c\u80fd\u4e3a\u793e\u533a\u7528\u6237\u4eec\u5e26\u6765\u66f4\u5353\u8d8a\u7684\u4f53\u9a8c\u3002\\n\\n# **1 \u91cd\u5927\u6539\u8fdb**\\n\\n## **1.1 \u7b2c\u4e09\u4ee3\u5b58\u50a8\u5f15\u64ce Floyd**\\n\\nFloyd \u5982\u540c\u5176\u524d\u4ee3 Blackwidow\uff0c\u57fa\u4e8e RocksDB\uff0c\u4e0d\u4ec5\u652f\u6301\u57fa\u7840\u7684 String \u7ed3\u6784\uff0c\u4e5f\u539f\u751f\u652f\u6301\u4e86 Hash\u3001List\u3001Set\u3001Stream \u53ca ZSet \u7b49 KKV \u5f62\u5f0f\u7684\u590d\u5408\u6570\u636e\u7ed3\u6784\u3002\\n\\n- **RocksDB \u5b9e\u4f8b\u6570\u53ef\u914d\u7f6e**\\n\\n\u6452\u5f03\u4e86 Blackwidow \u6309\u6570\u636e\u7c7b\u578b\u91c7\u7528 RocksDB \u5b9e\u4f8b\u7684\u7269\u7406\u9694\u79bb\u6a21\u5f0f\uff0cFloyd \u91c7\u7528\u4e86 RocksDB \u7684 Column-Family \u865a\u62df\u9694\u79bb\u673a\u5236\uff0c\u5728\u5355\u4e2a RocksDB \u5b9e\u4f8b\u4e0b\u53ef\u5b58\u50a8\u6240\u6709\u7c7b\u578b\u7684\u6570\u636e\u3002\\n\\n\u7528\u6237\u53ef\u81ea\u7531\u8bbe\u5b9a Pika \u5b9e\u4f8b\u4e2d\u6bcf\u4e2a DB\u3010\u7b49\u540c\u4e8e Redis DB\u3011\u4e2d RocksDB \u5b9e\u4f8b\u7684\u6570\u91cf\uff0c\u800c\u6570\u636e\u7684\u5b58\u50a8\u5219\u4f9d\u636e key \u7684 hash \u503c\u5206\u914d\u81f3\u76f8\u5e94\u7684 RocksDB \u5b9e\u4f8b\uff0c\u51cf\u5c0f\u4e86\u6570\u636e\u7684\u7a7a\u95f4\u653e\u5927\u548c\u8bfb\u653e\u5927\u6548\u5e94\uff0c\u5b9e\u73b0\u4e86\u673a\u5668\u8d44\u6e90\u7684\u9ad8\u6548\u5229\u7528\u3002\\n\\n- **\u5f3a\u7c7b\u578b key**\\n\\n![](https://private-user-images.githubusercontent.com/73943232/333059521-afa8a2bf-cebf-481f-a370-deaf4386b46b.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjA1MjU4NzYsIm5iZiI6MTcyMDUyNTU3NiwicGF0aCI6Ii83Mzk0MzIzMi8zMzMwNTk1MjEtYWZhOGEyYmYtY2ViZi00ODFmLWEzNzAtZGVhZjQzODZiNDZiLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA3MDklMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNzA5VDExNDYxNlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTlkMzcyYWU4NzI4ZDkyYjliZTg3NjM1YTI4ZjhlMzUwMDlmYWJmYzMzZTJkMzY4ZTYwMzk2NGJiNDhkNDc0ZWImWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.FHMEJbqfdxgE3asbq8neuN4SMyDpyZHlpRSNy7JH1Zo)\\n\\n\u57fa\u4e8e RocksDB \u7684 Column-Family \u865a\u62df\u9694\u79bb\u673a\u5236\uff0cFloyd \u628a\u6240\u6709\u7c7b\u578b\u7684 key \u548c string \u4e00\u8d77\u5b58\u50a8\u5728 Column-Family 0\u3002\\n\\n\u5728\u6b64\u5b58\u50a8\u57fa\u7840\u4e4b\u4e0a\uff0c\u4e0d\u540c\u4e8e Blackwidow\uff0c\u53ef\u660e\u786e\u7981\u6b62\u4e0d\u540c\u7c7b\u578b\u7684 key \u91cd\u590d\u3010\u5f3a\u7c7b\u578b\u3011\uff0c\u8fd9\u4e00\u8bbe\u8ba1\u65e8\u5728\u675c\u7edd\u6f5c\u5728\u7684\u6570\u636e\u5197\u4f59\u4e0e\u4e0d\u4e00\u81f4\u6027\uff0c\u4e0e Redis \u670d\u52a1\u7279\u6027\u4fdd\u6301\u4e00\u81f4\uff0c\u8fdb\u4e00\u6b65\u63d0\u5347\u4e86\u7cfb\u7edf\u7684\u6574\u4f53\u6548\u7387\u4e0e\u6570\u636e\u8d28\u91cf\u3002\\n\\nPika v2.x \u7cfb\u5217\u7248\u672c\u57fa\u4e8e\u5b58\u50a8\u5f15\u64ce Nemo\uff0cv3.x \u7cfb\u5217\u7248\u672c\u57fa\u4e8e Blackwidow\uff0c\u5b83\u4eec\u56e0\u4e3a\u91c7\u7528\u4e86\u7269\u7406\u9694\u79bb\u673a\u5236\uff0c\u65e0\u6cd5\u4f4e\u6210\u672c\u5b9e\u73b0\u5f3a\u7c7b\u578b key\uff0c\u6240\u6709\u5728 Redis TYPE \u547d\u4ee4\u7684\u7ed3\u679c\u4e2d\u53ef\u80fd\u8fd4\u56de\u591a\u79cd\u7c7b\u578b\uff0c\u800c Floyd \u5219\u5b8c\u5168\u517c\u5bb9 Redis \u53ea\u8fd4\u56de\u4e00\u79cd\u7c7b\u578b\u3002\\n\\n- **Floyd \u8be6\u7ec6\u8bf4\u660e**\\n\\n\u5982\u679c\u5bf9 Floyd \u5b58\u50a8\u5f15\u64ce\u611f\u5174\u8da3\uff0c\u8bf7\u8be6\u9605\u300aFloyd \u5b58\u50a8\u5f15\u64ce\u300b\\n\\n\u3010\u94fe\u63a5\uff1ahttps://github.com/OpenAtomFoundation/pika/discussions/2052\u3011\\n\\n\u7531\u4e8e Floyd \u524d\u540e\u8fdb\u884c\u4e86\u591a\u4e2a\u7248\u672c\u7684\u8fed\u4ee3\uff0c\u6240\u4ee5\u9605\u8bfb\u8be5 github discussion \u6587\u6863\u65f6\u8bf7\u6ce8\u610f\u524d\u540e\u65f6\u95f4\uff0c\u5982\u6709\u76f8\u5173\u51b2\u7a81\u6027\u8bf4\u6cd5\uff0c\u4ee5\u6700\u65b0\u65e5\u671f\u7684\u6587\u5b57\u4e3a\u51c6\u3002\\n\\n\u5173\u952e PR\uff1a\\nPikiwiDB(Pika) \u652f\u6301 Floyd \u5b58\u50a8\u5f15\u64ce\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2413\\n\\n\u6dfb\u52a0 Floyd \u7684 compaction-filter \u7684 Gtest\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2669\\n\\nPika \u4e0d\u652f\u6301\u4e0d\u540c\u7c7b\u578b\u7684\u91cd\u590d key, \u5199\u5165\u91cd\u590d key \u8fd4\u56de\u975e\u6cd5\u7c7b\u578b\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2609\\n\\n\u5bf9 HyperLogLog \u548c String \u8fdb\u884c\u7c7b\u578b\u9694\u79bb\uff0c\u786e\u4fdd HyperLogLog \u64cd\u4f5c\u4e0e String \u64cd\u4f5c\u660e\u786e\u533a\u5206\u5f00\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2720\\n\\n\u6dfb\u52a0\u652f\u6301\u5206\u533a\u7d22\u5f15\u8fc7\u6ee4\u7684\u529f\u80fd\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2601\\n\\n## **1.2 Mget \u6279\u91cf\u67e5\u8be2\u7f13\u5b58**\\n\\nPika v3.5.2 \u7684\u70ed\u6570\u636e\u7f13\u5b58\u53ea\u5b9e\u73b0\u4e86\u5bf9\u70ed\u70b9 Key \u7684\u70b9\u67e5 (\u5982 get/hget)\uff0c\u5728\u540e\u7eed\u7684 v3.5.3 \u548c v3.5.4 \u4fee\u590d\u82e5\u5e72 bug \u540e\uff0c\u5bf9\u70ed\u6570\u636e\u7684\u70b9\u67e5\u76ee\u524d\u5df2\u7ecf\u975e\u5e38\u7a33\u5b9a\u3002\u7136\u800c\u5e76\u672a\u652f\u6301\u6279\u91cf\u67e5\u8be2 (\u5982 mget etc)\u3002\\n\\n\u5185\u90e8\u4e1a\u52a1\u4fa7\u53cd\u9988\u6279\u91cf\u67e5\u8be2\u901f\u5ea6\u6bd4\u8f83\u6162\uff0c\u5728 40C/256GiB/2TiB SATA SSD \u89c4\u683c\u673a\u5668\u4e0a\u6570\u636e\u91cf\u8d85\u8fc7 100GiB \u65f6\uff0cPika v3.3.6 30% \u6279\u91cf\u67e5\u8be2\u5ef6\u8fdf\u8d85\u8fc7 35ms\u3002\u4f46\u7531\u4e8e Pika \u70ed\u6570\u636e\u7f13\u5b58\u5c1a\u672a\u652f\u6301\u6279\u91cf\u67e5\u8be2\uff0c\u6027\u80fd\u5e76\u672a\u6539\u5584\u3002\\n\\n\u4e3a\u4e86\u6ee1\u8db3\u4e1a\u52a1\u9700\u6c42\uff0cPika \u56e2\u961f\u5f00\u53d1\u4e86\u6279\u91cf\u67e5\u8be2\u70ed\u6570\u636e\u7f13\u5b58\u529f\u80fd\uff0c\u663e\u8457\u63d0\u5347\u4e86\u6279\u91cf\u67e5\u8be2\u6027\u80fd\uff0c\u964d\u4f4e\u4e86\u67e5\u8be2\u5ef6\u8fdf\u548c\u5931\u8d25\u7387\u3002\u76f8\u5173\u6280\u672f\u7ec6\u8282\u8bf7\u9605\u8bfb\u300aPikiwiDB (Pika) \u6df7\u5408\u5b58\u50a8\u4e4b\u6279\u91cf\u67e5\u8be2\u300b \\n\\n\u3010\u94fe\u63a5\uff1ahttps://mp.weixin.qq.com/s/KFLPruSdB66TMRxUfR9PbQ \u3011\u3002\\n\\n\\n\\n\u5173\u952e PR \uff1a\\n\\nMget \u652f\u6301\u591a key \u67e5\u8be2\u7f13\u5b58\uff0c\u8bb0\u5f55\u672a\u547d\u4e2d\u7684 key \u53bb DB \u4e2d\u67e5\u8be2\uff0c\u63d0\u5347 Pika \u670d\u52a1\u7684\u8bfb\u6027\u80fd\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2675\\n\\n\u4fee\u590d Mget \u6ca1\u6709\u4f7f\u7528\u89e3\u6790 ttl \u7684\u51fd\u6570\u5bfc\u81f4\u51fa\u73b0\u90e8\u5206 key \u7684 ttl \u672a\u88ab\u66f4\u65b0\uff0c\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2730\\n\\n\\n## **1.3 \u4e3b\u4ece\u590d\u5236**\\n\\nPika v3.3.6 \u6709\u5f88\u591a\u4e3b\u4ece\u590d\u5236\u7684\u7f3a\u9677\u3002v4.0.0 \u7248\u672c\u5bf9 Pika \u5168\u91cf\u590d\u5236\u53ca\u589e\u91cf\u590d\u5236\u8fdb\u884c\u4e86\u5927\u91cf\u4f18\u5316\u548c bug \u4fee\u590d\uff0c\u53d6\u5f97\u4e86\u975e\u5e38\u597d\u7684\u6548\u679c\u3002 \\n\\n\u5e76\u5728 info \u547d\u4ee4\u4e2d\u8f93\u51fa\u4e86 \\"repl_connect_status\\" \u6307\u6807 (PR 2638)\uff0c\u4ee5\u65b9\u4fbf\u7528\u6237\u66f4\u52a0\u660e\u786e\u6e05\u6670\u7684\u786e\u5b9a\u5f53\u524d\u7684\u4e3b\u4ece\u590d\u5236\u72b6\u6001\u3002\\n\\n\u5173\u952e PR \uff1a\\n\\n\u4fee\u590d\u6279\u91cf\u6269\u5bb9\u65f6\uff0c\u591a\u4e2a slave \u540c\u65f6\u8fde\u63a5 master, \u77ed\u65f6\u95f4\u591a\u6b21 bgsave \u5bfc\u81f4\u90e8\u5206\u4ece\u8282\u70b9\u6570\u636e\u4e0d\u5b8c\u6574\u7684\u95ee\u9898\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2746\\n\\n\u4fee\u590d Spop \u5728\u5199 binlog \u65f6\u53ef\u80fd\u4f1a\u51fa\u73b0\u7ade\u6001\u95ee\u9898\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2647\\n\\n\u4fee\u590d\u591a DB \u4e0b\u5168\u91cf\u540c\u6b65\u8d85\u65f6\u540e\u4e0d\u91cd\u8bd5\u7684\u95ee\u9898\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2667\\n\\n\u4fee\u590d\u591a DB \u4e3b\u4ece\u8d85\u65f6\u573a\u666f\u4e0b\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u7a97\u53e3\u5d29\u6e83\u7684\u95ee\u9898\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2666\\n\\n\u4fee\u590d\u4e3b\u4ece\u540c\u6b65\u9650\u901f\u903b\u8f91\u4e2d\u91cd\u590d\u89e3\u9501\u7684\u95ee\u9898\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2657\\n\\n\u91cd\u6784\u4e3b\u4ece\u590d\u5236\u6a21\u5f0f slave \u8282\u70b9\u7684\u4e3b\u4ece\u540c\u6b65\u7ebf\u7a0b\u6a21\u578b\uff0c\u5c3d\u53ef\u80fd\u51cf\u5c11 binlog \u6d88\u8d39\u963b\u585e\u95ee\u9898\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2638\\n\\n## **1.4 Redis Stream**\\n\\nRedis Stream \u7c7b\u4f3c\u4e8e\u6d88\u606f\u961f\u5217\uff08MQ\uff09\uff0c\u4ee5\u4fbf\u66f4\u5b89\u5168\u5730\u4f20\u9012\u6d88\u606f\u3002\\n\\n\u4e3a\u4e86\u786e\u4fdd\u6570\u636e\u7684\u5b89\u5168\u6027\uff0c\u5e95\u5c42\u5f15\u64ce BlackWidow \u548c Floyd \u4e2d\u7279\u522b\u6dfb\u52a0\u4e86\u5bf9 Stream \u6570\u636e\u7c7b\u578b\u7684\u652f\u6301\u3002\\n\\n\u5173\u952e PR\uff1a \\n\\n\u4fee\u590d pkpatternmatchdel \u547d\u4ee4\u4f7f\u7528\u9519\u8bef\u5bfc\u81f4\u7684 stream \u7c7b\u578b\u6570\u636e\u5220\u9664\u5f02\u5e38\u7684\u95ee\u9898\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2726\\n\\n\u4fee\u590d Keyspace \u547d\u4ee4\u672a\u8ba1\u7b97 Stream \u7c7b\u578b\u6570\u636e\u7684\u95ee\u9898\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2705\\n\\n## **1.5 Compaction**\\n\\nPikiwiDB (Pika) \u7684\u5e95\u5c42\u78c1\u76d8\u5b58\u50a8\u5f15\u64ce RocksDB \u5728\u8fdb\u884c compaction \u65f6\u4f1a\u663e\u8457\u5f71\u54cd PikiwiDB (Pika) \u7684\u8bfb\u5199\u6027\u80fd\u3002\\n\\n\u56e0\u6b64\uff0c\u63a7\u5236\u597d compaction \u662f\u4f18\u5316 Pika \u8bfb\u5199\u6027\u80fd\u7684\u5173\u952e\u3002\\n\\nFloyd \u4f7f\u7528\u4e86 v8.7.3 \u7248\u672c\u7684 RocksDB\uff0c\u5f00\u653e\u4e86\u66f4\u591a RocksDB \u53c2\u6570\uff0c\u4ee5\u65b9\u4fbf\u7528\u6237\u4f18\u5316 RocksDB \u6027\u80fd\uff1a\\n\\n1. enable-partitioned-index-filters\uff1a \u652f\u6301\u52a0\u8f7d\u5206\u533a\u7d22\u5f15\u8fc7\u6ee4\u5668\uff0c\u52a0\u5feb RocksDB \u67e5\u627e\u901f\u5ea6\u3002\\n2. min-write-buffer-number-to-merge: \u9ed8\u8ba4\u503c\u4e3a 1\uff0c\u5982\u679c\u5c06\u6b64\u503c\u8bbe\u7f6e\u5f97\u66f4\u5927\uff0c\u610f\u5473\u7740\u9700\u8981\u66f4\u591a\u7684\u5199\u7f13\u51b2\u533a\u88ab\u586b\u6ee1\u540e\u624d\u8fdb\u884c flush\u3002\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11 flush \u7684\u9891\u7387\uff0c\u589e\u52a0\u6570\u636e\u5728\u5185\u5b58\u4e2d\u7684\u7d2f\u79ef\u91cf\uff0c\u4ece\u800c\u53ef\u80fd\u63d0\u9ad8\u5199\u5165\u541e\u5410\u91cf\u3002\\n3. level0-stop-writes-trigger: \u9ed8\u8ba4\u503c\u4e3a 36\uff0c\u5b9a\u4e49\u4e86 L0 \u5c42\u4e2d sst \u6587\u4ef6\u7684\u6700\u5927\u6570\u91cf\uff0c\u4e00\u65e6\u8fbe\u5230\u8fd9\u4e2a\u6570\u91cf\uff0cRocksDB \u5c06\u4f1a\u91c7\u53d6 **\u6682\u505c\u5199\u5165\u3001\u5f3a\u5236 compaction** \u7b49\u63aa\u65bd\u6765\u9632\u6b62\u5199\u5165\u64cd\u4f5c\u7ee7\u7eed\u7d2f\u79ef\uff0c\u4ee5\u907f\u514d L0 \u5c42\u53d8\u5f97\u8fc7\u4e8e\u5e9e\u5927\uff0c\u8fdb\u800c\u53ef\u80fd\u5bfc\u81f4\u5199\u5165\u653e\u5927\u3001\u67e5\u8be2\u6027\u80fd\u4e0b\u964d\u7b49\u95ee\u9898\u3002\\n4. level0-slowdown-writes-trigger\uff1a\u9ed8\u8ba4\u503c\u4e3a 20\uff0c\u7528\u4e8e\u63a7\u5236\u5f53 Level 0 \u7684 SST \u6587\u4ef6\u6570\u91cf\u8fbe\u5230\u8fd9\u4e2a\u9608\u503c\u65f6\uff0c\u89e6\u53d1\u5199\u51cf\u901f\uff08write slowdown\uff09\uff0c\u9632\u6b62 Level 0 \u7684\u6587\u4ef6\u6570\u91cf\u8fc7\u591a\uff0c\u5bfc\u81f4\u540e\u7eed compaction \u64cd\u4f5c\u7684\u538b\u529b\u8fc7\u5927\u3002\\n5. level0-file-num-compaction-trigger\uff1a\u9ed8\u8ba4\u503c\u4e3a 4\uff0c\u5f53 Level 0 \u7684 SST \u6587\u4ef6\u6570\u91cf\u8fbe\u5230\u8fd9\u4e2a\u53c2\u6570\u8bbe\u5b9a\u7684\u9608\u503c\u65f6\uff0cRocksDB \u4f1a\u5f00\u59cb\u6267\u884c compaction \u64cd\u4f5c\uff0c\u5c06 Level 0 \u7684\u6587\u4ef6\u5408\u5e76\u5230 Level 1\uff0c\u4ee5\u51cf\u5c11 Level 0 \u7684\u6587\u4ef6\u6570\u91cf\uff0c\u964d\u4f4e\u8bfb\u53d6\u5ef6\u8fdf\uff0c\u5e76\u4f18\u5316\u5b58\u50a8\u7a7a\u95f4\u7684\u5229\u7528\u7387\u3002\\n6. max-subcompactions\uff1a\u9ed8\u8ba4\u503c\u4e3a 1\uff0c\u7528\u4e8e\u63a7\u5236 RocksDB \u4e2d\u5e76\u53d1\u6267\u884c\u7684 sub-compaction \u4efb\u52a1\u6570\u91cf\uff0c\u5176\u503c\u4e3a 1 \u8868\u793a\u5173\u95ed sub-compaction\u3002\u5982\u679c\u7cfb\u7edf\u8d44\u6e90\u5145\u8db3\uff0c\u5efa\u8bae\u63d0\u5347\u8be5\u53c2\u6570\u4ee5\u4f18\u5316 compaction \u6548\u7387\u3002\\n7. max-bytes-for-level-base\uff1a\u6307\u5b9a\u4e86 L1 SST \u6587\u4ef6\u603b\u7684\u5927\u5c0f\u3002\u8fd9\u4e2a\u5927\u5c0f\u662f RocksDB \u8fdb\u884c\u6570\u636e\u5206\u5c42\u7ba1\u7406\u548c compaction \u51b3\u7b56\u7684\u91cd\u8981\u4f9d\u636e\uff1a\u5982\u679c L1 \u5c42\u7684\u5927\u5c0f\u8bbe\u7f6e\u5f97\u592a\u5c0f\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4 L0 \u5c42\u7684 compaction \u8fc7\u4e8e\u9891\u7e41\uff0c\u8fdb\u800c\u5f71\u54cd\u5199\u6027\u80fd\u3002\u53cd\u4e4b\uff0c\u5982\u679c\u8bbe\u7f6e\u5f97\u592a\u5927\uff0c\u53ef\u80fd\u4f1a\u5360\u7528\u8f83\u591a\u7684\u78c1\u76d8\u7a7a\u95f4\uff0c\u5e76\u4e14\u5f71\u54cd\u8bfb\u53d6\u6027\u80fd\uff0c\u56e0\u4e3a\u8bfb\u53d6\u64cd\u4f5c\u53ef\u80fd\u9700\u8981\u8de8\u8d8a\u66f4\u591a\u7684\u5c42\u7ea7\u3002Pika \u6ca1\u6709\u5728 pika.conf \u4e2d\u5f00\u653e\u6b64\u53c2\u6570\u7ed9\u7528\u6237\u914d\u7f6e\uff0c\u800c\u662f\u4f7f\u7528\u5176\u4ed6\u53c2\u6570\uff08**level0-file-num-compaction-trigger** \u548c **write-buffer-size**\uff09\u8ba1\u7b97\u540e\u7684\u7ed3\u679c\u3002\\n\\n```\\nstorage_options_.options.max_bytes_for_level_base = g_pika_conf->level0_file_num_compaction_trigger() * g_pika_conf->write_buffer_size()\\n```\\n\\n\u5173\u952e PR\uff1a\\n\u6dfb\u52a0 Floyd \u7684 compaction-filter \u7684 Gtest\\nhttps://github.com/OpenAtomFoundation/pika/pull/2669\\n\u6dfb\u52a0\u652f\u6301\u5206\u533a\u7d22\u5f15\u8fc7\u6ee4\u7684\u529f\u80fd\\nhttps://github.com/OpenAtomFoundation/pika/pull/2601\\n\u65b0\u589e RocksDB Compaction \u7b56\u7565\u52a8\u6001\u8c03\u6574\u53c2\u6570\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u8c03\u6574 Compaction \u7b56\u7565\uff0c\u964d\u4f4e Compaction \u64cd\u4f5c\u5bf9\u670d\u52a1\u6027\u80fd\u7684\u635f\u8017\\nhttps://github.com/OpenAtomFoundation/pika/pull/2538\\n\\n## **1.6 \u53ef\u89c2\u6d4b\u6027**\\n\\nv3.5 \u7248\u672c\u589e\u52a0\u4e86\u5305\u62ec\u547d\u4e2d\u7387\u3001\u6bcf\u79d2\u547d\u4e2d\u6b21\u6570\u3001Redis Cache \u5185\u5b58\u4f7f\u7528\u91cf\u3001Redis Cache \u4e2a\u6570\u3001Redis Cache DB \u4e2a\u6570 \u7b49\u6307\u6807\uff0c\u4f46\u662f\u5728\u96c6\u7fa4\u65b9\u9762\u7684\u53ef\u89c2\u6d4b\u6027\u662f\u7f3a\u5931\u7684\u3002v4.0.0 \u5bf9 Codis-Proxy \u7684 P99\u3001P999\u3001\u5ef6\u8fdf\u7b49\u76d1\u63a7\u6307\u6807\u8fdb\u884c\u91c7\u96c6\u548c\u5c55\u793a\uff0c\u53ef\u4ee5\u76f4\u89c2\u5730\u53cd\u6620\u7ebf\u4e0a Codis-proxy \u7684\u8fd0\u884c\u60c5\u51b5\u3002\\n\\nv4.0.0 \u5f00\u59cb\u8fd8\u63d0\u4f9b\u65b0\u7684\u5de5\u5177\uff1a\u6839\u636e pika benchmark \u5de5\u5177\u538b\u6d4b\u7ed3\u679c\u81ea\u52a8\u751f\u6210\u53ef\u89c6\u5316\u7684\u7edf\u8ba1\u56fe\u8868\u3002\\n\\n\u5173\u952e PR\uff1a\\n\\nCodis \u652f\u6301 info \u547d\u4ee4\uff0c\u53ef\u4ee5\u901a\u8fc7\u8be5\u547d\u4ee4\u67e5\u8be2 Codis-proxy \u7684 info \u4fe1\u606f\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2688\\n\\nCodis-proxy \u65b0\u589e P99 P95 \u7b49\u76d1\u63a7\u8017\u65f6\u6307\u6807\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2668\\n\\n\u6dfb\u52a0 Pika \u538b\u6d4b\u6307\u6807\uff0c\u63d0\u5347 Pika \u538b\u6d4b\u6548\u7387\uff0c\u5e76\u8f93\u51fa\u53ef\u89c6\u5316\u7684\u7edf\u8ba1\u56fe\u8868\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2663\\n\\n## **1.7 \u6d4b\u8bd5\u96c6**\\n\\nPikiwiDB(Pika) \u6d4b\u8bd5\u96c6\u7531 gtest \u5355\u6d4b\u3001Redis TCL \u6d4b\u8bd5\u96c6\u548c Go \u6d4b\u8bd5\u96c6\u7ec4\u6210\u3002v4.0.0 \u4e2d\u4e30\u5bcc\u4e86\u8bf8\u591a\u7279\u6027\u7684 go test \u529f\u80fd\uff0c\u5e76\u8fdb\u4e00\u6b65\u5b8c\u5584\u4e86\u57fa\u672c\u6570\u636e\u7c7b\u578b\u7684 TCL \u6d4b\u8bd5\u3002\\n\\n\u5173\u952e PR\uff1a\\n\\n\u6dfb\u52a0 Floyd \u7684 compaction-filter \u7684 Gtest\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2669\\n\\nPika Geo \u6570\u636e\u7c7b\u578b\u589e\u52a0 TCL \u6d4b\u8bd5\uff0c\u5e76\u4fee\u590d\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u7f3a\u9677\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2753\\n\\n## **1.8 \u8de8\u5e73\u53f0** \\n\\nPikiwiDB(Pika) \u4ee5\u5f80\u4ec5\u652f\u6301 centos \u548c ubuntu \u7b49 linux \u5e73\u53f0\uff0cv3.5 \u5f00\u59cb\u652f\u6301 Mac \u7b49\u5e73\u53f0\u3002v4.0.0 \u5c06\u5bf9 Mac \u5e73\u53f0\u7684\u652f\u6301\u6269\u5c55\u81f3 FreeBSD \u5e73\u53f0\u3002\\n\\n\u5173\u952e PR\uff1a\\n\\nPika \u652f\u6301\u5728 FreeBSD14 \u5e73\u53f0\u4e0a\u8fdb\u884c\u7f16\u8bd1\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2711\\n\\n# **2 \u6539\u8fdb\u5217\u8868**\\n\\n\u4e0b\u9762\u8be6\u7ec6\u5217\u51fa\u4e86\u672c\u6b21\u53d1\u7248\u7684\u4e3b\u8981\u529f\u80fd\u5347\u7ea7\u548c\u6539\u8fdb\u3002\\n\\n## **2.1 \u65b0\u7279\u6027**\\n\\n- Pika Geo \u6570\u636e\u7c7b\u578b\u589e\u52a0 TCL \u6d4b\u8bd5\uff0c\u5e76\u4fee\u590d\u6d4b\u8bd5\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u7f3a\u9677   \\n  https://github.com/OpenAtomFoundation/pika/pull/2753\\n\\n- Pika \u652f\u6301\u5728 FreeBSD14 \u5e73\u53f0\u4e0a\u8fdb\u884c\u7f16\u8bd1\u6253\u5305   \\n  https://github.com/OpenAtomFoundation/pika/pull/2711\\n\\n- Pika \u7ebf\u7a0b\u6574\u7406\uff0c\u907f\u514d\u542f\u52a8\u8fc7\u591a\u65e0\u7528\u7ebf\u7a0b\uff0c\u5bf9\u4e0d\u540c\u7684\u7ebf\u7a0b\u8fdb\u884c\u547d\u540d\uff0c\u65b9\u4fbf\u95ee\u9898\u5b9a\u4f4d   \\n  https://github.com/OpenAtomFoundation/pika/pull/2697\\n\\n- Mget \u652f\u6301\u591a key \u67e5\u8be2\u7f13\u5b58\uff0c\u8bb0\u5f55\u672a\u547d\u4e2d\u7684 key \u53bb DB \u4e2d\u67e5\u8be2\uff0c\u63d0\u5347 Pika \u670d\u52a1\u7684\u8bfb\u6027\u80fd   \\n  https://github.com/OpenAtomFoundation/pika/pull/2675\\n\\n- Codis \u652f\u6301 info \u547d\u4ee4\uff0c\u53ef\u4ee5\u901a\u8fc7\u8be5\u547d\u4ee4\u67e5\u8be2 Codis-proxy \u7684 info \u4fe1\u606f   \\n  https://github.com/OpenAtomFoundation/pika/pull/2688\\n\\n- \u6dfb\u52a0 Floyd \u7684 compaction-filter \u7684 Gtest   \\n  https://github.com/OpenAtomFoundation/pika/pull/2669\\n\\n- Codis-proxy \u65b0\u589e P99 P95 \u7b49\u76d1\u63a7\u8017\u65f6\u6307\u6807   \\n  https://github.com/OpenAtomFoundation/pika/pull/2668\\n\\n- \u6dfb\u52a0 Pika \u538b\u6d4b\u6307\u6807\uff0c\u63d0\u5347 Pika \u538b\u6d4b\u6548\u7387\uff0c\u5e76\u8f93\u51fa\u53ef\u89c6\u5316\u7684\u7edf\u8ba1\u56fe\u8868   \\n  https://github.com/OpenAtomFoundation/pika/pull/2663\\n\\n- Pika \u4e3b\u4ece\u590d\u5236\u65b0\u589e\u76d1\u63a7\u6307\u6807    repl_connect_status, \u53ef\u4ee5\u66f4\u52a0\u660e\u786e\u6e05\u6670\u7684\u786e\u5b9a\u5f53\u524d\u7684\u4e3b\u4ece\u590d\u5236\u7684\u72b6\u6001   \\n  https://github.com/OpenAtomFoundation/pika/pull/2638\\n\\n- Pika \u4e0d\u652f\u6301\u4e0d\u540c\u7c7b\u578b\u7684\u91cd\u590d key, \u5199\u5165\u91cd\u590d key \u8fd4\u56de\u975e\u6cd5\u7c7b\u578b   \\n  https://github.com/OpenAtomFoundation/pika/pull/2609\\n\\n- \u6dfb\u52a0\u652f\u6301\u5206\u533a\u7d22\u5f15\u8fc7\u6ee4\u7684\u529f\u80fd   \\n  https://github.com/OpenAtomFoundation/pika/pull/2601\\n\\n- Pika \u652f\u6301\u7b2c\u4e09\u4ee3\u5b58\u50a8\u5f15\u64ce Floyd, \u901a\u8fc7\u652f\u6301\u591a rocksdb \u5b9e\u4f8b\u3001\u5bf9 Blob \u7684\u4f7f\u7528\u8fdb\u884c\u4f18\u5316\u3001\u5bf9\u8fc7\u671f\u6570\u636e\u7684\u6e05\u7406\u8fdb\u884c\u4f18\u5316\uff0c\u63d0\u5347\u4e86 Pika \u5b9e\u4f8b\u7684\u8bfb\u5199\u6027\u80fd   \\n  https://github.com/OpenAtomFoundation/pika/pull/2413\\n\\n\\n## **2.2 bug \u4fee\u590d**\\n\\n- \u4fee\u590d iter \u672a\u88ab\u6790\u6784\uff0c\u5bfc\u81f4 pkpatternmatchdel \u5728\u8fd4\u56de\u4e4b\u524d\u4e0d\u4f1a\u5220\u9664 iter\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4 rocksdb \u6c38\u8fdc\u5f15\u7528\u4e00\u4e2a\u7248\u672c\uff0c\u5bfc\u81f4\u6570\u636e\u4e0d\u7b26\u5408\u9884\u671f\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2785\\n\\n- \u4fee\u590d config \u53c2\u6570 min-blob-size \u5e26\u5355\u4f4d\u65f6\u89e3\u6790\u9519\u8bef\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2767\\n\\n- \u4fee\u590d zverank \u8fd4\u56de\u503c\u5f02\u5e38\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2673\\n\\n- \u4fee\u590d Pika-port \u4f20\u8f93\u6570\u636e\u8fc7\u7a0b\u4e2d\u62a5\u9519\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2758\\n\\n- \u4fee\u590d\u56e0\u4e3a\u5806\u4e0a\u5206\u914d\u7684\u7f13\u51b2\u533a\u8d8a\u754c\u5bfc\u81f4 Dbsize \u547d\u4ee4\u8fd0\u884c\u65f6\u5d29\u6e83\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2749\\n\\n- \u4fee\u590d\u6279\u91cf\u6269\u5bb9\u65f6\uff0c\u591a\u4e2a slave \u540c\u65f6\u8fde\u63a5 master, \u77ed\u65f6\u95f4\u591a\u6b21 bgsave \u5bfc\u81f4\u90e8\u5206\u4ece\u8282\u70b9\u6570\u636e\u4e0d\u5b8c\u6574\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2746\\n\\n- \u4fee\u590d\u53c2\u6570\u672a\u521d\u59cb\u5316\u5bfc\u81f4 slotsscan \u7b49\u547d\u4ee4\u4e0d\u80fd\u548c bgsave \u547d\u4ee4\u76f8\u4e92\u5236\u8861\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2745\\n\\n- \u4fee\u590d Slotmigrate \u8fc1\u79fb\u6570\u636e\u7684\u8fc7\u7a0b\u4e2d\uff0c\u8fd4\u56de\u503c\u8bbe\u7f6e\u9519\u8bef\uff0c\u5f02\u5e38\u573a\u666f\u4e0b\u4f1a\u7ec8\u6b62\u6570\u636e\u8fc1\u79fb\u7684\u95ee\u9898    \\n  https://github.com/OpenAtomFoundation/pika/pull/2741\\n\\n- \u4fee\u590d Mget \u6ca1\u6709\u4f7f\u7528\u89e3\u6790 ttl \u7684\u51fd\u6570\u5bfc\u81f4\u51fa\u73b0\u90e8\u5206 key \u7684 ttl \u672a\u88ab\u66f4\u65b0\uff0c\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2730\\n\\n- \u4fee\u590d pkpatternmatchdel \u547d\u4ee4\u4f7f\u7528\u9519\u8bef\u5bfc\u81f4\u7684 stream \u7c7b\u578b\u6570\u636e\u5220\u9664\u5f02\u5e38\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2726\\n\\n- \u4fee\u590d pkpatternmatchdel \u4e0d\u80fd\u6b63\u786e\u5220\u9664\u6389\u5bf9\u5e94\u7684 keys \u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2717\\n\\n- \u4fee\u590d ACL \u5bc6\u7801\u9a8c\u8bc1\u9519\u8bef\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2714\\n\\n- \u4fee\u590d Keyspace \u547d\u4ee4\u672a\u8ba1\u7b97 Stream \u7c7b\u578b\u6570\u636e\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2705\\n\\n- \u5bf9\u90e8\u5206\u547d\u4ee4\u5b9a\u5236\u5316\u5904\u7406\u903b\u8f91\uff0c\u907f\u514d\u5199 binlog \u5bfc\u81f4\u4ece\u8282\u70b9\u7684 binlog \u89e3\u6790\u5931\u8d25\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2793\\n\\n- \u4fee\u590d Pika cmdID \u8d4b\u503c\u5728 Cmd \u521d\u59cb\u51fd\u6570\u4e2d\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5e76\u53d1\u6784\u9020\u7684\u65f6\u5019\u51fa\u73b0\u5185\u5b58\u6cc4\u6f0f\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2692\\n\\n- \u4fee\u590d ExpectedStale \u672a\u8003\u8651 String \u7c7b\u578b\uff0c\u5982\u679c\u5b58\u5728\u5df2\u7ecf\u8fc7\u671f\u7684 String \u7c7b\u578b\u7684 key, ExpectedStale \u4f1a\u8fd4\u56de\u9519\u8bef\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2682\\n\\n- \u4fee\u590d Spop \u5728\u5199 binlog \u65f6\u53ef\u80fd\u4f1a\u51fa\u73b0\u7ade\u6001\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2674\\n\\n- db instance \u8bbe\u7f6e\u4e0d\u5408\u7406\u65f6\uff0c\u7ed9\u7528\u6237\u9519\u8bef\u63d0\u793a   \\n  https://github.com/OpenAtomFoundation/pika/pull/2672\\n\\n- \u4fee\u590d server_stat \u4e2d\u7684\u6570\u636e\u7ade\u6001\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2671\\n\\n- \u4fee\u590d\u591a DB \u4e0b\u5168\u91cf\u540c\u6b65\u8d85\u65f6\u540e\u4e0d\u91cd\u8bd5\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2667\\n\\n- \u4fee\u590d\u591a DB \u4e0b\u5168\u91cf\u540c\u6b65\u8d85\u65f6\u540e\u4e0d\u91cd\u8bd5\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2666\\n\\n- \u4fee\u590d\u4e3b\u4ece\u540c\u6b65\u9650\u901f\u903b\u8f91\u4e2d\u91cd\u590d\u89e3\u9501\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2657\\n\\n- \u53d1\u7248\u652f\u6301\u81ea\u52a8\u6253\u5305 centos7 \u548c centos8 \u5e73\u53f0\u7684\u4e8c\u8fdb\u5236\u7f16\u8bd1\u5305   \\n  https://github.com/OpenAtomFoundation/pika/pull/2535\\n\\n- \u4fee\u590d Codis \u4fa7\u7684 getrange \u547d\u4ee4\u6ca1\u6709\u8fd4\u56de\u9884\u671f\u7ed3\u679c\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2510\\n\\n## **2.3 \u63d0\u5347\u6539\u8fdb\u9879**\\n\\n- \u66f4\u65b0 Pika Docker Readme, \u53ef\u4ee5\u6309\u7167 Readme \u5728 Docker \u4e2d\u90e8\u7f72 Pika \u670d\u52a1   \\n  https://github.com/OpenAtomFoundation/pika/pull/2743\\n\\n- \u4f18\u5316\u91cd\u590d\u67e5\u8be2 meta value \u5bfc\u81f4\u5f71\u54cd Pika \u670d\u52a1\u8bfb\u5199\u6027\u80fd\u7684\u95ee\u9898   \\n  https://github.com/OpenAtomFoundation/pika/pull/2735\\n\\n- \u652f\u6301\u5bf9\u66f4\u591a\u7684 RocksDB \u53c2\u6570\u8fdb\u884c\u52a8\u6001\u8c03\u6574\uff0c\u7528\u6237\u6839\u636e\u4e0d\u540c\u7684\u4e1a\u52a1\u4f7f\u7528\u573a\u666f\u8c03\u6574\u53c2\u6570\u63d0\u5347 Pika \u7684\u8bfb\u5199\u6027\u80fd   \\n  https://github.com/OpenAtomFoundation/pika/pull/2728\\n\\n- \u5bf9 HyperLogLog \u548c String \u8fdb\u884c\u7c7b\u578b\u9694\u79bb\uff0c\u786e\u4fdd HyperLogLog \u64cd\u4f5c\u4e0e String \u64cd\u4f5c\u660e\u786e\u533a\u5206\u5f00   \\n  https://github.com/OpenAtomFoundation/pika/pull/2720\\n\\n- \u66f4\u65b0\u4e86 PR \u6807\u9898\u9a8c\u8bc1\uff0c\u4e0d\u5141\u8bb8\u5728\u6807\u9898\u672b\u5c3e\u51fa\u73b0\u4e2d\u6587\u5b57\u7b26   \\n  https://github.com/OpenAtomFoundation/pika/pull/2718\\n\\n- \u91cd\u6784\u4e3b\u4ece\u590d\u5236\u6a21\u5f0f slave \u8282\u70b9\u7684\u4e3b\u4ece\u540c\u6b65\u7ebf\u7a0b\u6a21\u578b\uff0c\u5c3d\u53ef\u80fd\u51cf\u5c11 binlog \u6d88\u8d39\u963b\u585e\u95ee\u9898    \\n  https://github.com/OpenAtomFoundation/pika/pull/2638\\n\\n- \u65b0\u589e RocksDB Compaction \u7b56\u7565\u52a8\u6001\u8c03\u6574\u53c2\u6570\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u8c03\u6574 Compaction \u7b56\u7565\uff0c\u964d\u4f4e Compaction \u64cd\u4f5c\u5bf9\u670d\u52a1\u6027\u80fd\u7684\u635f\u8017   \\n  https://github.com/OpenAtomFoundation/pika/pull/2538\\n\\n## 2.4 \u53d1\u7248 tag\\n\\n\u200b    https://github.com/OpenAtomFoundation/pika/releases/tag/v4.0.0\\n\\n# **3 \u793e\u533a**\\n\\n\u611f\u8c22\u6240\u6709\u4e3a v4.0.0 \u505a\u51fa\u8d21\u732e\u7684\u793e\u533a\u6210\u5458\uff0c\u5305\u62ec issue/PR \u63d0\u4ea4\u8005\u3001\u4ee3\u7801 reviewer \u3010\u6392\u540d\u4e0d\u5206\u5148\u540e\uff0c\u4f9d\u636e\u5b57\u6bcd\u5e8f\u5217\u3011\uff1a\\n\\n- AlexStocks\\n- baerwang\\n- chejinge\\n- cheniujh\\n- chienguo\\n- guangkun123\\n- gukj-spel\\n- longfar-ncy\\n- lqxhub\\n- luky116\\n- Mixficsol\\n- saz97\\n- wangshao1\\n\\nPikiwiDB (Pika) \u5f00\u6e90\u793e\u533a\u70ed\u70c8\u6b22\u8fce\u60a8\u7684\u53c2\u4e0e\u548c\u652f\u6301\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u95ee\u9898\u3001\u610f\u89c1\u6216\u5efa\u8bae\uff0c\u8bf7\u626b\u7801\u6dfb\u52a0 PikiwiDB \u5c0f\u52a9\u624b\u3010\u5fae\u4fe1\u53f7: PikiwiDB\u3011\u4e3a\u597d\u53cb\uff0c\u5b83\u4f1a\u62c9\u60a8\u52a0\u5165\u5b98\u65b9\u5fae\u4fe1\u7fa4\u3002"},{"id":"Pika-3.5.4","metadata":{"permalink":"/blog/Pika-3.5.4","source":"@site/blog/2024-05-16-Pika-3.5.4.md","title":"What\'s new in PikiwiDB(Pika) v3.5.4","description":"PikiwiDB (Pika) \u793e\u533a\u975e\u5e38\u8363\u5e78\u5730\u5ba3\u5e03\uff0c\u6211\u4eec\u7684\u6700\u65b0 v3.5.4 \u6b63\u5f0f\u751f\u4ea7\u53ef\u7528\u7248\u672c\u73b0\u5df2\u53d1\u5e03\u3002","date":"2024-05-16T00:00:00.000Z","tags":[],"readingTime":6.53,"hasTruncateMarker":false,"authors":[{"name":"\u9648\u4fca\u534e","title":"360"}],"frontMatter":{"title":"What\'s new in PikiwiDB(Pika) v3.5.4","slug":"Pika-3.5.4","authors":[{"name":"\u9648\u4fca\u534e","title":"360"}],"hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"What\'s new in PikiwiDB(Pika) v4.0.0","permalink":"/blog/PikiwiDB-Pika--4.0.0"},"nextItem":{"title":"What\'s new in Pika v3.5.3 \uff08\u82f1\u6587\u7248\u672c\uff09","permalink":"/blog/Pika-3.5.3-en"}},"content":"PikiwiDB (Pika) \u793e\u533a\u975e\u5e38\u8363\u5e78\u5730\u5ba3\u5e03\uff0c\u6211\u4eec\u7684\u6700\u65b0 v3.5.4 \u6b63\u5f0f\u751f\u4ea7\u53ef\u7528\u7248\u672c\u73b0\u5df2\u53d1\u5e03\u3002\\n\\nv3.5.4 \u89e3\u51b3\u4e86\u5386\u53f2\u9057\u7559\u7684 bug\uff0c\u5bf9 PikiwiDB (Pika) \u7684\u4e00\u4e9b\u9057\u7559 bug \u8fdb\u884c\u4fee\u590d\u548c\u4f18\u5316\uff0c\u65e8\u5728\u6253\u9020\u51fa\u4e00\u4e2a\u9ad8\u7a33\u5b9a\u6027\u7684\u7248\u672c\u3002\u672c\u6b21\u7684\u91cd\u70b9\u4f18\u5316\u4e3b\u8981\u5305\u62ec\uff0cPikiwiDB (Pika) \u652f\u6301\u52a8\u6001\u8c03\u6574\u9650\u901f\u53c2\u6570\u3001\u589e\u5f3a PikiwiDB (Pika) \u7684\u5ba2\u89c2\u6d4b\u6027\u6307\u6807\u3001 \u78c1\u76d8 IO \u9650\u901f\u652f\u6301\u8bfb\u9650\u901f\u53ca\u5199\u9650\u901f\u7b49\u3002\\n\\n## 1 \u65b0\u7279\u6027\\n\\n1. Pika \u652f\u6301\u52a8\u6001\u8c03\u6574\u5168\u91cf\u540c\u6b65\u9650\u901f\u53c2\u6570 rsync-timeout-ms \u548c throttle-bytes-per-second\u3002\\n\\n\u81ea v3.5.0 \u7248\u672c\u5f00\u59cb\uff0cPikiwiDB (Pika) \u670d\u52a1\u6452\u5f03\u4e86\u901a\u8fc7\u5b50\u8fdb\u7a0b\u5185\u4f7f\u7528\u539f\u6765 rsync \u5de5\u5177\u8fdb\u884c\u4e3b\u4ece\u5168\u91cf\u540c\u6b65\u7684\u903b\u8f91\uff0c\u5728 PikiwiDB (Pika) \u5185\u90e8\u4ee5\u7ebf\u7a0b\u65b9\u5f0f\u3010\u79f0\u4f5c rsync \u7ebf\u7a0b\u3011\u81ea\u884c\u5b9e\u73b0\u4e86\u65b0\u7684\u5168\u91cf\u540c\u6b65\u903b\u8f91\uff0c\u907f\u514d\u56e0\u4e3a\u5916\u90e8\u8fdb\u7a0b\u4e0d\u53ef\u63a7\u5f15\u8d77\u7684\u4e3b\u4ece\u540c\u6b65\u95ee\u9898\uff0c\u6839\u636e 360 \u5185\u90e8 Pika \u7ebf\u4e0a\u5927\u89c4\u6a21\u96c6\u7fa4\u8fd0\u7ef4\u7684\u7ecf\u9a8c\uff0c\u5728 PikiwiDB (Pika) \u4e3b\u4ece\u8fdb\u884c\u5168\u91cf\u540c\u6b65\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u9047\u5230\u67d0\u4e9b\u4e0d\u5229\u7684\u5916\u90e8\u56e0\u7d20\uff0c\u5982\u7f51\u7edc\u6ce2\u52a8\uff0c\u786c\u4ef6\u6545\u969c\uff08\u5982\u7f51\u5361\u964d\u901f\u5bfc\u81f4\u7684\u4e3b\u4ece\u7f51\u5361\u901f\u7387\u4e0d\u5339\u914d\uff09\u7b49\uff0c\u53ef\u80fd\u5f15\u8d77 rsync \u7ebf\u7a0b\u8bf7\u6c42\u6301\u7eed\u8d85\u65f6\uff08PikiwiDB (Pika) \u5185\u7f6e rsync \u6a21\u5757\u7528\u4e8e\u5168\u91cf\u540c\u6b65\u9636\u6bb5\u7684\u6587\u4ef6\u4f20\u8f93\uff09\uff0c\u4e14\u8d85\u65f6\u91cd\u8bd5\u6240\u53d1\u51fa\u7684\u5305\u53ef\u80fd\u5f15\u53d1\u66f4\u5927\u7684\u7f51\u7edc\u4fe1\u9053\u8d1f\u62c5\u3002\u6b64\u65f6\u5bf9\u4e8e\u8fd0\u7ef4\u4eba\u5458\u6765\u8bf4\uff0c\u5982\u679c\u80fd\u52a8\u6001\u8c03\u6574 rsync \u8bf7\u6c42\u7684\u8d85\u65f6\u65f6\u95f4\u548c rsync \u4f20\u8f93\u7684\u901f\u7387\u4e0a\u9650\uff0c\u4e0d\u4ec5\u610f\u5473\u7740\u5bf9\u5168\u91cf\u540c\u6b65\u9636\u6bb5\u63a7\u5236\u7c92\u5ea6\u7684\u8fdb\u4e00\u6b65\u7ec6\u5316\uff0c\u66f4\u5927\u5927\u964d\u4f4e\u4e86\u5728\u8be5\u573a\u666f\u4e0b\u7684\u8fd0\u7ef4\u5904\u7f6e\u96be\u5ea6\u3002\\n\\n\u5173\u952e PR\uff1a\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2633\\n\\n2. \u5c06 info key space 1 \u7684\u7ed3\u679c\u8f93\u51fa\u81f3 info all \u5e76\u5c55\u793a\u5230\u76d1\u63a7\u754c\u9762\u4e2d\u3002\\n\\nPikiwiDB (Pika) \u662f\u901a\u8fc7 Info \u547d\u4ee4\u91c7\u96c6\u6570\u636e\u81f3 Pika-Exporter\uff0c\u5c55\u793a\u5230 Grafana \u754c\u9762\u4e0a\u7684\uff0c\u76ee\u524d\u754c\u9762\u4e0a\u90e8\u5206\u6570\u636e\u662f\u6ca1\u6709\u5c55\u793a\u7684\uff0c\u5982 keys \u7684\u6570\u91cf\uff0c\u672c\u6b21\u5c06\u6267\u884c info keyspace \u7684\u7ed3\u679c\u5c55\u793a\u5230\u76d1\u63a7\u754c\u9762\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u6307\u6807\u6765\u67e5\u770b\u5b58\u50a8\u7684\u91cf\u7ea7\u7b49\u3002\\n\\n\u5173\u952e PR\uff1a\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2603\\n\\n3.Pika \u78c1\u76d8 IO \u9650\u901f\u53c2\u6570\u652f\u6301 OnlyRead\u3001OnlyWrite\u3001ReadAndWrite\uff0c\u9ed8\u8ba4\u652f\u6301 OnlyWrite\u3002\\n\\n\u81ea 3.5.0 \u7248\u672c\u5f00\u59cb\uff0cPikiwiDB(Pika) \u670d\u52a1\u53ef\u4ee5\u901a\u8fc7\u8c03\u6574 rate-limit \u53c2\u6570\u5b9e\u73b0\u5199\u9650\u901f\uff0c\u9632\u6b62\u5728\u7f51\u5361\u8d28\u91cf\u4e0d\u9ad8\u7684\u60c5\u51b5\u4e0b\u78c1\u76d8 IO \u8fc7\u91cd\u5bfc\u81f4\u670d\u52a1\u4e0d\u53ef\u7528\uff0c\u6216\u8005 binlog \u963b\u585e\u7684\u60c5\u51b5\u53d1\u751f\u3002360 \u5185\u90e8 Pika \u7ebf\u4e0a\u5927\u89c4\u6a21\u96c6\u7fa4\u8fd0\u7ef4\u7684\u7ecf\u9a8c\uff0c\u5728 PikiwiDB (Pika) \u5b9e\u4f8b\u7684\u7f51\u5361\u8f83\u5dee\u60c5\u51b5\u4e0b\uff0c\u4e5f\u9700\u8981\u5bf9\u8bfb\u5b9e\u4f8b\u8fdb\u884c\u9650\u901f\uff0c\u672c\u6b21\u4fee\u6539\u652f\u6301\u8bfb\u3001\u5199\u9650\u901f\uff0c\u9ed8\u8ba4\u662f\u5199\u9650\u901f\uff0c\u8c03\u6574 config \u914d\u7f6e\u4e2d\u7684 rate-limiter-mode \u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u8bfb\u9650\u901f\uff0c\u6216\u8005\u540c\u65f6\u8bfb\u5199\u9650\u901f\u3002\\n\\n\u5173\u952e PR\uff1a\\n\\n- https://github.com/OpenAtomFoundation/pika/pull/2599\\n\\n2 \u6539\u8fdb\u5217\u8868\\n\\n- slotmigrate \u6dfb\u52a0 go test\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2576\\n\\n- INFO \u547d\u4ee4\u8017\u65f6\u4f18\u5316\uff0c\u964d\u4f4e\u67e5\u78c1\u76d8\u9891\u7387\uff0c\u907f\u514d\u56e0\u4e3a\u6570\u636e\u91c7\u96c6\u8c03\u7528 info \u547d\u4ee4\u65f6\u67e5\u78c1\u76d8\u592a\u8fc7\u9891\u7e41\u5bfc\u81f4\u670d\u52a1\u6027\u80fd\u4e0b\u964d\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2554\\n\\n- \u5bf9\u4e94\u79cd\u57fa\u672c\u6570\u636e\u7c7b\u578b\u547d\u4ee4\u589e\u52a0 Redis tcl \u6d4b\u8bd5\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2527\\n\\n3 Bug \u4fee\u590d\\n\\n- \u4fee\u590d\u4f7f\u7528 Pika Exporter \u65f6\u53ef\u80fd\u4f1a\u51fa\u73b0 slots \u5206\u914d\u4e0d\u5747\u8861\u7684\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2651\\n\\n- \u4fee\u590d Codis dashboard \u4e0d\u80fd\u6b63\u786e\u66f4\u65b0 master \u5b9e\u4f8b\u72b6\u6001\u7684\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2650\\n\\n- \u4fee\u590d Redis \u4e8b\u52a1 binlog \u89e3\u6790\u5931\u8d25\u5bfc\u81f4\u7684\u4e3b\u4ece\u540c\u6b65\u5f02\u5e38\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2642\\n\\n- \u4fee\u590d Pika Expoter \u542f\u52a8\u65f6\u4e0d\u5e26\u53c2\u6570\u5bfc\u81f4\u542f\u52a8\u5931\u8d25\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2640\\n\\n- \u4fee\u590d\u4f7f\u7528 Pika Operater \u62c9\u8d77\u96c6\u7fa4 Codis-proxy panic \u7684\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2633\\n\\n- \u4fee\u590d CI \u7f16\u8bd1\u51fa\u7684\u4e8c\u8fdb\u5236\u8fdb\u884c\u81ea\u52a8\u5316\u6d4b\u8bd5\u65f6 cp \u547d\u4ee4\u5931\u8d25\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2614\\n\\n- \u4fee\u590d\u53d8\u91cf\u672a\u521d\u59cb\u5316\u5bfc\u81f4 cache \u542f\u52a8\u5931\u8d25\u7684\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2613\\n\\n- \u4fee\u590d userpass \u548c userblacklist \u52a8\u6001\u4fee\u6539\u53c2\u6570\u529f\u80fd\u5f02\u5e38\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2600\\n\\n- \u4fee\u590d scard sscan \u7ed3\u679c\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2596\\n\\n- \u4fee\u590d\u5f53 max-rsync-parallel-num \u5927\u4e8e 4\uff0cslave \u4f1a\u5728\u4e3b\u4ece\u590d\u5236\u65f6 coredump \u7684\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2595\\n\\n- \u8c03\u6574\u4e0d\u5e38\u7528\u7684\u7ebf\u7a0b\u6c60\u7ebf\u7a0b\u6570\uff0c\u907f\u514d\u56e0\u4e3a\u7a7a\u8dd1\u5bfc\u81f4\u6027\u80fd\u635f\u8017\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2590\\n\\n- \u4fee\u590d Pika \u4e8b\u52a1\u8fb9\u7f18\u6d4b\u8bd5 case \u4e0d\u901a\u8fc7\u7684\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2586\\n\\n- \u5c06 cache-model \u4fee\u6539\u6210 cache-mode\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2585\\n\\n- \u4fee\u590d\u4f7f\u7528 info keyspace \u540e\uff0cinfo all \u6b7b\u9501\u7684\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2584\\n\\n- \u4fee\u590d\u56e0\u4fee\u6539 zsetscorekey comparator impl \u5b57\u5178\u5e8f\u6bd4\u8f83\u719f\u987a\u5e8f\uff0c\u5bfc\u81f4 353 352 \u6781\u7aef\u573a\u666f\u4e0d\u517c\u5bb9\u7684\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2583\\n\\n- \u4fee\u590d compact \u6b7b\u9501\u7684\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2581\\n\\n- Slotmigrate \u6dfb\u52a0 go test\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2576\\n\\n- \u66f4\u65b0 Pika Operater \u4f7f\u7528\u7684 pika \u7248\u672c\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2572\\n\\n- \u4fee\u590d config rewrite \u540e blockcache \u6570\u503c\u5f02\u5e38\u7684\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2561\\n\\n- \u4fee\u590d slotmigrate \u52a8\u6001\u4fee\u590d\u540e\u503c\u9519\u8bef\u7684\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2548\\n\\n- \u4fee\u590d spop \u53ef\u80fd\u4f1a\u51fa\u73b0\u4e3b\u4ece\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2541\\n\\n- \u4fee\u590d CloseFd (it->second [i]) \u51fa\u73b0\u8d8a\u754c\u7684\u95ee\u9898\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2539\\n\\n- \u4fee\u590d Flushall \u548c FlushDB \u6b7b\u9501\u7684\u9690\u60a3\uff0c\u5e76\u5220\u9664 FlushSubDB \u63a5\u53e3\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2533\\n\\n- \u589e\u52a0\u53c2\u6570\u63a7\u5236\u662f\u5426\u6e05\u7406 tcl \u6d4b\u8bd5\u540e\u4ea7\u751f\u7684\u6570\u636e\u6587\u4ef6\uff0c\u9632\u6b62\u5e9f\u5f03\u6570\u636e\u5360\u636e\u78c1\u76d8\u3002\\n\\n  https://github.com/OpenAtomFoundation/pika/pull/2507\\n\\n4 \u793e\u533a\\n\\nPikiwiDB (Pika) \u5f00\u6e90\u793e\u533a\u70ed\u70c8\u6b22\u8fce\u60a8\u7684\u53c2\u4e0e\u548c\u652f\u6301\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u95ee\u9898\u3001\u610f\u89c1\u6216\u5efa\u8bae\uff0c\u53ef\u901a\u8fc7\u4ee5\u4e0b\u6e20\u9053\u8054\u7cfb\u6211\u4eec\uff1a\\n\\n![\u56fe\u7247](data:image/svg+xml,%3C%3Fxml version=\'1.0\' encoding=\'UTF-8\'%3F%3E%3Csvg width=\'1px\' height=\'1px\' viewBox=\'0 0 1 1\' version=\'1.1\' xmlns=\'http://www.w3.org/2000/svg\' xmlns:xlink=\'http://www.w3.org/1999/xlink\'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke=\'none\' stroke-width=\'1\' fill=\'none\' fill-rule=\'evenodd\' fill-opacity=\'0\'%3E%3Cg transform=\'translate(-249.000000, -126.000000)\' fill=\'%23FFFFFF\'%3E%3Crect x=\'249\' y=\'126\' width=\'1\' height=\'1\'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)\\n\\n\\n![img](https://mp.weixin.qq.com/mp/qrcode?scene=10000004&size=102&__biz=Mzg4MTY2ODA1MQ==&mid=2247483978&idx=1&sn=b56b42fb857f2ef6cc4c57b18f205e92&send_time=)\\n\\n\u5fae\u4fe1\u626b\u4e00\u626b\\n\u5173\u6ce8\u8be5\u516c\u4f17\u53f7"},{"id":"Pika-3.5.3-en","metadata":{"permalink":"/blog/Pika-3.5.3-en","source":"@site/blog/2024-03-27-Pika-3.5.3-en.md","title":"What\'s new in Pika v3.5.3 \uff08\u82f1\u6587\u7248\u672c\uff09","description":"As Redis announces the adoption of dual protocols to maintain its commercial interests, the PikiwiDB (Pika) community is pleased to announce the release of the v3.5.3 stable version for production use today.","date":"2024-03-27T00:00:00.000Z","tags":[],"readingTime":8.965,"hasTruncateMarker":false,"authors":[{"name":"360 \u4e2d\u95f4\u4ef6\u56e2\u961f","title":"Pika \u5f00\u6e90\u793e\u533a"}],"frontMatter":{"title":"What\'s new in Pika v3.5.3 \uff08\u82f1\u6587\u7248\u672c\uff09","slug":"Pika-3.5.3-en","authors":[{"name":"360 \u4e2d\u95f4\u4ef6\u56e2\u961f","title":"Pika \u5f00\u6e90\u793e\u533a"}],"hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"What\'s new in PikiwiDB(Pika) v3.5.4","permalink":"/blog/Pika-3.5.4"},"nextItem":{"title":"What\'s new in Pika v3.5.3 ","permalink":"/blog/Pika-3.5.3"}},"content":"As Redis announces the adoption of dual protocols to maintain its commercial interests, the PikiwiDB (Pika) community is pleased to announce the release of the v3.5.3 stable version for production use today.\\n\\nThe v3.5.3 version addresses historical bugs and introduces a multitude of new features. These features primarily include Pika\'s support for ACL, the removal of residual Slot code from the Sharing mode, separation of fast and slow commands, Redis Stream support, large key analysis tools, and Pika\'s distributed cluster support for fully automated failover, among others. Additionally, we have enriched the automation test cases in version 3.5.3 to enhance the stability and robustness of the Pika service, providing users with a more efficient and stable experience. This article will mainly elaborate on the significant features, bug fixes, and performance improvements in this update.\\n\\nBefore diving into the main release content of version 3.5.3, please note the following statements:\\n\\n1. Due to trademark issues, the Pika project has been renamed to PikiwiDB. In this article, we will use PikiwiDB (Pika) to refer to the project at https://github.com/OpenAtomFoundation/pika.\\n2. We have created a new project https://github.com/OpenAtomFoundation/pikiwidb, which is a large-capacity KV database compatible with the Redis protocol and based on the Raft protocol. It is mainly designed for scenarios requiring strong consistency, such as storing metadata at a scale of about 10TiB. PikiwiDB will be used to refer to this project specifically.\\n\\n## 1 Major Improvements\\n\\n### 1.1 PikiwiDB (Pika) Supports ACL\\n\\nPikiwiDB (Pika) 3.5.3 now fully supports Redis ACL, laying a solid foundation for future multi-tenant support in cloud-native Pika clusters. Before 3.5.3, Pika already supported Redis user authentication methods such as auth/userpass/requirepass, as well as its own command blacklist mode configured through userblacklist in pika.conf. This update maintains backward compatibility and supports these existing methods.\\n\\nMoreover, we have integrated all Redis ACL TCL test suites into PikiwiDB (Pika)\'s test suite to ensure that PikiwiDB (Pika)\'s ACL implementation is fully compatible with Redis ACL.\\n\\nKey PRs:\\n\\n- [PikiwiDB (Pika) Supports ACL](https://github.com/OpenAtomFoundation/pika/pull/2013)\\n- [Fixes ACL User Authentication Issues](https://github.com/OpenAtomFoundation/pika/pull/2449)\\n- [ACL Backward Compatibility with Userblacklist](https://github.com/OpenAtomFoundation/pika/pull/2459)\\n- [Adds Redis ACL Test Suites](https://github.com/OpenAtomFoundation/pika/pull/2495)\\n\\n### 1.2 Hybrid Storage Model Supports Bitmap\\n\\nIn a single-node environment, it is impossible to simultaneously optimize PikiwiDB (Pika)\'s read/write/compaction, which is known as the \\"impossible triangle.\\" In version v3.5.2, we supported hybrid storage consisting of cached Redis and RocksDB, which supported five data structures: string/list/set/zset/hashtable. In this release, we have added support for bitmap: https://github.com/OpenAtomFoundation/pika/pull/2253\\n\\nAdditionally, we now support dynamic tuning of Redis cache parameters in version 3.5.3: https://github.com/OpenAtomFoundation/pika/pull/2197\\n\\n### 1.3 Separation of Fast and Slow Commands\\n\\nTo prevent slow commands from blocking the execution of fast commands, we have implemented the separation of fast and slow commands at both the Codis-Proxy and PikiwiDB (Pika) levels.\\n\\nhttps://github.com/OpenAtomFoundation/pika/pull/2162\\n\\n### 1.4 Redis Stream\\n\\nWhile PikiwiDB (Pika) previously supported Redis pubsub, which only allowed for online message passing, in version 3.5.3, we have added limited support for Redis Stream, similar to a message queue (MQ), to facilitate safer message transmission. To ensure data safety, we have specifically added support for the Stream data type in our underlying engine, BlackWidow.\\n\\nKey PR:\\n\\n- [Pika Supports Redis Stream](https://github.com/OpenAtomFoundation/pika/pull/1955)\\n\\nPlease note that Pika Stream currently does not support consumer group consumption and will be available in future updates.\\n\\n### 1.5 Cloud-Native Cluster\\n\\nIn PikiwiDB (Pika) 3.5.0, we open-sourced a Pika-Operator that supports deploying a pair of Pika master and slave on K8s. In version 3.5.2, based on Kubeblocks, our Pika-Operator supported deploying a Pika Cluster in the form of Codis on K8s, but it did not support dynamic scaling at the time.\\n\\nIn version 3.5.3, the latest Pika-Operator now supports node scaling at the Codis Group level and data rebalance.\\n\\nKey PRs:\\n\\n- [PikiwiDB (Pika) Operator Supports Pika Cluster Auto-Scaling](https://github.com/OpenAtomFoundation/pika/pull/2121)\\n- [Optimizes Codis Slot Migration Speed, Supports Dynamic Adjustment of Migration Threads and Speed](https://github.com/OpenAtomFoundation/pika/pull/2486)\\n- [Pika-Operator Supports Namespaces, Allows Deploying Different Clusters in Different Namespaces](https://github.com/OpenAtomFoundation/pika/pull/2480)\\n- [Pika-Operator Supports Monitoring Metric Collection, Automatically Launches Pika-Exporter](https://github.com/OpenAtomFoundation/pika/pull/2451)\\n\\n### 1.6 Compaction Improvements\\n\\nPikiwiDB (Pika)\'s underlying disk storage engine, RocksDB, significantly impacts PikiwiDB (Pika)\'s read and write performance during compaction, which appears as \\"spikes\\" in monitoring systems. Controlling compaction is key to optimizing Pika\'s read and write performance.\\n\\nKey PRs for compaction improvements:\\n\\n- [Adds CompactRange Command to Support Compaction of a Specific Range of Keys](https://github.com/OpenAtomFoundation/pika/pull/2163)\\n- [Improves Compaction Speed and Reduces Compaction Time](https://github.com/OpenAtomFoundation/pika/pull/2172)\\n- [Invokes Disable Compaction When Executing Shutdown Command, Enhances Exit Speed](https://github.com/OpenAtomFoundation/pika/pull/2345)\\n\\n### 1.7 Automatic Failover\\n\\nPikiwiDB (Pika) clusters are currently based on Codis. To enhance the usability of PikiwiDB (Pika) Clusters based on Codis, we have made many extensions to Codis.\\n\\nThe original Codis did not support failover within Groups, requiring the use of Redis Sentinel, which increases operational costs. We have implemented auto failover for Groups within Codis Dashboard by drawing on the functionality of sentinel.\\n\\nKey PR:\\n\\n- [PikiwiDB (Pika) Distributed Cluster Supports Automatic Failover](https://github.com/OpenAtomFoundation/pika/pull/2386)\\n\\n### 1.8 Observability Enhancements\\n\\nThe key component for PikiwiDB (Pika) observability is Pika-Exporter. Although Redis Cache was added to the 3.5.2 version, it lacked monitoring metrics. In version 3.5.3, we have added metrics such as hit rate, hits per second, Redis Cache memory usage, number of Redis Caches, and number of Redis Cache DBs.\\n\\nKey PRs:\\n\\n- [Pika Exporter Exposes Cache-Related Data Collection Metrics](https://github.com/OpenAtomFoundation/pika/pull/2318)\\n- [PikiwiDB (Pika) Distributed Cluster Codis Proxy Adds Observable Metrics](https://github.com/OpenAtomFoundation/pika/pull/2199)\\n- [Fixes dbsize Calculation Error](https://github.com/OpenAtomFoundation/pika/pull/2494)\\n- [Fixes Inaccurate Network Monitoring Metric Statistics](https://github.com/OpenAtomFoundation/pika/pull/2234)\\n\\n### 1.9 Data Consistency\\n\\nVersion 3.5.3 fixes numerous PikiwiDB (Pika) master-slave synchronization issues, ensuring data consistency.\\n\\nKey PRs:\\n\\n- [Fixes the Logic for Slave Nodes Receiving Exceptional Reply Packets from Masters During Full-Quantity Replication](https://github.com/OpenAtomFoundation/pika/pull/2319)\\n- [Fixes Inconsistency Issues Between Cache and DB Data in Certain Scenarios](https://github.com/OpenAtomFoundation/pika/pull/2225)\\n- [Fixes Data Loss Issues After Full-Quantity Replication Failure](https://github.com/OpenAtomFoundation/pika/pull/2439)\\n- [Adds Data Synchronization Status During Full-Quantity Replication, Clarifying Data Synchronization Progress](https://github.com/OpenAtomFoundation/pika/pull/2430)\\n- [Fixes the Issue of No Proper Response to Slave Synchronization Requests During Master Instance bgsave Execution](https://github.com/OpenAtomFoundation/pika/pull/2437)\\n- [Fixes Data Inconsistency Issues When Applying Binlog on Slave Instances Without Locking the Operated Key](https://github.com/OpenAtomFoundation/pika/pull/2409)\\n- [Fixes Data Inconsistency Issues After Data Migration](https://github.com/OpenAtomFoundation/pika/pull/2485)\\n\\n### 1.10 Test Suite Additions\\n\\nThe PikiwiDB (Pika) test suite consists of gtest unit tests, Redis TCL test suites, and Go test suites. In 3.5.3, we have added Codis cluster e2e tests.\\n\\nKey PRs:\\n\\n- [Pika TCL Test Suite](https://github.com/OpenAtomFoundation/pika/pull/2497)\\n- [Pika Gotest Test Suite](https://github.com/OpenAtomFoundation/pika/pull/2502)\\n\\n### 1.11 Toolkit Additions\\n\\nPikiwiDB (Pika) has always valued the construction of toolkits, and all related tools can be found at https://github.com/OpenAtomFoundation/pika/tree/unstable/tools. In 3.5.3, we have added a new tool:\\n\\n- [PikiwiDB (Pika) Supports Large Key Analysis Tools](https://github.com/OpenAtomFoundation/pika/pull/2195)\\n\\n### 1.12 Documentation Updates\\n\\nThe PikiwiDB (Pika) documentation mainly consists of wiki documentation. In 3.5.3, we have updated the documentation for the Redis commands supported by Pika.\\n\\nDocumentation link: https://github.com/OpenAtomFoundation/pika/wiki/Pika-Supports-Redis-Interface-and-Content-Situation\\n\\n## 2 Release Improvements\\n\\nIn the first chapter, we described the main feature upgrades and improvements of version 3.5.3. Below is a detailed list of the relevant PRs for this release.\\n\\n### 2.1 New Features\\n\\n- [Pika Supports ACL](https://github.com/OpenAtomFoundation/pika/pull/2013)\\n- [During Full-Quantity Replication, Pika Slave Nodes Do Not Accept Read Requests](https://github.com/OpenAtomFoundation/pika/pull/2197)\\n- [Removes Residual Slot Code from Sharing Mode, Returns to v3.0, Where One Pika Instance Has Multiple DBs, Each with Only One Blackwidow](https://github.com/OpenAtomFoundation/pika/pull/2251)\\n- [Automatically Recovers Service When Codis Dashboard Coroutine Panics](https://github.com/OpenAtomFoundation/pika/pull/2349)\\n- [Pika Cache Adds New Bitmap Data Type](https://github.com/OpenAtomFoundation/pika/pull/2253)\\n- [Pika Supports Separation of Fast and Slow Commands](https://github.com/OpenAtomFoundation/pika/pull/2162)\\n- [Pika Exporter Exposes Cache-Related Data Collection Metrics](https://github.com/OpenAtomFoundation/pika/pull/2318)\\n- [Pika Keeps Unix Timepoint After Completing Bgsave](https://github.com/OpenAtomFoundation/pika/pull/2167)\\n- [Pika Supports Dynamic Configuration of disable_auto_compations Parameter](https://github.com/OpenAtomFoundation/pika/pull/2257)\\n- [Pika Supports Redis Stream](https://github.com/OpenAtomFoundation/pika/pull/1955)\\n- [Pika Supports Large Key Analysis Tools](https://github.com/OpenAtomFoundation/pika/pull/2195)\\n- [Pika Supports Dynamic Adjustment of Pika Cache Parameters](https://github.com/OpenAtomFoundation/pika/pull/2197)\\n- [Updates Pika Benchmark Tool to Support More Interface Pressure Tests](https://github.com/OpenAtomFoundation/pika/pull/2222)\\n- [Pika Operator Supports Pika Cluster Auto-Scaling](https://github.com/OpenAtomFoundation/pika/pull/2121)\\n- [Adds CompactRange Command to Support Compaction of a Specific Range of Keys](https://github.com/OpenAtomFoundation/pika/pull/2163)\\n- [Improves Compaction Speed and Reduces Compaction Time](https://github.com/OpenAtomFoundation/pika/pull/2172)\\n- [Upgrades RocksDB Version to v8.7.3](https://github.com/OpenAtomFoundation/pika/pull/2157)\\n- [PikiwiDB (Pika) Distributed Cluster Codis Proxy Adds Observable Metrics](https://github.com/OpenAtomFoundation/pika/pull/2199)\\n- [PikiwiDB (Pika) Distributed Cluster Supports Automatic Failover](https://github.com/OpenAtomFoundation/pika/pull/2386)\\n- [Pika Supports Redis rename-command Feature](https://github.com/OpenAtomFoundation/pika/pull/2455)\\n- [Optimizes Codis Slot Migration Speed, Supports Dynamic Adjustment of Migration Threads and Speed](https://github.com/OpenAtomFoundation/pika/pull/2486)\\n- [PikiwiDB (Pika) Supports Dynamic Adjustment of max-conn-rbuf-size Parameter](https://github.com/OpenAtomFoundation/pika/pull/2434)\\n- [Pika-Operator Supports Namespaces, Allows Deploying Different Clusters in Different Namespaces](https://github.com/OpenAtomFoundation/pika/pull/2480)\\n- [Pika-Operator Supports Monitoring Metric Collection, Automatically Launches Pika-Exporter](https://github.com/OpenAtomFoundation/pika/pull/2451)\\n- [ACL Backward Compatibility with Userblacklist](https://github.com/OpenAtomFoundation/pika/pull/2459)\\n- [Enriches Pika TCL Test Suite](https://github.com/OpenAtomFoundation/pika/pull/2497)\\n- [Enriches Pika Gotest Test Suite](https://github.com/OpenAtomFoundation/pika/pull/2502)\\n\\n### 2.2 Bug Fixes\\n\\n- [Fixes Issue of Incorrect Deletion of Dump Files During Full-Quantity Replication by Pika Slave Nodes](https://github.com/OpenAtomFoundation/pika/pull/2377)\\n- [Fixes the Logic for Slave Nodes Receiving Exceptional Reply Packets from Masters During Full-Quantity Replication](https://github.com/OpenAtomFoundation/pika/pull/2319)\\n- [Invokes Disable Compaction When Executing Shutdown Command, Enhances Exit Speed](https://github.com/OpenAtomFoundation/pika/pull/2345)\\n- [Fixes Inaccurate Redis Memory Values in Codis-Dashboard](https://github.com/OpenAtomFoundation/pika/pull/2337)\\n- [Optimizes INFO Command Latency, Reduces Frequency of Checking Disk Usage](https://github.com/OpenAtomFoundation/pika/pull/2197)\\n- [Fixes Issue of Rsync Deleting Temporary Files with Incorrect Path, Leading to Failure in Opening RocksDB](https://github.com/OpenAtomFoundation/pika/pull/2186)\\n- [Fixes Issue of Commands Not Specifying DB Name, Leading to Coredump of Some Commands](https://github.com/OpenAtomFoundation/pika/pull/2194)\\n- [Uses info replication Command in Codis Dashboard Instead of info Command to Query Master IP, Reducing Performance Impact on Pika](https://github.com/OpenAtomFoundation/pika/pull/2198)\\n- [Fixes Inconsistency Issues Between Cache and DB Data in Certain Scenarios](https://github.com/OpenAtomFoundation/pika/pull/2225)\\n- [Fixes Issue of Segmentation Fault When Dump Directory is Empty](https://github.com/OpenAtomFoundation/pika/pull/2265)\\n- [Fixes Issue of Certain Commands\' Cache Not Taking Effect Due to Incorrect Flag Calculation](https://github.com/OpenAtomFoundation/pika/pull/2217)\\n- [Fixes Issue of Slave Instances Being Inaccessible Due to Deadlock After Master Instance flushdb in Master-Slave Replication Mode](https://github.com/OpenAtomFoundation/pika/pull/2249)\\n- [Fixes Issue of Commands Not Judging the Return Value of RocksDB](https://github.com/OpenAtomFoundation/pika/pull/2187)\\n- [Standardizes Function Return Values and Initial Values](https://github.com/OpenAtomFoundation/pika/pull/2176)\\n- [Fixes Inaccurate Network Monitoring Metric Statistics](https://github.com/OpenAtomFoundation/pika/pull/2234)\\n- [Fixes Issue of Abnormal Parameters When Loading Configuration File](https://github.com/OpenAtomFoundation/pika/pull/2218)\\n- [Fixes 100% CPU Usage Issue in Codis Dashboard](https://github.com/OpenAtomFoundation/pika/pull/2393)\\n- [Fixes Issue of Abnormal Display of Pika Master-Slave Roles in Codis Front End](https://github.com/OpenAtomFoundation/pika/pull/2387)\\n- [Fixes Data Inconsistency Issues After Data Migration](https://github.com/OpenAtomFoundation/pika/pull/2485)\\n- [Fixes Issue of Inaccurate Display in Codis-dashboard After Scaling or Pod Start/Stop](https://github.com/OpenAtomFoundation/pika/pull/2475)\\n- [Fixes Issue of Repeated Locking at the DB Level](https://github.com/OpenAtomFoundation/pika/pull/2372)\\n- [Fixes Issue of Data Loss After Full-Quantity Replication Failure](https://github.com/OpenAtomFoundation/pika/pull/2439)\\n- [Fixes Issue of No Proper Response to Slave Synchronization Requests During Master Instance bgsave Execution](https://github.com/OpenAtomFoundation/pika/pull/2437)\\n- [Adds Data Synchronization Status During Full-Quantity Replication, Clarifying Data Synchronization Progress](https://github.com/OpenAtomFoundation/pika/pull/2430)\\n- [Fixes Issue of No Locking of Operated Key When Applying Binlog on Slave Instances, Leading to Data Inconsistency](https://github.com/OpenAtomFoundation/pika/pull/2409)\\n- [Fixes Issue of Master Instance Coredump During Codis Slot Migration](https://github.com/OpenAtomFoundation/pika/pull/2415)\\n- [Fixes Issue of Deleting Dump Files in Use During Master-Slave Replication](https://github.com/OpenAtomFoundation/pika/pull/2377)\\n- [Fixes Issue of Rsync Response Errors from Slave Instances During Master-Slave Replication](https://github.com/OpenAtomFoundation/pika/pull/2319)\\n\\n### 2.3 Release Tag\\n\\n[PikiwiDB (Pika) v3.5.3 Release Tag](https://github.com/OpenAtomFoundation/pika/releases/tag/v3.5.3)\\n\\n## 3 Community\\n\\nIf you have any questions, feel free to join our community discussion group. The PikiwiDB (Pika) open-source community appreciates your support and help.\\n\\n* telegram https://t.me/+gMlTzNacOF1iMTM1\\n* WeChat Assistant \\"PikiwiDB\\""},{"id":"Pika-3.5.3","metadata":{"permalink":"/blog/Pika-3.5.3","source":"@site/blog/2024-03-27-Pika-3.5.3.md","title":"What\'s new in Pika v3.5.3 ","description":"\u968f\u7740 Redis \u5ba3\u5e03\u91c7\u7528\u53cc\u534f\u8bae\u4ee5\u7ef4\u62a4\u5176\u5546\u4e1a\u5229\u76ca\uff0cPikiwiDB(Pika) \u793e\u533a\u975e\u5e38\u8363\u5e78\u5730\u5ba3\u5e03\u4e4b\u9645\uff0c\u6211\u4eec\u7684\u6700\u65b0 v3.5.3 \u6b63\u5f0f\u751f\u4ea7\u53ef\u7528\u7248\u672c\u73b0\u5df2\u53d1\u5e03\u3002","date":"2024-03-27T00:00:00.000Z","tags":[],"readingTime":14.775,"hasTruncateMarker":false,"authors":[{"name":"360 \u4e2d\u95f4\u4ef6\u56e2\u961f","title":"Pika \u5f00\u6e90\u793e\u533a"}],"frontMatter":{"title":"What\'s new in Pika v3.5.3 ","slug":"Pika-3.5.3","authors":[{"name":"360 \u4e2d\u95f4\u4ef6\u56e2\u961f","title":"Pika \u5f00\u6e90\u793e\u533a"}],"hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"What\'s new in Pika v3.5.3 \uff08\u82f1\u6587\u7248\u672c\uff09","permalink":"/blog/Pika-3.5.3-en"},"nextItem":{"title":"What\'s new in Pika v3.5.2","permalink":"/blog/Pika-3.5.2"}},"content":"\u968f\u7740 Redis \u5ba3\u5e03\u91c7\u7528\u53cc\u534f\u8bae\u4ee5\u7ef4\u62a4\u5176\u5546\u4e1a\u5229\u76ca\uff0cPikiwiDB(Pika) \u793e\u533a\u975e\u5e38\u8363\u5e78\u5730\u5ba3\u5e03\u4e4b\u9645\uff0c\u6211\u4eec\u7684\u6700\u65b0 v3.5.3 \u6b63\u5f0f\u751f\u4ea7\u53ef\u7528\u7248\u672c\u73b0\u5df2\u53d1\u5e03\u3002\\n\\nv3.5.3 \u7248\u672c\u4e0d\u4ec5\u4fee\u590d\u4e86\u957f\u671f\u5b58\u5728\u7684 Bug\uff0c\u8fd8\u5f15\u5165\u4e86\u4e00\u7cfb\u5217\u65b0\u7279\u6027\u3002\u8fd9\u4e9b\u65b0\u7279\u6027\u5305\u62ec Pika \u5bf9 ACL \u7684\u652f\u6301\u3001\u79fb\u9664\u4e86 Sharing \u6a21\u5f0f\u7684\u6b8b\u7559 Slot \u4ee3\u7801\u3001\u547d\u4ee4\u6267\u884c\u7684\u5feb\u6162\u5206\u79bb\u3001Redis Stream \u652f\u6301\u3001\u5927 key \u5206\u6790\u5de5\u5177\u3001\u4ee5\u53ca Pika \u5206\u5e03\u5f0f\u96c6\u7fa4\u7684\u5168\u81ea\u52a8\u5316 failover \u7b49\u3002\u6b64\u5916\uff0c\u6211\u4eec\u5728 3.5.3 \u7248\u672c\u4e2d\u589e\u52a0\u4e86\u66f4\u591a\u7684\u81ea\u52a8\u5316\u6d4b\u8bd5\u7528\u4f8b\uff0c\u4ee5\u63d0\u9ad8 Pika \u670d\u52a1\u7684\u7a33\u5b9a\u6027\u548c\u5065\u58ee\u6027\uff0c\u786e\u4fdd\u7528\u6237\u80fd\u591f\u4eab\u53d7\u5230\u66f4\u9ad8\u6548\u3001\u66f4\u7a33\u5b9a\u7684\u4f7f\u7528\u4f53\u9a8c\u3002\u672c\u6587\u5c06\u8be6\u7ec6\u4ecb\u7ecd\u672c\u6b21\u66f4\u65b0\u7684\u4e3b\u8981\u529f\u80fd\u3001Bug \u4fee\u590d\u548c\u6027\u80fd\u63d0\u5347\u3002\\n\\n\u5728\u6df1\u5165\u63a2\u8ba8 3.5.3 \u7248\u672c\u7684\u66f4\u65b0\u5185\u5bb9\u4e4b\u524d\uff0c\u8bf7\u6ce8\u610f\u4ee5\u4e0b\u51e0\u70b9\u58f0\u660e\uff1a\\n\\n1. \u7531\u4e8e\u5546\u6807\u95ee\u9898\uff0cPika \u9879\u76ee\u5df2\u66f4\u540d\u4e3a PikiwiDB\u3002\u5728\u672c\u6587\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528 PikiwiDB(Pika) \u6765\u6307\u4ee3\u9879\u76ee\uff0c\u9879\u76ee\u5730\u5740\u4e3a\uff1ahttps://github.com/OpenAtomFoundation/pika\\n2. \u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u9879\u76ee https://github.com/OpenAtomFoundation/pikiwidb\uff0c\u8fd9\u662f\u4e00\u4e2a\u57fa\u4e8e Raft \u534f\u8bae\u5b9e\u73b0\u7684\u517c\u5bb9 Redis \u534f\u8bae\u7684\u5927\u5bb9\u91cf KV \u6570\u636e\u5e93\uff0c\u4e3b\u8981\u9762\u5411\u5f3a\u4e00\u81f4\u6027\u6570\u636e\u573a\u666f\uff0c\u4f8b\u5982\u5b58\u50a8\u7ea6 10TiB \u89c4\u6a21\u7684\u5143\u6570\u636e\u3002PikiwiDB \u5c06\u4e13\u95e8\u7528\u4e8e\u6307\u4ee3\u6b64\u9879\u76ee\u3002\\n3. \u6211\u4eec\u4e3a PikiwiDB \u8bbe\u8ba1\u4e86\u4e00\u4e2a\u65b0\u7684 logo\uff0c\u4f5c\u4e3a\u5176\u5546\u6807\uff0c\u5e76\u5df2\u5728\u76f8\u5173\u653f\u5e9c\u673a\u6784\u6ce8\u518c\u3002\\n\\n![](https://github.com/OpenAtomFoundation/pikiwidb/blob/unstable/docs/images/pikiwidb-logo.png)\\n\\n## 1 \u4e3b\u8981\u66f4\u65b0\\n\\n### 1.1 \u652f\u6301 ACL\\n\\nPikiwiDB(Pika) 3.5.3 \u7248\u672c\u6b63\u5f0f\u5168\u9762\u652f\u6301 Redis ACL\uff0c\u4e3a\u672a\u6765\u5728\u4e91\u539f\u751f Pika \u96c6\u7fa4\u4e2d\u652f\u6301\u591a\u79df\u6237\u573a\u666f\u5960\u5b9a\u4e86\u57fa\u7840\u3002\u5728\u6b64\u4e4b\u524d\uff0cPika \u5df2\u7ecf\u652f\u6301\u4e86 Redis \u7684\u7528\u6237\u8ba4\u8bc1\u65b9\u5f0f\uff0c\u5982 auth/userpass/requirepass\uff0c\u4ee5\u53ca\u901a\u8fc7 pika.conf \u4e2d\u7684 userblacklist \u914d\u7f6e\u547d\u4ee4\u9ed1\u540d\u5355\u6a21\u5f0f\u3002\u672c\u6b21\u66f4\u65b0\u4fdd\u6301\u4e86\u5411\u540e\u517c\u5bb9\uff0c\u5e76\u652f\u6301\u8fd9\u4e9b\u5df2\u6709\u7684\u4f7f\u7528\u65b9\u5f0f\u3002\\n\\n\u6211\u4eec\u8fd8\u786e\u4fdd PikiwiDB(Pika) \u7684 ACL \u5b9e\u73b0\u4e0e Redis ACL \u5b8c\u5168\u517c\u5bb9\uff0c\u901a\u8fc7\u5c06 Redis \u7684\u6240\u6709 ACL TCL \u6d4b\u8bd5\u96c6\u7eb3\u5165 PikiwiDB(Pika) \u7684\u6d4b\u8bd5\u96c6\u4e2d\u3002\\n\\n\u5173\u952e PR \u94fe\u63a5\uff1a\\n\\n- [PikiwiDB(Pika) \u652f\u6301 ACL](https://github.com/OpenAtomFoundation/pika/pull/2013)\\n- [\u4fee\u6b63 ACL \u7528\u6237\u8ba4\u8bc1\u9519\u8bef\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2449)\\n- [ACL \u5411\u524d\u517c\u5bb9 userblacklist](https://github.com/OpenAtomFoundation/pika/pull/2459)\\n- [\u6dfb\u52a0 Redis ACL \u6d4b\u8bd5\u96c6](https://github.com/OpenAtomFoundation/pika/pull/2495)\\n\\n### 1.2 \u6df7\u5408\u5b58\u50a8\u6a21\u578b\u652f\u6301 bitmap\\n\\n\u5728\u5355\u4f53\u73af\u5883\u4e0b\uff0c\u540c\u65f6\u4f18\u5316 PikiwiDB(Pika) \u7684\u8bfb/\u5199/compaction \u662f\u4e00\u9879\u6311\u6218\u3002\u5728 v3.5.2 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u7531\u7f13\u5b58 Redis \u548c RocksDB \u6784\u6210\u7684\u6df7\u5408\u5b58\u50a8\u6a21\u578b\uff0c\u5e76\u652f\u6301\u4e86 string/list/set/zset/hashtable \u4e94\u79cd\u6570\u636e\u7ed3\u6784\u3002\u5728 3.5.3 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u589e\u52a0\u4e86\u5bf9 bitmap \u7684\u652f\u6301\u3002\\n\\n\u6b64\u5916\uff0c\u6211\u4eec\u5728 3.5.3 \u7248\u672c\u4e2d\u652f\u6301\u5bf9 Redis \u7f13\u5b58\u8fdb\u884c\u52a8\u6001\u53c2\u6570\u8c03\u6574\u3002\\n\\n\u5173\u952e PR \u94fe\u63a5\uff1a\\n\\n- [PikiwiDB(Pika) \u652f\u6301 bitmap](https://github.com/OpenAtomFoundation/pika/pull/2253)\\n- [\u652f\u6301\u5bf9 Redis \u7f13\u5b58\u8fdb\u884c\u52a8\u6001\u8c03\u53c2](https://github.com/OpenAtomFoundation/pika/pull/2197)\\n\\n### 1.3 \u5feb\u6162\u547d\u4ee4\u5206\u79bb\\n\\n\u4e3a\u4e86\u907f\u514d\u6162\u547d\u4ee4\u963b\u585e\u5feb\u547d\u4ee4\u7684\u6267\u884c\uff0c\u6211\u4eec\u5728 Codis-Proxy \u548c PikiwiDB(Pika) \u4e24\u4e2a\u5c42\u9762\u5b9e\u73b0\u4e86\u5feb\u6162\u547d\u4ee4\u5206\u79bb\u3002\\n\\n\u5173\u952e PR \u94fe\u63a5\uff1a\\n\\n- [\u5b9e\u73b0\u5feb\u6162\u547d\u4ee4\u5206\u79bb](https://github.com/OpenAtomFoundation/pika/pull/2162)\\n\\n### 1.4 Redis Stream \u652f\u6301\\n\\n\u867d\u7136 PikiwiDB(Pika) \u4e4b\u524d\u652f\u6301\u4e86 Redis pubsub\uff0c\u4f46\u5b83\u53ea\u80fd\u8fdb\u884c\u5728\u7ebf\u6d88\u606f\u4f20\u9012\u3002\u5728 3.5.3 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u589e\u52a0\u4e86\u5bf9 Redis Stream \u7684\u6709\u9650\u652f\u6301\uff0c\u7c7b\u4f3c\u4e8e\u6d88\u606f\u961f\u5217\uff08MQ\uff09\uff0c\u4ee5\u4fbf\u66f4\u5b89\u5168\u5730\u4f20\u9012\u6d88\u606f\u3002\u4e3a\u4e86\u786e\u4fdd\u6570\u636e\u7684\u5b89\u5168\u6027\uff0c\u6211\u4eec\u5728\u5e95\u5c42\u5f15\u64ce BlackWidow \u4e2d\u7279\u522b\u6dfb\u52a0\u4e86\u5bf9 Stream \u6570\u636e\u7c7b\u578b\u7684\u652f\u6301\u3002\\n\\n\u5173\u952e PR \u94fe\u63a5\uff1a\\n\\n- [Pika \u652f\u6301 Redis Stream](https://github.com/OpenAtomFoundation/pika/pull/1955)\\n\\n\u8bf7\u6ce8\u610f\uff0cPika Stream \u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u6d88\u8d39\u7ec4\u6d88\u8d39\uff0c\u8fd9\u5c06\u5728\u540e\u7eed\u7248\u672c\u4e2d\u5b9e\u73b0\u3002\\n\\n### 1.5 \u4e91\u539f\u751f\u96c6\u7fa4\\n\\n\u5728 PikiwiDB(Pika) 3.5.0 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u5f00\u6e90\u4e86 Pika-Operator\uff0c\u5b83\u652f\u6301\u5728 K8s \u4e0a\u90e8\u7f72 Pika \u4e3b\u4ece\u5bf9\u3002\u5728 3.5.2 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u57fa\u4e8e Kubeblocks \u7684 Pika-Operator \u652f\u6301\u4e86\u5728 K8s \u4e0a\u90e8\u7f72\u7c7b\u4f3c Codis \u7684 Pika Cluster\uff0c\u4f46\u5f53\u65f6\u8fd8\u4e0d\u652f\u6301\u52a8\u6001\u6269\u7f29\u5bb9\u3002\\n\\n\u5728 3.5.3 \u7248\u672c\u4e2d\uff0c\u6700\u65b0\u7684 Pika-Operator \u5df2\u7ecf\u652f\u6301\u4e86 Codis Group \u7ea7\u522b\u7684\u8282\u70b9\u6269\u7f29\u5bb9\uff0c\u5e76\u4e14\u652f\u6301\u6570\u636e\u7684 Rebalance\u3002\\n\\n\u5173\u952e PR \u94fe\u63a5\uff1a\\n\\n- [Pika-Operator \u652f\u6301 Pika \u96c6\u7fa4\u81ea\u52a8\u6269\u5bb9](https://github.com/OpenAtomFoundation/pika/pull/2121)\\n- [\u4f18\u5316 codis slot \u8fc1\u79fb\u901f\u5ea6\uff0c\u652f\u6301\u52a8\u6001\u4fee\u6539\u8fc1\u79fb\u7ebf\u7a0b\u548c\u901f\u5ea6](https://github.com/OpenAtomFoundation/pika/pull/2486)\\n- [Pika-operator \u652f\u6301 namespace\uff0c\u53ef\u5728\u4e0d\u540c namespace \u4e0b\u90e8\u7f72\u4e0d\u540c\u7684\u96c6\u7fa4](https://github.com/OpenAtomFoundation/pika/pull/2480)\\n- [Pika-operator \u652f\u6301\u76d1\u63a7\u6307\u6807\u91c7\u96c6\uff0c\u81ea\u52a8\u62c9\u8d77 pika-expoter](https://github.com/OpenAtomFoundation/pika/pull/2451)\\n\\n### 1.6 Compaction \u4f18\u5316\\n\\nPikiwiDB(Pika) \u7684\u5e95\u5c42\u78c1\u76d8\u5b58\u50a8\u5f15\u64ce RocksDB \u5728\u8fdb\u884c compaction \u65f6\u4f1a\u663e\u8457\u5f71\u54cd PikiwiDB(Pika) \u7684\u8bfb\u5199\u6027\u80fd\u3002\u56e0\u6b64\uff0c\u63a7\u5236\u597d compaction \u662f\u4f18\u5316 Pika \u8bfb\u5199\u6027\u80fd\u7684\u5173\u952e\u3002\\n\\n\u5173\u952e PR \u94fe\u63a5\uff1a\\n\\n- [\u6dfb\u52a0 CompactRange \u547d\u4ee4\uff0c\u652f\u6301\u5bf9\u4e00\u5b9a\u8303\u56f4\u5185\u7684 key \u8fdb\u884c compact](https://github.com/OpenAtomFoundation/pika/pull/2163)\\n- [\u63d0\u5347 Compaction \u901f\u5ea6\uff0c\u51cf\u5c11 Compaction \u8017\u65f6](https://github.com/OpenAtomFoundation/pika/pull/2172)\\n- [\u6267\u884c shutdown \u547d\u4ee4\u65f6\u8c03\u7528 disable compaction\uff0c\u63d0\u5347\u8fdb\u7a0b\u9000\u51fa\u901f\u5ea6](https://github.com/OpenAtomFoundation/pika/pull/2345)\\n\\n### 1.7 \u81ea\u52a8 Failover\\n\\nPikiwiDB(Pika) \u96c6\u7fa4\u76ee\u524d\u662f\u57fa\u4e8e Codis \u5b9e\u73b0\u7684\u3002\u4e3a\u4e86\u63d0\u9ad8\u57fa\u4e8e Codis \u7684 PikiwiDB(Pika) Cluster \u7684\u6613\u7528\u6027\uff0c\u6211\u4eec\u5bf9 Codis \u8fdb\u884c\u4e86\u8bb8\u591a\u6269\u5c55\u3002\\n\\n\u539f\u59cb\u7684 Codis \u4e0d\u652f\u6301 Group \u5185\u7684 Failover\uff0c\u9700\u8981\u4f7f\u7528 Redis Sentinel\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u8fd0\u7ef4\u6210\u672c\u589e\u52a0\u3002\u6211\u4eec\u5728 Codis Dashboard \u4e2d\u52a0\u5165\u4e86 sentinel \u7684\u529f\u80fd\uff0c\u5b9e\u73b0\u4e86\u5bf9 Group \u5185\u4e3b\u4ece\u7684\u81ea\u52a8 failover\u3002\\n\\n\u5173\u952e PR \u94fe\u63a5\uff1a\\n\\n- [PikiwiDB(Pika) \u5206\u5e03\u5f0f\u96c6\u7fa4\u652f\u6301\u81ea\u52a8 failover](https://github.com/OpenAtomFoundation/pika/pull/2386)\\n\\n### 1.8 \u53ef\u89c2\u6d4b\u6027\u63d0\u5347\\n\\nPikiwiDB(Pika) \u7684\u53ef\u89c2\u6d4b\u6027\u5173\u952e\u7ec4\u4ef6\u662f Pika-Exporter\u3002\u5728 3.5.2 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u867d\u7136\u6dfb\u52a0\u4e86 Redis Cache \u7f13\u5b58\u70ed\u6570\u636e\uff0c\u4f46\u7f3a\u5c11\u76d1\u63a7\u6307\u6807\u3002\u5728 3.5.3 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u589e\u52a0\u4e86\u5305\u62ec\u547d\u4e2d\u7387\u3001\u6bcf\u79d2\u547d\u4e2d\u6b21\u6570\u3001Redis Cache \u5185\u5b58\u4f7f\u7528\u91cf\u3001Redis Cache \u4e2a\u6570\u3001Redis Cache DB \u4e2a\u6570 \u7b49\u6307\u6807\u3002\\n\\n\u5173\u952e PR \u94fe\u63a5\uff1a\\n\\n- [Pika exporter \u66b4\u9732 cache \u76f8\u5173\u7684\u6570\u636e\u91c7\u96c6\u6307\u6807](https://github.com/OpenAtomFoundation/pika/pull/2318)\\n- [PikiwiDB(Pika) \u5206\u5e03\u5f0f\u96c6\u7fa4 Codis proxy \u65b0\u589e\u53ef\u89c2\u6d4b\u6307\u6807](https://github.com/OpenAtomFoundation/pika/pull/2199)\\n- [\u4fee\u590d dbsize \u8ba1\u7b97\u9519\u8bef\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2494)\\n- [\u4fee\u590d\u7f51\u7edc\u76d1\u63a7\u6307\u6807\u7edf\u8ba1\u4e0d\u51c6\u786e\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2234)\\n\\n### 1.9 \u6570\u636e\u4e00\u81f4\u6027\\n\\n3.5.3 \u7248\u672c\u4fee\u590d\u4e86\u8bb8\u591a PikiwiDB(Pika) \u4e3b\u4ece\u540c\u6b65\u95ee\u9898\uff0c\u786e\u4fdd\u6570\u636e\u7684\u4e00\u81f4\u6027\u3002\\n\\n\u5173\u952e PR \u94fe\u63a5\uff1a\\n\\n- [\u4fee\u590d\u4e3b\u4ece\u590d\u5236\u8fc7\u7a0b\u4e2d\uff0cslave \u8282\u70b9\u6536\u5230 master \u5f02\u5e38\u56de\u5305\u540e\u7684\u5904\u7406\u903b\u8f91](https://github.com/OpenAtomFoundation/pika/pull/2319)\\n- [\u4fee\u590d Pika cache \u90e8\u5206\u573a\u666f\u4e0b cache \u548c DB \u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2225)\\n- [\u4fee\u590d\u5168\u91cf\u590d\u5236\u5931\u8d25\u540e\uff0c\u672a\u505a\u5904\u7406\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2439)\\n- [\u4fee\u590d\u4e3b\u4ece\u590d\u5236\u8fc7\u7a0b\u4e2d\uff0c\u4e3b\u5b9e\u4f8b\u6267\u884c bgsave \u8fc7\u7a0b\u4e2d\uff0c\u6ca1\u6709\u6b63\u786e\u56de\u5e94\u4ece\u7684\u540c\u6b65\u8bf7\u6c42](https://github.com/OpenAtomFoundation/pika/pull/2437)\\n- [\u5168\u91cf\u590d\u5236\u8fc7\u7a0b\u4e2d\uff0c\u6dfb\u52a0\u6570\u636e\u540c\u6b65\u72b6\u6001\uff0c\u660e\u786e\u6570\u636e\u540c\u6b65\u8fdb\u5ea6](https://github.com/OpenAtomFoundation/pika/pull/2430)\\n- [\u4fee\u590d\u4ece\u5e93\u5728 Apply binlog \u65f6\uff0c\u6ca1\u6709\u5bf9\u64cd\u4f5c\u7684 key \u52a0\u9501\uff0c\u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2409)\\n- [\u4fee\u590d\u8fc1\u79fb\u6570\u636e\u540e\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2485)\\n\\n### 1.10 \u6d4b\u8bd5\u96c6\u589e\u52a0\\n\\nPikiwiDB(Pika) \u7684\u6d4b\u8bd5\u96c6\u7531 gtest \u5355\u6d4b\u3001Redis TCL \u6d4b\u8bd5\u96c6\u548c Go \u6d4b\u8bd5\u96c6\u7ec4\u6210\u3002\u5728 3.5.3 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u589e\u52a0\u4e86 Codis \u96c6\u7fa4 e2e \u6d4b\u8bd5\u3002\\n\\n\u5173\u952e PR \u94fe\u63a5\uff1a\\n\\n- [Pika TCL \u6d4b\u8bd5\u96c6](https://github.com/OpenAtomFoundation/pika/pull/2497)\\n- [Pika Gotest \u6d4b\u8bd5\u96c6](https://github.com/OpenAtomFoundation/pika/pull/2502)\\n\\n### 1.11 \u5de5\u5177\u96c6\u66f4\u65b0\\n\\nPikiwiDB(Pika) \u4e00\u76f4\u91cd\u89c6\u5de5\u5177\u96c6\u7684\u5efa\u8bbe\uff0c\u6240\u6709\u76f8\u5173\u5de5\u5177\u90fd\u53ef\u4ee5\u5728 https://github.com/OpenAtomFoundation/pika/tree/unstable/tools \u4e2d\u627e\u5230\u3002\u5728 3.5.3 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u65b0\u589e\u4e86\u4e00\u4e2a\u5de5\u5177\uff1a\\n\\n- [PikiwiDB(Pika) \u652f\u6301\u5927 key \u5206\u6790\u5de5\u5177](https://github.com/OpenAtomFoundation/pika/pull/2195)\\n\\n### 1.12 \u6587\u6863\u66f4\u65b0\\n\\nPikiwiDB(Pika) \u7684\u6587\u6863\u4e3b\u8981\u662f wiki \u6587\u6863\u3002\u5728 3.5.3 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u66f4\u65b0\u4e86 Pika \u652f\u6301\u7684 Redis \u547d\u4ee4\u6587\u6863\u3002\\n\\n\u6587\u6863\u94fe\u63a5\uff1ahttps://github.com/OpenAtomFoundation/pika/wiki/pika-%E6%94%AF%E6%8C%81%E7%9A%84redis%E6%8E%A5%E5%8F%A3%E5%8F%8A%E5%85%BC%E5%AE%B9%E6%83%85%E5%86%B5\\n\\n## 2 \u53d1\u7248\u8be6\u60c5\\n\\n\u5728\u7b2c\u4e00\u7ae0\u8282\u4e2d\uff0c\u6211\u4eec\u6982\u8ff0\u4e86 3.5.3 \u7248\u672c\u7684\u4e3b\u8981\u529f\u80fd\u5347\u7ea7\u548c\u6539\u8fdb\u3002\u4e0b\u9762\u8be6\u7ec6\u5217\u51fa\u4e86\u672c\u6b21\u53d1\u7248\u7684\u76f8\u5173 PR\u3002\\n\\n### 2.1 \u65b0\u7279\u6027\\n\\n- [Pika \u652f\u6301 ACL](https://github.com/OpenAtomFoundation/pika/pull/2013)\\n- [\u5728\u5168\u91cf\u590d\u5236\u8fc7\u7a0b\u4e2d\uff0cpika \u670d\u52a1\u7684\u4ece\u8282\u70b9\u4e0d\u63a5\u6536\u8bfb\u8bf7\u6c42](https://github.com/OpenAtomFoundation/pika/pull/2197)\\n- [\u5220\u9664 Sharing \u6a21\u5f0f\u6b8b\u7559\u7684 Slot \u4ee3\u7801\uff0c\u56de\u5f52 3.0\uff0c\u4ee5\u540e\u4e00\u4e2a Pika \u4e0b\u6709\u591a\u4e2a DB\uff0c\u6bcf\u4e2a DB \u53ea\u6709\u4e00\u4e2a Blackwidow](https://github.com/OpenAtomFoundation/pika/pull/2251)\\n- [\u5728 Codis dashboard \u534f\u7a0b panic \u65f6\u81ea\u52a8\u6062\u590d\u670d\u52a1](https://github.com/OpenAtomFoundation/pika/pull/2349)\\n- [Pika cache \u65b0\u589e bimap\u6570\u636e\u7c7b\u578b](https://github.com/OpenAtomFoundation/pika/pull/2253)\\n- [Pika \u652f\u6301\u5feb\u6162\u547d\u4ee4\u5206\u79bb](https://github.com/OpenAtomFoundation/pika/pull/2162)\\n- [Pika exporter \u66b4\u9732 cache \u76f8\u5173\u7684\u6570\u636e\u91c7\u96c6\u6307\u6807](https://github.com/OpenAtomFoundation/pika/pull/2318)\\n- [Pika \u6267\u884c\u5b8c\u6210 Bgsave \u540e, \u4fdd\u7559 unix timepoint](https://github.com/OpenAtomFoundation/pika/pull/2167)\\n- [Pika \u652f\u6301\u52a8\u6001\u914d\u7f6e disable_auto_compations \u53c2\u6570](https://github.com/OpenAtomFoundation/pika/pull/2257)\\n- [Pika \u652f\u6301 Redis Stream](https://github.com/OpenAtomFoundation/pika/pull/1955)\\n- [Pika \u652f\u6301\u5927 key \u5206\u6790\u5de5\u5177](https://github.com/OpenAtomFoundation/pika/pull/2195)\\n- [Pika \u652f\u6301\u52a8\u6001\u8c03\u6574 Pika cache \u53c2\u6570](https://github.com/OpenAtomFoundation/pika/pull/2197)\\n- [\u66f4\u65b0 Pika benchmark \u5de5\u5177\u652f\u6301\u66f4\u591a\u7684\u63a5\u53e3\u538b\u6d4b](https://github.com/OpenAtomFoundation/pika/pull/2222)\\n- [Pika Operator \u652f\u6301 Pika \u96c6\u7fa4\u81ea\u52a8\u6269\u5bb9](https://github.com/OpenAtomFoundation/pika/pull/2121)\\n- [\u6dfb\u52a0 CompactRange \u547d\u4ee4\u652f\u6301\u5bf9\u4e00\u5b9a\u8303\u56f4\u5185\u7684 key \u8fdb\u884c compact](https://github.com/OpenAtomFoundation/pika/pull/2163)\\n- [\u63d0\u5347 Compaction \u901f\u5ea6\u51cf\u5c11 Compaction \u8017\u65f6](https://github.com/OpenAtomFoundation/pika/pull/2172)\\n- [\u5347\u7ea7 RocksDB \u7248\u672c\u5230 v8.7.3](https://github.com/OpenAtomFoundation/pika/pull/2157)\\n- [Pika \u5206\u5e03\u5f0f\u96c6\u7fa4 Codis proxy \u65b0\u589e\u53ef\u89c2\u6d4b\u6307\u6807](https://github.com/OpenAtomFoundation/pika/pull/2199)\\n- [Pika \u5206\u5e03\u5f0f\u96c6\u7fa4\u652f\u6301\u81ea\u52a8 failover](https://github.com/OpenAtomFoundation/pika/pull/2386)\\n- [Pika \u652f\u6301 redis rename-command \u529f\u80fd](https://github.com/OpenAtomFoundation/pika/pull/2455)\\n- [\u4f18\u5316 codis slot \u8fc1\u79fb\u901f\u5ea6\uff0c\u652f\u6301\u52a8\u6001\u4fee\u6539\u8fc1\u79fb\u7ebf\u7a0b\u548c\u901f\u5ea6](https://github.com/OpenAtomFoundation/pika/pull/2486)\\n- [Pika \u652f\u6301\u52a8\u6001\u8c03\u6574 max-conn-rbuf-size \u53c2\u6570](https://github.com/OpenAtomFoundation/pika/pull/2434)\\n- [Pika-operator \u652f\u6301 namespace\uff0c\u53ef\u4ee5\u5728\u4e0d\u540c\u7684 namespace \u4e0b\u90e8\u7f72\u4e0d\u540c\u7684\u96c6\u7fa4](https://github.com/OpenAtomFoundation/pika/pull/2480)\\n- [Pika-operator \u652f\u6301\u76d1\u63a7\u6307\u6807\u91c7\u96c6\uff0c\u81ea\u52a8\u62c9\u8d77 pika-expoter](https://github.com/OpenAtomFoundation/pika/pull/2451)\\n- [ACL \u5411\u524d\u517c\u5bb9 userblacklist](https://github.com/OpenAtomFoundation/pika/pull/2459)\\n- [\u4e30\u5bcc\u4e86 Pika TCL \u6d4b\u8bd5\u96c6](https://github.com/OpenAtomFoundation/pika/pull/2497)\\n- [\u4e30\u5bcc\u4e86 Pika Gotest \u6d4b\u8bd5\u96c6](https://github.com/OpenAtomFoundation/pika/pull/2502)\\n\\n### 2.2 Bug \u4fee\u590d\\n\\n- [\u4fee\u590d Pika \u6709\u4ece\u8282\u70b9\u8fdb\u884c\u5168\u91cf\u590d\u5236\u671f\u95f4\u4f1a\u8bef\u5220\u9664 dump \u6587\u4ef6\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2377)\\n- [\u4fee\u590d\u4e3b\u4ece\u590d\u5236\u8fc7\u7a0b\u4e2d, slave \u8282\u70b9\u6536\u5230 master \u5f02\u5e38\u56de\u5305\u540e\u7684\u5904\u7406\u903b\u8f91](https://github.com/OpenAtomFoundation/pika/pull/2319)\\n- [\u5728 Pika \u6267\u884c shutdown \u547d\u4ee4\u65f6\u8c03\u7528 disable compaction, \u63d0\u5347\u8fdb\u7a0b\u9000\u51fa\u901f\u5ea6](https://github.com/OpenAtomFoundation/pika/pull/2345)\\n- [\u4fee\u590d Codis-dashboard Redis Memory \u503c\u4e0d\u51c6\u786e\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2337)\\n- [INFO \u547d\u4ee4\u8017\u65f6\u4f18\u5316\uff0c\u964d\u4f4e\u67e5\u78c1\u76d8\u4f7f\u7528\u91cf\u7684\u9891\u7387](https://github.com/OpenAtomFoundation/pika/pull/2197)\\n- [\u4fee\u590d Rsync \u5220\u9664\u4e34\u65f6\u6587\u4ef6\u8def\u5f84\u4e0d\u5bf9\uff0c\u5220\u9664\u5931\u8d25\uff0c\u5bfc\u81f4rocksdb\u6253\u5f00\u5931\u8d25\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2186)\\n- [\u4fee\u590d Compact, Bgsave, Info keyspace \u547d\u4ee4\u672a\u6307\u5b9adb\u540d\u79f0\uff0c\u5bfc\u81f4\u90e8\u5206\u547d\u4ee4 coredump \u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2194)\\n- [Codis dashboard \u7528 info replication \u66ff\u4ee3 info \u547d\u4ee4\u67e5\u5bfb master ip \u964d\u4f4e\u5bf9 Pika \u7684\u6027\u80fd\u5f71\u54cd](https://github.com/OpenAtomFoundation/pika/pull/2198)\\n- [\u4fee\u590d Pika cache \u4f7f\u7528\u8fb9\u7f18case\uff0c\u89e3\u51b3\u90e8\u5206\u573a\u666f\u4e0b cache \u548c DB \u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2225)\\n- [\u4fee\u590d\u5f53 dump \u6587\u4ef6\u5939\u4e3a\u7a7a\u65f6\uff0c\u4f1a\u542f\u52a8\u62a5\u9519 Segmentation fault \u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2265)\\n- [\u4fee\u590d\u56e0\u4e3a flag \u8ba1\u7b97\u9519\u8bef\uff0c\u5bfc\u81f4\u7684\u90e8\u5206\u547d\u4ee4\u7f13\u5b58\u6ca1\u6709\u751f\u6548\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2217)\\n- [\u4fee\u590d\u4e3b\u4ece\u590d\u5236\u6a21\u5f0f\u4e0b\uff0c\u4e3b\u5b9e\u4f8b flushdb \u540e\uff0c\u4ece\u5b9e\u4f8b\u56e0\u4e3a\u6b7b\u9501\u5bfc\u81f4\u7684\u4e0d\u80fd\u8bbf\u95ee\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2249)\\n- [\u4fee\u590d\u90e8\u5206\u547d\u4ee4\u672a\u5bf9 RocksDB \u7684\u8fd4\u56de\u503c\u8fdb\u884c\u5224\u65ad\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2187)\\n- [\u89c4\u8303\u51fd\u6570\u7684\u8fd4\u56de\u503c\u53ca\u521d\u59cb\u503c](https://github.com/OpenAtomFoundation/pika/pull/2176)\\n- [\u4fee\u590d\u7f51\u7edc\u76d1\u63a7\u6307\u6807\u7edf\u8ba1\u4e0d\u51c6\u786e\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2234)\\n- [\u4fee\u590d\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u90e8\u5206\u53c2\u6570\u5f02\u5e38\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2218)\\n- [\u4fee\u590d Codis dashboard cpu 100% \u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2393)\\n- [\u4fee\u590d Codis fe pika \u4e3b\u4ece\u89d2\u8272\u663e\u793a\u5f02\u5e38\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2387)\\n- [\u4fee\u590d\u8fc1\u79fb\u6570\u636e\u540e\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2485)\\n- [\u4fee\u590d dbsize \u8ba1\u7b97\u9519\u8bef\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2494)\\n- [\u4fee\u590d\u6269\u7f29\u5bb9\u6216\u8005 pod \u8d77\u505c\u540e\uff0cCodis-dashboard \u754c\u9762\u663e\u793a\u4e0d\u51c6\u786e\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2475)\\n- [\u4fee\u590d DB \u5c42\u91cd\u590d\u4e0a\u9501\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2372)\\n- [\u4fee\u590d\u5168\u91cf\u590d\u5236\u5931\u8d25\u540e\uff0c\u672a\u505a\u5904\u7406\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2439)\\n- [\u4fee\u590d\u4e3b\u4ece\u590d\u5236\u8fc7\u7a0b\u4e2d\uff0c\u4e3b\u5b9e\u4f8b\u6267\u884c bgsave \u8fc7\u7a0b\u4e2d\uff0c\u6ca1\u6709\u6b63\u786e\u56de\u5e94\u4ece\u7684\u540c\u6b65\u8bf7\u6c42](https://github.com/OpenAtomFoundation/pika/pull/2437)\\n- [\u5168\u91cf\u590d\u5236\u8fc7\u7a0b\u4e2d\uff0c\u6dfb\u52a0\u6570\u636e\u540c\u6b65\u72b6\u6001\uff0c\u660e\u786e\u6570\u636e\u540c\u6b65\u8fdb\u5ea6](https://github.com/OpenAtomFoundation/pika/pull/2430)\\n- [\u4fee\u590d\u4ece\u5e93\u5728 Apply binlog \u65f6\uff0c\u6ca1\u6709\u5bf9\u64cd\u4f5c\u7684 key \u52a0\u9501\uff0c\u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2409)\\n- [\u4fee\u590d codis slot \u8fc1\u79fb\u8fc7\u7a0b\u4e2d master \u5b9e\u4f8b coredump \u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2415)\\n- [\u4fee\u590d\u5728\u4e3b\u4ece\u590d\u5236\u8fc7\u7a0b\u4e2d\uff0c\u5220\u9664\u6b63\u5728\u4f7f\u7528\u7684 dump \u6587\u4ef6\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2377)\\n- [\u4fee\u590d\u4e3b\u4ece\u590d\u5236\u8fc7\u7a0b\u4e2d\u4ece\u5b9e\u4f8b rsync \u54cd\u5e94\u9519\u8bef\u7684\u95ee\u9898](https://github.com/OpenAtomFoundation/pika/pull/2319)\\n\\n### 2.3 \u53d1\u7248\u6807\u7b7e\\n\\nhttps://github.com/OpenAtomFoundation/pika/releases/tag/v3.5.3\\n\\n## 3 \u793e\u533a\\n\\nPikiwiDB(Pika) \u5f00\u6e90\u793e\u533a\u611f\u8c22\u60a8\u7684\u652f\u6301\uff0c\u5982\u679c\u60a8\u6709\u4efb\u4f55\u7591\u95ee\u6216\u5efa\u8bae\uff0c\u6b22\u8fce\u52a0\u5165\u6211\u4eec\u7684\u793e\u533a\u4ea4\u6d41\u7fa4\uff1a\\n\\n* \u5fae\u4fe1\u52a9\u624b PikiwiDB\u3010\u8bf7\u5728\u5fae\u4fe1\u4e2d\u641c\u7d22 PikiwiDB\u3011\\n* telegram \u7fa4 https://t.me/+gMlTzNacOF1iMTM1"},{"id":"Pika-3.5.2","metadata":{"permalink":"/blog/Pika-3.5.2","source":"@site/blog/2023-12-03-Pika-3.5.2.md","title":"What\'s new in Pika v3.5.2","description":"Pika \u793e\u533a\u8fd1\u671f\u53d1\u5e03\u4e86\u5907\u53d7\u671f\u5f85\u7684 v3.5.2 \u7248\u672c https://github.com/OpenAtomFoundation/pika/releases/tag/v3.5.2-alpha \uff0c\u4e0d\u4ec5\u89e3\u51b3\u4e86\u5386\u53f2\u9057\u7559\u7684 Bug \u95ee\u9898\uff0c\u8fd8\u5f15\u5165\u4e86\u591a\u9879\u65b0\u7279\u6027\u3002\u8fd9\u4e9b\u65b0\u7279\u6027\u4e3b\u8981\u5305\u62ec Pika \u652f\u6301 Redis \u4e8b\u52a1\u3001Pika \u4e0a\u5c42\u589e\u52a0\u7f13\u5b58\u5c42\u5b9e\u73b0\u51b7\u70ed\u6570\u636e\u5206\u79bb\u3001\u63d0\u5347\u8bfb\u6027\u80fd\u3001Codis-Proxy \u652f\u6301\u52a8\u6001\u4fee\u6539\u914d\u7f6e\u53c2\u6570\u7b49\u7b49\uff0c\u65e0\u7591\u5c06\u4f1a\u8ba9\u7528\u6237\u611f\u53d7\u5230\u66f4\u4e3a\u9ad8\u6548\u548c\u7a33\u5b9a\u7684\u4f7f\u7528\u4f53\u9a8c\u3002","date":"2023-12-03T00:00:00.000Z","tags":[],"readingTime":2.575,"hasTruncateMarker":false,"authors":[{"name":"\u4e8e\u96e8","title":"dubbo-go\u5f00\u6e90\u793e\u533a"}],"frontMatter":{"title":"What\'s new in Pika v3.5.2","slug":"Pika-3.5.2","authors":[{"name":"\u4e8e\u96e8","title":"dubbo-go\u5f00\u6e90\u793e\u533a"}],"hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"What\'s new in Pika v3.5.3 ","permalink":"/blog/Pika-3.5.3"},"nextItem":{"title":"What\'s new in Pika v3.5.1","permalink":"/blog/Pika-3.5.1"}},"content":"Pika \u793e\u533a\u8fd1\u671f\u53d1\u5e03\u4e86\u5907\u53d7\u671f\u5f85\u7684 v3.5.2 \u7248\u672c https://github.com/OpenAtomFoundation/pika/releases/tag/v3.5.2-alpha \uff0c\u4e0d\u4ec5\u89e3\u51b3\u4e86\u5386\u53f2\u9057\u7559\u7684 Bug \u95ee\u9898\uff0c\u8fd8\u5f15\u5165\u4e86\u591a\u9879\u65b0\u7279\u6027\u3002\u8fd9\u4e9b\u65b0\u7279\u6027\u4e3b\u8981\u5305\u62ec Pika \u652f\u6301 Redis \u4e8b\u52a1\u3001Pika \u4e0a\u5c42\u589e\u52a0\u7f13\u5b58\u5c42\u5b9e\u73b0\u51b7\u70ed\u6570\u636e\u5206\u79bb\u3001\u63d0\u5347\u8bfb\u6027\u80fd\u3001Codis-Proxy \u652f\u6301\u52a8\u6001\u4fee\u6539\u914d\u7f6e\u53c2\u6570\u7b49\u7b49\uff0c\u65e0\u7591\u5c06\u4f1a\u8ba9\u7528\u6237\u611f\u53d7\u5230\u66f4\u4e3a\u9ad8\u6548\u548c\u7a33\u5b9a\u7684\u4f7f\u7528\u4f53\u9a8c\u3002\\n\\n## \u65b0\u7279\u6027\\n\\n+ Pika \u652f\u6301 Redis \u4e8b\u52a1\uff0c\u4f7f\u5f97 Pika \u7684\u6570\u636e\u591f\u5728\u4e00\u7cfb\u5217\u547d\u4ee4\u7684\u6267\u884c\u4e2d\u4fdd\u6301\u6570\u636e\u7684\u4e00\u81f4\u6027\u548c\u53ef\u9760\u6027\u3002 https://github.com/OpenAtomFoundation/pika/pull/2124\\n+ Pika \u4e0a\u5c42\u589e\u52a0\u7f13\u5b58\u5c42\u5b9e\u73b0\u51b7\u70ed\u6570\u636e\u5206\u79bb\uff0c\u63d0\u5347\u8bfb\u6027\u80fd\u3002 https://github.com/OpenAtomFoundation/pika/pull/2171\\n+ Codis-Proxy \u652f\u6301\u52a8\u6001\u4fee\u6539\u914d\u7f6e\u53c2\u6570\uff0c\u65b9\u4fbf\u6211\u4eec\u505a\u53c2\u6570\u8c03\u6574\u3002 https://github.com/OpenAtomFoundation/pika/pull/2110\\n+ \u8865\u5168 Go Test \u6d4b\u8bd5\u7528\u4f8b\u3002 https://github.com/OpenAtomFoundation/pika/pull/2082\\n+ CI \u589e\u52a0 cache \u63d0\u5347\u7f16\u8bd1\u901f\u5ea6\u3002 https://github.com/OpenAtomFoundation/pika/pull/2093\\n+ \u589e\u52a0 redis-copy \u6d41\u91cf\u590d\u5236\u5de5\u5177\u3002 https://github.com/OpenAtomFoundation/pika/pull/2060\\n\\nbugfix\\n\\n+ \u4fee\u590d pika \u5728\u4f7f\u7528 SETRANGE \u547d\u4ee4\u51fa\u73b0 coredump \u7684\u95ee\u9898\u3002 https://github.com/OpenAtomFoundation/pika/pull/2141\\n+ \u4fee\u590d\u56e0\u5220\u9664 Clearreplicationid \u5199\u8fdb binlog \u5bfc\u81f4\u7684\u5168\u91cf\u590d\u5236\u95ee\u9898\u3002 https://github.com/OpenAtomFoundation/pika/pull/2135\\n+ \u4fee\u6539\u9501\u7c92\u5ea6\uff0c\u63d0\u5347 pika \u5199 binlog \u7684\u6027\u80fd\u3002 https://github.com/OpenAtomFoundation/pika/pull/2129\\n+ \u4fee\u590d\u590d\u6742\u6570\u636e\u7c7b\u578b\u6210\u5458\u53d8\u91cf\u53ef\u80fd\u51fa\u73b0\u6570\u636e\u6ea2\u51fa\u3002 https://github.com/OpenAtomFoundation/pika/pull/2106\\n+ \u4fee\u590d decr \u547d\u4ee4\u8fd4\u56de\u503c\u9519\u8bef\u95ee\u9898\u3002 https://github.com/OpenAtomFoundation/pika/pull/2092\\n+ \u4fee\u590d setrange \u548c setbit \u547d\u4ee4\u6ca1\u6709\u4fdd\u7559\u539f key \u7684\u8fc7\u671f\u65f6\u95f4\u7684\u95ee\u9898\u3002 https://github.com/OpenAtomFoundation/pika/pull/2095\\n\\n\u4e0b\u671f\u7248\u672c\u89c4\u5212\\n\\n\u9884\u8ba1\u518d\u8fc7\u4e24\u4e2a\u6708\u5de6\u53f3\uff0c\u6211\u4eec\u4f1a\u5728\u519c\u5386\u65b0\u5e74\u524d\u53d1\u5e03  3.5.3  \u7248\u672c\uff0c\u76f8\u5173\u5173\u952e\u7279\u6027\u6709\uff1a\\n\\n+ Pika \u901a\u8fc7\u5feb\u6162\u547d\u4ee4\u5206\u79bb\u63d0\u5347\u8bfb\u5199\u6027\u80fd\u3002 https://github.com/OpenAtomFoundation/pika/pull/2162\\n+ \u652f\u6301 Redis ACL\uff0c\u5728 Pika \u4e2d\u5f15\u5165\u7528\u6237\u6982\u5ff5\uff0c\u8fdb\u884c\u6743\u9650\u63a7\u5236\u3002 https://github.com/OpenAtomFoundation/pika/pull/2013\\n+ \u652f\u6301 Redis Stream\uff0c\u5b9e\u73b0\u6d88\u606f\u961f\u5217\u3002 https://github.com/OpenAtomFoundation/pika/pull/1955\\n+ \u6dfb\u52a0 Pika \u7279\u6709\u547d\u4ee4 compactrange\uff0c\u5bf9\u6307\u5b9a\u8303\u56f4\u5185\u7684 key \u8fdb\u884c compact   \u4ee5\u89e3\u51b3\u5927 key \u5220\u9664\u65f6\u8bfb\u653e\u5927\u7684\u95ee\u9898\u3002 https://github.com/OpenAtomFoundation/pika/pull/2163\\n+ \u652f\u6301 lastsave \u6307\u4ee4\u3002 https://github.com/OpenAtomFoundation/pika/pull/2167\\n\\n\u611f\u8c22\u5927\u5bb6\u5bf9 Pika \u5f00\u6e90\u516c\u4f17\u53f7\u7684\u5173\u6ce8 \uff0cPika 3.5 \u7248\u672c\u91cd\u5927\u7279\u6027\u53ca\u4f7f\u7528\u89c4\u8303\u6211\u4eec\u4f1a\u5728\u7a0d\u540e\u7684\u6587\u7ae0\u4e2d\u8fdb\u884c\u4ecb\u7ecd\uff0c\u6211\u4eec\u4e0b\u671f\u518d\u89c1\uff5e\\n\\n![2023-09-28-Pika-3.5.2-connect](2023-12-03-Pika-3.5.2-connect.png)"},{"id":"Pika-3.5.1","metadata":{"permalink":"/blog/Pika-3.5.1","source":"@site/blog/2023-09-28-Pika-3.5.1.md","title":"What\'s new in Pika v3.5.1","description":"Pika \u793e\u533a\u5f88\u9ad8\u5174\u5ba3\u5e03\uff0c\u6211\u4eec\u4eca\u5929\u53d1\u5e03\u5df2\u7ecf\u8fc7\u6211\u4eec\u751f\u4ea7\u73af\u5883\u9a8c\u8bc1 v3.5.1 \u7248\u672c https://github.com/OpenAtomFoundation/pika/releases/tag/v3.5.1 \u3002","date":"2023-09-28T00:00:00.000Z","tags":[],"readingTime":4.385,"hasTruncateMarker":false,"authors":[{"name":"\u4e8e\u96e8","title":"dubbo-go\u5f00\u6e90\u793e\u533a"}],"frontMatter":{"title":"What\'s new in Pika v3.5.1","slug":"Pika-3.5.1","authors":[{"name":"\u4e8e\u96e8","title":"dubbo-go\u5f00\u6e90\u793e\u533a"}],"hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"What\'s new in Pika v3.5.2","permalink":"/blog/Pika-3.5.2"},"nextItem":{"title":"What\'s new in Pika v3.5.0","permalink":"/blog/Pika-3.5.0"}},"content":"Pika \u793e\u533a\u5f88\u9ad8\u5174\u5ba3\u5e03\uff0c\u6211\u4eec\u4eca\u5929\u53d1\u5e03\u5df2\u7ecf\u8fc7\u6211\u4eec\u751f\u4ea7\u73af\u5883\u9a8c\u8bc1 v3.5.1 \u7248\u672c https://github.com/OpenAtomFoundation/pika/releases/tag/v3.5.1 \u3002\\n\\n\u8be5\u7248\u672c\u4e0d\u4ec5\u505a\u4e86\u5f88\u591a\u4f18\u5316\u5de5\u4f5c\uff0c\u8fd8\u5f15\u5165\u4e86\u591a\u9879\u65b0\u529f\u80fd\u3002\u8fd9\u4e9b\u65b0\u529f\u80fd\u5305\u62ec \u52a8\u6001\u5173\u95ed WAL\u3001ReplicationID \u68c0\u6d4b\u662f\u5426\u589e\u91cf\u590d\u5236\u3001\u5728 K8s \u73af\u5883\u4e0a Pika \u670d\u52a1\u7684\u81ea\u52a8\u6ce8\u518c\u4ece\u800c\u5b9e\u73b0\u96c6\u7fa4\u7684\u81ea\u7ec4\u7ec7\u3001\u4ee5\u53ca exporter \u68c0\u6d4b\u96c6\u7fa4\u6307\u6807\u7b49\u7b49\uff0c\u65e0\u7591\u5c06\u4f1a\u8ba9\u7528\u6237\u4eab\u53d7\u5230\u66f4\u4e3a\u7a33\u5b9a\u548c\u9ad8\u6548\u7684 NoSQL \u4f7f\u7528\u4f53\u9a8c\u3002\\n\\n## \u65b0\u7279\u6027\\n\\n+ 1 Slow log \u589e\u52a0\u961f\u5217\u7b49\u5f85\u65f6\u95f4\u7edf\u8ba1\uff0c\u5728\u961f\u5217\u963b\u585e\u7684\u65f6\u5019\u65b9\u4fbf\u6211\u4eec\u8fdb\u884c\u95ee\u9898\u5b9a\u4f4d\u3002PR 1997\uff0c \u4f5c\u8005 wangshao1\u3002\\n+ 2 \u4e3b\u4ece\u590d\u5236\u4f7f\u7528 ReplicationID \u5224\u65ad\u662f\u5426\u8fdb\u884c\u589e\u91cf\u540c\u6b65\uff0c\u89e3\u51b3\u539f\u4e3b\u4ece\u540c\u6b65\u65b9\u5f0f\u5207\u4e3b\u540e\u6574\u4e2a\u6570\u636e\u96c6\u4f1a\u8fdb\u884c\u5168\u91cf\u590d\u5236\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u63d0\u5347 Pika \u6027\u80fd\u3002PR 1951\uff0c \u4f5c\u8005 Mixficsol\u3002\\n+ 3 WAL \u4ee5 \'disablewal\' \u547d\u4ee4\u65b9\u5f0f\u652f\u6301\u52a8\u6001\u5173\u95ed\uff0c\u5728\u5199\u6027\u80fd\u9047\u5230\u74f6\u9888\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u5173\u95ed WAL  \u7f13\u89e3\u5199\u6027\u80fd\u4e0b\u964d\u7684\u95ee\u9898\uff0c\u5173\u95ed WAL \u6709\u673a\u5668\u5b95\u673a\u540e\u4e22\u5931\u6570\u636e\u7684\u98ce\u9669\uff0c\u7528\u6237\u9700\u8981\u6839\u636e\u81ea\u5df1\u7684\u4f7f\u7528\u4e60\u60ef\u6743\u8861\u3002PR 2015\uff0c\u4f5c\u8005 Mixficsol\u3002\\n+ 4 flush \u7ebf\u7a0b\u6570\u548c compaction \u7ebf\u7a0b\u6570\u5408\u4e8c\u4e3a\u4e00\uff0c\u5728 Compaction \u6027\u80fd\u74f6\u9888\u65f6\uff0c\u53ef\u4ee5\u52a8\u6001\u8c03\u6574\u7ebf\u7a0b\u6570\uff0c\u7f13\u89e3 Comapction \u635f\u8017 Pika \u6027\u80fd\u7684\u95ee\u9898\u3002PR 2014\uff0c \u4f5c\u8005 Tianpingan\u3002\\n+ 5 \u5347\u7ea7\u4e86 RocksDB \u7248\u672c\u5230 v8.3.3\u3002PR 2000\uff0c \u4f5c\u8005 dingxiaoshuai123\u3002\\n+ 6 \u65b0\u589e\u5468\u671f\u6027\u6253\u5370\u5de5\u4f5c\u961f\u5217\u7684\u957f\u5ea6\u529f\u80fd\uff0c\u5728\u961f\u5217\u963b\u585e\u7684\u65f6\u5019\u53ef\u4ee5\u5feb\u901f\u5b9a\u4f4d\u95ee\u9898\u3002PR 1978\uff0c \u4f5c\u8005 Tianpingan\u3002\\n+ 7 \u65b0\u589e\u5229\u7528\u4e00\u4e2a pika_exporter \u76d1\u6d4b\u6574\u4e2a\u96c6\u7fa4\u7684\u6307\u6807\uff0c\u5b9e\u73b0\u4e00\u4e2a Pika Exporter \u5b9e\u4f8b\u76d1\u63a7\u6574\u4e2a\u96c6\u7fa4\uff0c\u89e3\u51b3\u4e86 3.5.0 \u7248\u672c\u4e00\u4e2a Pika Exporter  \u76d1\u6d4b\u4e00\u4e2a Pika \u5b9e\u4f8b\u6d88\u8017\u8d44\u6e90\u7684\u95ee\u9898\u3002PR 1953\uff0c \u4f5c\u8005 chenbt-hz\u3002\\n+ 8 \u5b9e\u73b0\u5728  K8s  \u73af\u5883\u4e0a  Pika  \u670d\u52a1\u7684\u81ea\u52a8\u6ce8\u518c\uff0c\u5728\u542f\u52a8\u65f6\u81ea\u52a8\u6ce8\u518c\uff0c\u4ece\u800c\u5b9e\u73b0\u96c6\u7fa4\u7684\u81ea\u7ec4\u7ec7 \uff0c\u5b9e\u73b0\u4e86\u901a\u8fc7\u547d\u4ee4\u62c9\u8d77\u6574\u4e2a Pika Cluster \u96c6\u7fa4\u3002PR 1931\uff0c \u4f5c\u8005 machinly\u3002\\n\\n## 2 bug \u4fee\u590d\\n\\n+ 1 \u8c03\u6574\u4e86 Rate_limit \u53c2\u6570\uff0c\u4fee\u590d\u4e86\u538b\u6d4b\u65f6\u51fa\u73b0 RPS \u4e3a 0 \u7684\u60c5\u51b5 \u3002PR 2009\uff0c \u4f5c\u8005 Mixficsol\u3002\\n+ 2 \u4fee\u590d\u4e86 INFODATA \u547d\u4ee4\u4e2d\u5bf9\u4e8e\u904d\u5386\u6570\u636e\u6587\u4ef6\u65f6\u51fa\u73b0\u7a7a\u8def\u5f84\u7684\u903b\u8f91\u5224\u65ad\u3002PR 1996\uff0c \u4f5c\u8005 Mixficsol\u3002\\n+ 3 \u4fee\u590d\u4e86 Codis \u5728\u7ebf\u4e0a\u51fa\u73b0\u5927\u6bdb\u523a\u7684\u95ee\u9898\u3002PR 2016\uff0c \u4f5c\u8005 chejinge\u3002\\n+ 4 \u4fee\u590d\u4e86 macOS \u73af\u5883\u4e0b\u7f16\u8bd1\u4f7f\u7528 tools \u5bfc\u81f4\u7f16\u8bd1\u4e0d\u8fc7\u7684\u95ee\u9898 \u3002PR 2011\uff0c \u4f5c\u8005 A2ureStone\u3002\\n+ 5 \u51cf\u5c11\u4e86 exporter \u975e\u5fc5\u8981\u65e5\u5fd7\u7684\u6253\u5370\uff0c\u964d\u4f4e \u4e86\u8d44\u6e90\u5229\u7528\u7387\u3002PR 1945\uff0c \u4f5c\u8005 Mixficsol\u3002\\n\\n## 3 \u4f7f\u7528\u5efa\u8bae\\n\\n\u672c\u6b21\u65b0\u589e\u4e86\u51e0\u4e2a\u914d\u7f6e\u53c2\u6570\uff0c\u5927\u5bb6\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u6839\u636e\u4f7f\u7528\u60c5\u51b5\u6309\u9700\u8c03\u6574\uff1a\\n\\n+ 1 max-rsync-parallel-num\uff1a\u4e3b\u4ece\u5168\u91cf\u590d\u5236\u7ebf\u7a0b\u6570\uff0c\u9700\u8981\u6839\u636e\u81ea\u5df1\u673a\u5668 CPU \u6838\u6570\u548c\u90e8\u7f72\u5b9e\u4f8b\u4e2a\u6570\u8fdb\u884c\u8c03\u6574\uff0c\u5efa\u8bae\u6700\u5c0f\u8bbe\u7f6e\u4e3a 2\u3002\\n+ 2 rate-limiter-bandwidth: \u9650\u5236 RocksDB \u6570\u636e\u5e93\u8bfb\u5199\u901f\u5ea6\uff0c\u9650\u5236\u6570\u636e\u5e93\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\u53ef\u4ee5\u8bfb\u5199\u7684\u6570\u636e\u91cf\uff0c\u9ed8\u8ba4 2000MiB/s\uff0c\u9700\u8981\u6839\u636e\u81ea\u5df1\u7684\u673a\u5668\u6027\u80fd\u548c\u90e8\u7f72\u5b9e\u4f8b\u505a\u8c03\u6574\u3002\\n+ max-background-jobs: compaction \u548c flushdb \u7ebf\u7a0b\u6570\uff0c\u8981\u6839\u636e\u81ea\u5df1\u673a\u5668 CPU \u6838\u6570\u548c\u90e8\u7f72\u5b9e\u4f8b\u4e2a\u6570\u8fdb\u884c\u8c03\u6574\uff0c\u5efa\u8bae\u6700\u5c0f\u8bbe\u7f6e\u4e3a 4\u3002\\n+ 3 throttle-bytes-per-second: \u4e3b\u4ece\u590d\u5236\u4f20\u8f93\u9650\u901f\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e3a 200MiB/s\uff0c\u8be5\u53c2\u6570\u53ef\u4ee5\u6839\u636e\u673a\u5668\u7f51\u5361\u7684\u914d\u7f6e\u53ca\u90e8\u7f72 pika \u5b9e\u4f8b\u7684\u4e2a\u6570\u8fdb\u884c\u8c03\u6574\u3002\\n\\n![2023-09-28-Pika-3.5.1-connect.png](2023-09-28-Pika-3.5.1-connect.png)"},{"id":"Pika-3.5.0","metadata":{"permalink":"/blog/Pika-3.5.0","source":"@site/blog/2023-08-25-Pika-3.5.0.md","title":"What\'s new in Pika v3.5.0","description":"\u65f6\u9694\u4e24\u5e74\uff0cPika \u793e\u533a\u6b63\u5f0f\u53d1\u5e03\u7ecf\u7531\u793e\u533a 50 \u591a\u4eba\u53c2\u4e0e\u5f00\u53d1\u5e76\u5728 360 \u751f\u4ea7\u73af\u5883\u9a8c\u8bc1\u53ef\u7528\u7684 v3.5.0 \u7248\u672c\uff0c\u65b0\u7248\u672c\u5728\u63d0\u5347\u6027\u80fd\u7684\u540c\u65f6\uff0c\u4e5f\u652f\u6301\u4e86 Codis \u96c6\u7fa4\u90e8\u7f72\uff0cBlobDB KV \u5206\u79bb\uff0c\u589e\u52a0 Exporter \u7b49\u65b0\u7279\u6027\u3002","date":"2023-08-25T00:00:00.000Z","tags":[],"readingTime":9.825,"hasTruncateMarker":false,"authors":[{"name":"\u4e8e\u96e8","title":"dubbogo\u793a\u571f\u533a"}],"frontMatter":{"title":"What\'s new in Pika v3.5.0","slug":"Pika-3.5.0","authors":[{"name":"\u4e8e\u96e8","title":"dubbogo\u793a\u571f\u533a"}],"hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"What\'s new in Pika v3.5.1","permalink":"/blog/Pika-3.5.1"},"nextItem":{"title":"Pika Blackwidow \u5f15\u64ce\u6570\u636e\u5b58\u50a8\u683c\u5f0f","permalink":"/blog/pika-blackwidow"}},"content":"\u65f6\u9694\u4e24\u5e74\uff0cPika \u793e\u533a\u6b63\u5f0f\u53d1\u5e03\u7ecf\u7531\u793e\u533a 50 \u591a\u4eba\u53c2\u4e0e\u5f00\u53d1\u5e76\u5728 360 \u751f\u4ea7\u73af\u5883\u9a8c\u8bc1\u53ef\u7528\u7684 v3.5.0 \u7248\u672c\uff0c\u65b0\u7248\u672c\u5728\u63d0\u5347\u6027\u80fd\u7684\u540c\u65f6\uff0c\u4e5f\u652f\u6301\u4e86 Codis \u96c6\u7fa4\u90e8\u7f72\uff0cBlobDB KV \u5206\u79bb\uff0c\u589e\u52a0 Exporter \u7b49\u65b0\u7279\u6027\u3002\\n\\n\u6211\u4eec\u5c06\u8be6\u7ec6\u4ecb\u7ecd\u8be5\u7248\u672c\u5f15\u5165\u7684\u91cd\u8981\u65b0\u7279\u6027\u3002\\n\\n##  1 \u53bb\u9664 Rsync\\n\\n\u5728 v3.5.0 \u7248\u672c\u4e4b\u524d\uff0cPika \u4f7f\u7528 Rsync \u5de5\u5177\u8fdb\u884c\u5f15\u64ce\u4e2d\u5b58\u91cf\u6570\u636e\u7684\u540c\u6b65\uff0cPika \u8fdb\u7a0b\u542f\u52a8\u65f6\u521b\u5efa Rsync \u5b50\u8fdb\u7a0b\u3002\u8fd9\u79cd\u540c\u6b65\u65b9\u5f0f\u5728\u5b9e\u9645\u4f7f\u7528\u4e2d\u51fa\u73b0\u4e86\u4e00\u4e9b\u95ee\u9898\uff0c\u5305\u62ecPika \u8fdb\u7a0b crash \u540e\u91cd\u65b0\u62c9\u8d77\u65e0\u6cd5\u6b63\u5e38\u540c\u6b65\u4ee5\u53ca\u540c\u6b65\u8fc7\u7a0b\u4e2d Rsync \u8fdb\u7a0b\u65e0\u6545\u9000\u51fa\u7b49\u3002\u5728\u4eca\u5e74\u53d1\u5e03\u7684 v3.5.0 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u5728\u5168\u91cf\u540c\u6b65\u65b9\u6848\u65b9\u9762\u8fdb\u884c\u4e86\u91cd\u8981\u7684\u6539\u8fdb\uff0c\u6452\u5f03\u4e86\u4ee5\u5f80\u4f7f\u7528\u7684 Rsync\uff0c\u5b9e\u73b0\u4e86\u5168\u65b0\u7684\u6570\u636e\u540c\u6b65\u65b9\u6848\uff0c\u652f\u6301\u4e86\u65ad\u70b9\u7eed\u4f20\uff0c\u52a8\u6001\u8c03\u8282\u4f20\u8f93\u9650\u901f\u7b49\u7279\u6027\uff0c\u4ee5\u786e\u4fdd\u540c\u6b65\u8fc7\u7a0b\u66f4\u52a0\u7a33\u5b9a\u3001\u53ef\u63a7\u3002\u8fd9\u4e9b\u6539\u8fdb\u4e0d\u4ec5\u589e\u5f3a\u4e86\u540c\u6b65\u7684\u53ef\u9760\u6027\uff0c\u8fd8\u4e3a\u7528\u6237\u63d0\u4f9b\u4e86\u66f4\u597d\u7684\u4f7f\u7528\u4f53\u9a8c\u3002\\n\\n+ \u53bb\u9664 Rsync \u8fdb\u7a0b\uff0c\u4f7f\u7528\u81ea\u7814\u5168\u91cf\u540c\u6b65\u65b9\u5f0f\\n  https://github.com/OpenAtomFoundation/pika/pull/1805\\n\\n+ \u5b9e\u73b0\u65ad\u70b9\u7eed\u4f20\uff0c\u4f20\u8f93\u9650\u901f\u529f\u80fd\\n  https://github.com/OpenAtomFoundation/pika/pull/1926\\n\\n+ Pika \u4e3b\u4ece\u540c\u6b65\u65f6\uff0c\u8fdb\u884c master run_id \u7684\u68c0\u9a8c\\n  https://github.com/OpenAtomFoundation/pika/pull/1805\\n\\n## 2 \u517c\u5bb9\u66f4\u591a Redis \u547d\u4ee4\\n\\n\u5728 v3.5.0 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u8fc8\u51fa\u4e86\u66f4\u5927\u7684\u4e00\u6b65\uff0c\u63d0\u5347\u4e86\u5bf9 Redis \u547d\u4ee4\u7684\u517c\u5bb9\u6027\uff0c\u5bf9 Redis \u547d\u4ee4\u63d0\u4f9b\u4e86\u66f4\u5e7f\u6cdb\u7684\u652f\u6301\u3002\u8fd9\u4e2a\u7248\u672c\u7684\u6539\u8fdb\u4f7f\u5f97 Pika \u5728\u4e0e Redis \u751f\u6001\u7cfb\u7edf\u7684\u96c6\u6210\u4e2d\u8868\u73b0\u66f4\u52a0\u51fa\u8272\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u4e86\u66f4\u4e30\u5bcc\u7684\u529f\u80fd\u548c\u66f4\u5e7f\u9614\u7684\u53ef\u80fd\u6027\u3002\u6211\u4eec\u5bf9\u547d\u4ee4\u652f\u6301\u7684\u6269\u5c55\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u4e86\u66f4\u591a\u7684\u7075\u6d3b\u6027\uff0c\u4ee5\u6ee1\u8db3\u4e0d\u540c\u573a\u666f\u4e0b\u7684\u9700\u6c42\u3002\\n\\n+ \u652f\u6301 UNLINK \u547d\u4ee4\\n  https://github.com/OpenAtomFoundation/pika/pull/1273\\n+ \u652f\u6301 INFO COMMANDSTATS \u547d\u4ee4\\n  https://github.com/OpenAtomFoundation/pika/pull/1660\\n+ \u652f\u6301 HELLO\u3001SETNAME \u547d\u4ee4\\n  https://github.com/OpenAtomFoundation/pika/pull/1245\\n+ \u652f\u6301 BLPOP\u3001BRPOP \u547d\u4ee4\\n  https://github.com/OpenAtomFoundation/pika/pull/1548\\n+ \u65b0\u589e Pika \u539f\u521b DISKRECOVERY \u547d\u4ee4\\n  https://github.com/OpenAtomFoundation/pika/pull/1843\\n\\n## 3 RocksDB \u7248\u672c\u5347\u7ea7\u548c\u5206\u7ea7\u538b\u7f29\\n\\n\u5728 v3.5.0 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u8fdb\u884c\u4e86\u4e00\u9879\u91cd\u8981\u7684\u5347\u7ea7\uff0c\u5c06 RocksDB \u5f15\u64ce\u5347\u7ea7\u81f3 v8.1.1 \u7248\u672c\uff0c\u5e76\u5b9e\u73b0\u4e86\u5206\u7ea7\u538b\u7f29\u529f\u80fd\u7684\u6574\u5408\u3002\u8fd9\u4e00\u5347\u7ea7\u4e0d\u4ec5\u662f\u6280\u672f\u7684\u98de\u8dc3\uff0c\u4e5f\u662f\u6211\u4eec\u5bf9\u7cfb\u7edf\u6027\u80fd\u548c\u4f18\u5316\u7684\u6301\u7eed\u5173\u6ce8\u7684\u4f53\u73b0\u3002\u901a\u8fc7\u8fd9\u9879\u5347\u7ea7\uff0c\u6211\u4eec\u4e3a Pika \u589e\u52a0\u4e86\u66f4\u9ad8\u7ea7\u522b\u7684\u6570\u636e\u7ba1\u7406\u80fd\u529b\uff0c\u540c\u65f6\u4e5f\u8ba9\u7cfb\u7edf\u66f4\u597d\u5730\u9002\u5e94\u4e0d\u540c\u7684\u538b\u7f29\u9700\u6c42\uff0c\u4e3a\u7528\u6237\u7684\u6570\u636e\u5b58\u50a8\u548c\u68c0\u7d22\u63d0\u4f9b\u4e86\u66f4\u5927\u7684\u7075\u6d3b\u6027\u548c\u6548\u7387\u3002\\n\\n+ \u5347\u7ea7 RocksDB \u7248\u672c\u5230 v8.1.1\\n  https://github.com/OpenAtomFoundation/pika/pull/1396\\n+ \u5b9e\u73b0 RocksDB \u5206\u7ea7\u538b\u7f29\\n  https://github.com/OpenAtomFoundation/pika/pull/1365\\n+ \u65b0\u589e RocksDB \u7f13\u5b58\u914d\u7f6e\u9879 num-shard-bits \u80fd\u591f\u4ece\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bfb\u53d6\\n  https://github.com/OpenAtomFoundation/pika/pull/1189\\n\\n## 4 \u652f\u6301 BlobDB\\n\\n\u5728 v3.5.0 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u5f15\u4eba\u77a9\u76ee\u7684\u521b\u65b0--\u5bf9 BlobDB \u548c KV \u5b58\u50a8\u5c42\u8fdb\u884c\u4e86\u5206\u79bb\uff0c\u4e3a\u6211\u4eec\u7684\u7cfb\u7edf\u6ce8\u5165\u4e86\u65b0\u7684\u6d3b\u529b\u3002\u8fd9\u4e2a\u7248\u672c\u7684\u5347\u7ea7\u4f7f\u5f97 Pika \u5728\u6570\u636e\u5b58\u50a8\u65b9\u9762\u66f4\u52a0\u7075\u6d3b\u548c\u9ad8\u6548\u3002\u6211\u4eec\u901a\u8fc7\u652f\u6301 BlobDB KV \u5206\u79bb\uff0c\u63d0\u4f9b\u4e86\u66f4\u4f18\u5316\u7684\u6570\u636e\u5b58\u50a8\u7ed3\u6784\uff0c\u4e3a\u7528\u6237\u7684\u6570\u636e\u7ba1\u7406\u548c\u67e5\u8be2\u64cd\u4f5c\u5e26\u6765\u4e86\u66f4\u6df1\u5c42\u6b21\u7684\u4f18\u52bf\u3002\u8fd9\u4e00\u91cd\u8981\u6539\u8fdb\u5c06\u5728\u66f4\u591a\u5e94\u7528\u573a\u666f\u4e0b\u5c55\u73b0\u51fa\u5176\u5f3a\u5927\u7684\u6f5c\u529b\u3002\\n\\n+ \u652f\u6301 BlobDB KV \u5206\u79bb\\n  https://github.com/OpenAtomFoundation/pika/pull/1456\\n\\n## 5 \u57fa\u4e8e Codis \u7684\u96c6\u7fa4\u6a21\u5f0f\\n\\n\u5728 v3.5.0 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u79ef\u6781\u5f15\u5165\u4e86 Codis \u96c6\u7fa4\u6a21\u5f0f\uff0c\u6b64\u5916\uff0c\u6211\u4eec\u4e0d\u4ec5\u4ec5\u5c06 Codis \u96c6\u7fa4\u6a21\u5f0f\u878d\u5165\u4e86\u7cfb\u7edf\u4e2d\uff0c\u8fd8\u4e3a\u5176\u63d0\u4f9b\u4e86\u8fc1\u79fb slot \u7684\u547d\u4ee4\u652f\u6301\uff0c\u4ece\u800c\u5b9e\u73b0\u4e86\u66f4\u52a0\u667a\u80fd\u5316\u7684\u96c6\u7fa4\u7ba1\u7406\u3002\u8fd9\u4e00\u91cd\u5927\u53d8\u9769\u4e0d\u4ec5\u6269\u5c55\u4e86 Pika \u5728\u5927\u89c4\u6a21\u6570\u636e\u5b58\u50a8\u573a\u666f\u4e2d\u7684\u5e94\u7528\u8303\u56f4\uff0c\u8fd8\u8fdb\u4e00\u6b65\u63d0\u5347\u4e86\u7cfb\u7edf\u7684\u53ef\u6269\u5c55\u6027\u548c\u9ad8\u53ef\u7528\u6027\u3002\u901a\u8fc7\u5f15\u5165 Codis \u96c6\u7fa4\u6a21\u5f0f\uff0c\u6211\u4eec\u5bf9\u7528\u6237\u7684\u6570\u636e\u5904\u7406\u548c\u7ba1\u7406\u63d0\u4f9b\u4e86\u66f4\u4f18\u5316\u7684\u89e3\u51b3\u65b9\u6848\u3002\\n\\n+ \u5f15\u5165 Codis \u5230 Pika\\n\\n    https://github.com/OpenAtomFoundation/pika/pull/1279\\n\\n+ \u5f15\u5165 Codis \u7684 CI\\n\\n    https://github.com/OpenAtomFoundation/pika/pull/1311\\n\\n+ \u652f\u6301 Codis \u8fc1\u79fb slot \u547d\u4ee4\\n\\n    https://github.com/OpenAtomFoundation/pika/pull/1632\\n\\n+ \u65b0\u589e\u662f\u5426\u5728 reload \u7684 slotmigrate \u72b6\u6001\\n\\n    https://github.com/OpenAtomFoundation/pika/pull/1700\\n\\n## 6 \u53ef\u89c2\u6d4b\u6027\\n\\n\u5728 v3.5.0 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u4e00\u4e2a\u521b\u65b0\u6027\u7684\u5de5\u5177--pika_exporter\uff0c\u4ee5\u63d0\u5347\u5bf9 Pika \u6570\u636e\u5e93\u7684\u53ef\u89c2\u6d4b\u6027\u3002\u8fd9\u4e00\u5de5\u5177\u7684\u52a0\u5165\u4e0d\u4ec5\u662f\u5bf9\u6211\u4eec\u5bf9\u7cfb\u7edf\u76d1\u6d4b\u80fd\u529b\u7684\u6301\u7eed\u589e\u5f3a\u7684\u53cd\u6620\u3002\u800c\u5728\u7248\u672c\u7684\u540e\u7eed\u66f4\u65b0\u4e2d\uff0c\u6211\u4eec\u8fdb\u4e00\u6b65\u5145\u5b9e\u4e86\u6307\u6807\uff0c\u4e0d\u65ad\u4e30\u5bcc\u4e86 Pika \u7684\u53ef\u89c2\u6d4b\u6027\u3002\u4e3a\u7528\u6237\u63d0\u4f9b\u4e86\u66f4\u4e3a\u5168\u9762\u548c\u7cbe\u51c6\u7684\u6570\u636e\u6d1e\u5bdf\u529b\u3002\\n\\n+ \u65b0\u589e Pika \u53ef\u89c2\u6d4b\u7cfb\u7edf pika_exporter\\n\\n    https://github.com/OpenAtomFoundation/pika/pull/1388\\n\\n+ \u65b0\u589e\u7f51\u7edc I/O \u6d41\u91cf\u76d1\u63a7\u6307\u6807\\n\\n    https://github.com/OpenAtomFoundation/pika/pull/1733\\n\\n+ \u65b0\u589e\u547d\u4ee4\u7edf\u8ba1\u8017\u65f6\u6307\u6807\\n\\n    https://github.com/OpenAtomFoundation/pika/pull/1751\\n\\n+ \u65b0\u589e estimate_pending_compaction_bytes \u5ea6\u91cf\u6765\u5206\u6790\u788e\u7247\u7387\u6307\u6807\\n\\n    https://github.com/OpenAtomFoundation/pika/pull/1736\\n\\n+ \u65b0\u589e RocksDB \u6307\u6807\\n\\n    https://github.com/OpenAtomFoundation/pika/pull/1560\\n\\n## 7 \u5bb9\u5668\u5316\u90e8\u7f72\\n\\n\u5728 v3.5.0 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u4e00\u4e2a\u5177\u6709\u521b\u65b0\u610f\u4e49\u7684\u91cc\u7a0b\u7891--pika-operator mvp \u7248\u672c\uff0c\u8fd9\u4e00\u7248\u672c\u5728\u6280\u672f\u4e0a\u5b9e\u73b0\u4e86\u4e00\u4e2a\u91cd\u8981\u76ee\u6807\uff1a\u5c06 Pika \u5355\u5b9e\u4f8b\u670d\u52a1\u8fc1\u79fb\u5230 Kubernetes\uff08K8s\uff09\u5e73\u53f0\u4e0a\u7684\u5feb\u901f\u90e8\u7f72\u3002\u8fd9\u4e0d\u4ec5\u662f\u5bf9\u6211\u4eec\u6301\u7eed\u5173\u6ce8\u884c\u4e1a\u53d1\u5c55\u7684\u4f53\u73b0\uff0c\u4e5f\u662f\u6211\u4eec\u4e0d\u65ad\u63d0\u5347\u7528\u6237\u4f53\u9a8c\u7684\u8ffd\u6c42\u3002\u901a\u8fc7 pika-operator\uff0c\u6211\u4eec\u4e3a\u7528\u6237\u63d0\u4f9b\u4e86\u66f4\u4fbf\u6377\u7684\u90e8\u7f72\u65b9\u6848\uff0c\u5c06 Pika \u7684\u9ad8\u6027\u80fd\u6570\u636e\u5e93\u5f15\u64ce\u4e0e Kubernetes \u7684\u7075\u6d3b\u6027\u76f8\u878d\u5408\uff0c\u4ece\u800c\u4e3a\u7528\u6237\u7684\u5e94\u7528\u73af\u5883\u5e26\u6765\u66f4\u9ad8\u6548\u3001\u66f4\u5f39\u6027\u7684\u652f\u6301\u3002\\n\\n+ \u5b9e\u73b0 Pika \u5355\u4f8b\u670d\u52a1\u5728 K8s \u4e0a\u5feb\u901f\u90e8\u7f72\\n    https://github.com/OpenAtomFoundation/pika/pull/1243\\n+ \u5b9e\u73b0\u4e86\u5728 MiniKube \u73af\u5883\u4e2d\u90e8\u7f72 Pika\\n    https://github.com/OpenAtomFoundation/pika/pull/1330\\n+ \u7ed9 pika-operator \u6dfb\u52a0 E2E \u6d4b\u8bd5\\n    https://github.com/OpenAtomFoundation/pika/pull/1347\\n\\n## 8 \u8de8\u5e73\u53f0\u7f16\u8bd1\\n\\n\u5728 v3.5.0 \u7248\u672c\u4e2d\uff0cPika \u5448\u73b0\u51fa\u4e00\u79cd\u5168\u9762\u6027\u7684\u84ec\u52c3\u53d1\u5c55\u6001\u52bf\uff0c\u5f97\u4ee5\u5728\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u5e73\u53f0\u4e0a\u5c55\u73b0\u5176\u4f18\u8d8a\u6027\u3002\u6b64\u7248\u672c\u7684\u7a81\u7834\u6027\u4e4b\u5904\u5728\u4e8e\uff0cPika \u5b9e\u73b0\u4e86\u5bf9 MacOS\u3001CentOS \u548c Ubuntu \u8fd9\u4e9b\u4e3b\u8981\u5e73\u53f0\u7684\u5b8c\u6574\u7f16\u8bd1\u548c\u4f7f\u7528\u652f\u6301\u3002\u8fd9\u4e2a\u4e3e\u63aa\u4e0d\u4ec5\u4ec5\u4f53\u73b0\u4e86\u6211\u4eec\u5bf9\u591a\u6837\u5316\u6280\u672f\u73af\u5883\u7684\u5173\u6ce8\uff0c\u4e5f\u662f\u4e3a\u4e86\u6700\u5927\u7a0b\u5ea6\u5730\u62d3\u5c55\u7528\u6237\u57fa\u7840\uff0c\u4e3a\u5e7f\u6cdb\u7684\u7528\u6237\u7fa4\u4f53\u63d0\u4f9b\u7075\u6d3b\u3001\u9ad8\u6548\u7684\u6570\u636e\u5e93\u89e3\u51b3\u65b9\u6848\u3002\u8fd9\u79cd\u8de8\u5e73\u53f0\u517c\u5bb9\u6027\u7684\u52a0\u5f3a\u5c06 Pika \u63a8\u5411\u66f4\u5e7f\u9614\u7684\u6280\u672f\u751f\u6001\u3002\\n\\n+ \u652f\u6301 MacOS \u5e73\u53f0\\n    https://github.com/OpenAtomFoundation/pika/pull/1372\\n\\n## 9 \u591a\u5e73\u53f0\u96c6\u6210\u6d4b\u8bd5\u53ca\u5355\u5143\u6d4b\u8bd5\\n\\n\u5728 v3.5.0 \u7248\u672c\u4e2d\uff0c\u6211\u4eec\u8fc8\u51fa\u4e86\u4e00\u4e2a\u4ee4\u4eba\u77a9\u76ee\u7684\u6b65\u4f10\uff0c\u4e0d\u4ec5\u5728\u591a\u4e2a\u4e3b\u8981\u64cd\u4f5c\u7cfb\u7edf\u5e73\u53f0\u4e0a\u5b9e\u73b0\u4e86\u652f\u6301\uff0c\u8fd8\u5728\u6d4b\u8bd5\u9886\u57df\u5b9e\u65bd\u4e86\u5168\u9762\u5347\u7ea7\u3002\u6211\u4eec\u4e3a Ubuntu\u3001CentOS \u548c MacOS \u8fd9\u4e09\u5927\u5e73\u53f0\u642d\u5efa\u4e86\u6301\u7eed\u96c6\u6210\uff08CI\uff09\u73af\u5883\uff0c\u4ee5\u786e\u4fdd\u7cfb\u7edf\u7684\u5b8c\u6574\u6027\u548c\u7a33\u5b9a\u6027\u3002\u5728\u6d4b\u8bd5\u65b9\u9762\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u66f4\u4e3a\u5e7f\u6cdb\u7684\u8986\u76d6\uff0c\u5305\u62ec Go \u8bed\u8a00\u7684\u96c6\u6210\u6d4b\u8bd5\u3001TCL \u7684\u5355\u5143\u6d4b\u8bd5\u4ee5\u53ca Python \u7684\u7aef\u5230\u7aef\uff08E2E\uff09\u6d4b\u8bd5\u3002\u901a\u8fc7\u8fd9\u4e9b\u6d4b\u8bd5\u7b56\u7565\u7684\u5347\u7ea7\uff0c\u6211\u4eec\u5728\u786e\u4fdd\u7cfb\u7edf\u6027\u80fd\u548c\u53ef\u9760\u6027\u65b9\u9762\u8fc8\u51fa\u4e86\u66f4\u5927\u7684\u4e00\u6b65\u3002\\n\\n+ \u65b0\u589e CentOS \u73af\u5883\u4e0b\u7684 CI\\n    https://github.com/OpenAtomFoundation/pika/pull/1534\\n+ \u65b0\u589e MacOS \u73af\u5883\u4e0b\u7684 CI\\n    https://github.com/OpenAtomFoundation/pika/pull/1769\\n+ \u65b0\u589e E2E \u6d4b\u8bd5\u6846\u67b6\\n    https://github.com/OpenAtomFoundation/pika/pull/1347\\n+ \u65b0\u589e\u5728 Github CI Workflow \u4e2d\u6dfb\u52a0 CMake \u7f16\u8bd1\u73af\u5883\\n    https://github.com/OpenAtomFoundation/pika/pull/1268\\n+ \u65b0\u589e\u5728 TCL \u811a\u672c\u4e2d populate \u65b9\u6cd5\u6a21\u62df Redis debug populate \u65b9\u6cd5\uff0c\u7528\u4ee5\u586b\u5145\u6d4b\u8bd5\u6570\u636e\\n    https://github.com/OpenAtomFoundation/pika/pull/1693\\n+ \u65b0\u589e\u5728 blackwidow \u4e2d\u6dfb\u52a0 CMake \u6587\u4ef6\uff0c\u6dfb\u52a0\u5bf9 blackwidow \u7684\u5355\u5143\u6d4b\u8bd5\\n    https://github.com/OpenAtomFoundation/pika/pull/1246\\n+ \u79fb\u690d Redis \u6d4b\u8bd5\u811a\u672c\\n    https://github.com/OpenAtomFoundation/pika/pull/1357\\n\\n## 10 Others\\n\\n\u82e5\u60a8\u6709\u4efb\u4f55\u7591\u95ee\uff0c\u8bda\u631a\u6b22\u8fce\u60a8\u626b\u63cf\u5fae\u4fe1\u4e8c\u7ef4\u7801\uff0c\u52a0\u5165\u6211\u4eec\u7684\u4ea4\u6d41\u7fa4\uff0c\u4e0e\u4e00\u4f17\u5fd7\u540c\u9053\u5408\u7684\u6210\u5458\u5c55\u5f00\u6df1\u5165\u7684\u8ba8\u8bba\uff0c\u6211\u4eec\u70ed\u5207\u671f\u5f85\u4e0e\u60a8\u5206\u4eab\u89c1\u89e3\u3001\u4ea4\u6d41\u5fc3\u5f97\uff0c\u4e3a\u5171\u540c\u7684\u6280\u672f\u63a2\u7d22\u548c\u521b\u65b0\u4e4b\u65c5\u6dfb\u7816\u52a0\u74e6\u3002\u5728\u8fd9\u4e2a\u7fa4\u4f53\u4e2d\uff0c\u6211\u4eec\u5c06\u4ee5\u5353\u8d8a\u7684\u667a\u6167\u548c\u4e92\u52a8\u7684\u5408\u4f5c\u7cbe\u795e\uff0c\u6784\u5efa\u51fa\u4e00\u4e2a\u76f8\u4e92\u5b66\u4e60\u3001\u4e0d\u65ad\u8fdb\u6b65\u7684\u6280\u672f\u5171\u540c\u4f53\u3002\\n\\n![2023-08-25-Pika-3.5.0](2023-08-25-Pika-3.5.0-connect.png)"},{"id":"pika-blackwidow","metadata":{"permalink":"/blog/pika-blackwidow","source":"@site/blog/2020-7-16-pika-blackwidow.md","title":"Pika Blackwidow \u5f15\u64ce\u6570\u636e\u5b58\u50a8\u683c\u5f0f","description":"Blackwidow\u672c\u8d28\u4e0a\u662f\u57fa\u4e8erocksdb\u7684\u5c01\u88c5\uff0c\u4f7f\u672c\u8eab\u53ea\u652f\u6301kv\u5b58\u50a8\u7684rocksdb\u80fd\u591f\u652f\u6301\u591a\u79cd\u6570\u636e\u7ed3\u6784, \u76ee\u524dBlackwidow\u652f\u6301\u4e94\u79cd\u6570\u636e\u7ed3\u6784\u7684\u5b58\u50a8\uff1aString\u7ed3\u6784(\u5b9e\u9645\u4e0a\u5c31\u662f\u5b58\u50a8key, value), Hash\u7ed3\u6784\uff0cList\u7ed3\u6784\uff0cSet\u7ed3\u6784\u548cZSet\u7ed3\u6784\uff0c \u56e0\u4e3aRocksdb\u7684\u5b58\u50a8\u65b9\u5f0f\u53ea\u6709kv\u4e00\u79cd\uff0c \u6240\u4ee5\u4e0a\u8ff0\u4e94\u79cd\u6570\u636e\u7ed3\u6784\u6700\u7ec8\u90fd\u8981\u843d\u76d8\u5230Rocksdb\u7684kv\u5b58\u50a8\u65b9\u5f0f\u4e0a\uff0c\u4e0b\u9762\u6211\u4eec\u5c55\u793aBlackwidow\u548crocksdb\u7684\u5173\u7cfb\u5e76\u4e14\u8bf4\u660e\u6211\u4eec\u662f\u5982\u4f55\u7528kv\u6765\u6a21\u62df\u591a\u6570\u636e\u7ed3\u6784\u7684\u3002","date":"2020-07-16T00:00:00.000Z","tags":[],"readingTime":12.29,"hasTruncateMarker":false,"authors":[{"name":"Axlgrep","title":"Pika \u5f00\u6e90\u793e\u533a"}],"frontMatter":{"title":"Pika Blackwidow \u5f15\u64ce\u6570\u636e\u5b58\u50a8\u683c\u5f0f","slug":"pika-blackwidow","authors":[{"name":"Axlgrep","title":"Pika \u5f00\u6e90\u793e\u533a"}],"hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"What\'s new in Pika v3.5.0","permalink":"/blog/Pika-3.5.0"},"nextItem":{"title":"pika_port \u8fc1\u79fb\u5de5\u5177","permalink":"/blog/Pika-Tools-Port-Bin"}},"content":"Blackwidow\u672c\u8d28\u4e0a\u662f\u57fa\u4e8erocksdb\u7684\u5c01\u88c5\uff0c\u4f7f\u672c\u8eab\u53ea\u652f\u6301kv\u5b58\u50a8\u7684rocksdb\u80fd\u591f\u652f\u6301\u591a\u79cd\u6570\u636e\u7ed3\u6784, \u76ee\u524dBlackwidow\u652f\u6301\u4e94\u79cd\u6570\u636e\u7ed3\u6784\u7684\u5b58\u50a8\uff1aString\u7ed3\u6784(\u5b9e\u9645\u4e0a\u5c31\u662f\u5b58\u50a8key, value), Hash\u7ed3\u6784\uff0cList\u7ed3\u6784\uff0cSet\u7ed3\u6784\u548cZSet\u7ed3\u6784\uff0c \u56e0\u4e3aRocksdb\u7684\u5b58\u50a8\u65b9\u5f0f\u53ea\u6709kv\u4e00\u79cd\uff0c \u6240\u4ee5\u4e0a\u8ff0\u4e94\u79cd\u6570\u636e\u7ed3\u6784\u6700\u7ec8\u90fd\u8981\u843d\u76d8\u5230Rocksdb\u7684kv\u5b58\u50a8\u65b9\u5f0f\u4e0a\uff0c\u4e0b\u9762\u6211\u4eec\u5c55\u793aBlackwidow\u548crocksdb\u7684\u5173\u7cfb\u5e76\u4e14\u8bf4\u660e\u6211\u4eec\u662f\u5982\u4f55\u7528kv\u6765\u6a21\u62df\u591a\u6570\u636e\u7ed3\u6784\u7684\u3002\\n\\n![pika-blackwidow-1](pika-blackwidow-1.png)\\n\\n## 1. String\u7ed3\u6784\u7684\u5b58\u50a8\\nString\u672c\u8d28\u4e0a\u5c31\u662fKey, Value, \u6211\u4eec\u77e5\u9053Rocksdb\u672c\u8eab\u5c31\u662f\u652f\u6301kv\u5b58\u50a8\u7684\uff0c \u6211\u4eec\u4e3a\u4e86\u5b9e\u73b0Redis\u4e2d\u7684expire\u529f\u80fd\uff0c\u6240\u4ee5\u5728value\u540e\u9762\u6dfb\u52a0\u4e864 Bytes\u7528\u4e8e\u5b58\u50a8timestamp, \u4f5c\u4e3a\u6700\u540eRocksdb\u843d\u76d8\u7684kv\u683c\u5f0f\uff0c\u4e0b\u9762\u662f\u5177\u4f53\u7684\u5b9e\u73b0\u65b9\u5f0f:\\n\\n![pika-blackwidow-2](pika-blackwidow-2.png)\\n\\n\u5982\u679c\u6211\u4eec\u6ca1\u6709\u5bf9\u8be5String\u5bf9\u8c61\u8bbe\u7f6e\u8d85\u65f6\u65f6\u95f4\uff0c\u5219timestamp\u5b58\u50a8\u7684\u503c\u5c31\u662f\u9ed8\u8ba4\u503c0\uff0c \u5426\u5219\u5c31\u662f\u8be5\u5bf9\u8c61\u8fc7\u671f\u65f6\u95f4\u7684\u65f6\u95f4\u6233\uff0c \u6bcf\u6b21\u6211\u4eec\u83b7\u53d6\u4e00\u4e2aString\u5bf9\u8c61\u7684\u65f6\u5019\uff0c \u9996\u5148\u4f1a\u89e3\u6790Value\u90e8\u5206\u7684\u540e\u56db\u5b57\u8282\uff0c \u83b7\u53d6\u5230timestamp\u505a\u51fa\u5224\u65ad\u4e4b\u540e\u518d\u8fd4\u56de\u7ed3\u679c\u3002\\n\\n## 2. Hash\u7ed3\u6784\u7684\u5b58\u50a8\\nblackwidow\u4e2d\u7684hash\u8868\u7531\u4e24\u90e8\u5206\u6784\u6210\uff0c\u5143\u6570\u636e(meta_key, meta_value), \u548c\u666e\u901a\u6570\u636e(data_key, data_value), \u5143\u6570\u636e\u4e2d\u5b58\u50a8\u7684\u4e3b\u8981\u662fhash\u8868\u7684\u4e00\u4e9b\u4fe1\u606f\uff0c \u6bd4\u5982\u8bf4\u5f53\u524dhash\u8868\u7684\u57df\u7684\u6570\u91cf\u4ee5\u53ca\u5f53\u524dhash\u8868\u7684\u7248\u672c\u53f7\u548c\u8fc7\u671f\u65f6\u95f4(\u7528\u505a\u79d2\u5220\u529f\u80fd), \u800c\u666e\u901a\u6570\u636e\u4e3b\u8981\u5c31\u662f\u6307\u7684\u540c\u4e00\u4e2ahash\u8868\u4e2d\u4e00\u4e00\u5bf9\u5e94\u7684field\u548cvalue\uff0c\u4f5c\u4e3a\u5177\u4f53\u6700\u540eRocksdb\u843d\u76d8\u7684kv\u683c\u5f0f\uff0c\u4e0b\u9762\u662f\u5177\u4f53\u7684\u5b9e\u73b0\u65b9\u5f0f:\\n1. \u6bcf\u4e2ahash\u8868\u7684meta_key\u548cmeta_value\u7684\u843d\u76d8\u65b9\u5f0f:\\n![pika-blackwidow-3](pika-blackwidow-3.png)\\n\\nmeta_key\u5b9e\u9645\u4e0a\u5c31\u662fhash\u8868\u7684key, \u800cmeta_value\u7531\u4e09\u4e2a\u90e8\u5206\u6784\u6210: 4Bytes\u7684Hash size(\u7528\u4e8e\u5b58\u50a8\u5f53\u524dhash\u8868\u7684\u5927\u5c0f) + 4Bytes\u7684Version(\u7528\u4e8e\u79d2\u5220\u529f\u80fd) + 4Bytes\u7684Timestamp(\u7528\u4e8e\u8bb0\u5f55\u6211\u4eec\u7ed9\u8fd9\u4e2aHash\u8868\u8bbe\u7f6e\u7684\u8d85\u65f6\u65f6\u95f4\u7684\u65f6\u95f4\u6233\uff0c \u9ed8\u8ba4\u4e3a0)\\n\\n2. hash\u8868\u4e2ddata_key\u548cdata_value\u7684\u843d\u76d8\u65b9\u5f0f:\\n![pika-blackwidow-4](pika-blackwidow-4.png)\\n\\ndata_key\u7531\u56db\u4e2a\u90e8\u5206\u6784\u6210: 4Bytes\u7684Key size(\u7528\u4e8e\u8bb0\u5f55\u540e\u9762\u8ffd\u52a0\u7684key\u7684\u957f\u5ea6\uff0c\u4fbf\u4e0e\u89e3\u6790) + key\u7684\u5185\u5bb9 + 4Bytes\u7684Version + Field\u7684\u5185\u5bb9\uff0c \u800cdata_value\u5c31\u662fhash\u8868\u67d0\u4e2afield\u5bf9\u5e94\u7684value\u3002\\n\\n3. \u5982\u679c\u6211\u4eec\u9700\u8981\u67e5\u627e\u4e00\u4e2ahash\u8868\u4e2d\u7684\u67d0\u4e00\u4e2afield\u5bf9\u5e94\u7684value, \u6211\u4eec\u9996\u5148\u4f1a\u83b7\u53d6\u5230meta_value\u89e3\u6790\u51fa\u5176\u4e2d\u7684timestamp\u5224\u65ad\u8fd9\u4e2ahash\u8868\u662f\u5426\u8fc7\u671f\uff0c \u5982\u679c\u6ca1\u6709\u8fc7\u671f\uff0c \u6211\u4eec\u53ef\u4ee5\u62ff\u5230\u5176\u4e2d\u7684version, \u7136\u540e\u6211\u4eec\u4f7f\u7528key, version\uff0c\u548cfield\u62fc\u51fadata_key, \u8fdb\u800c\u627e\u5230\u5bf9\u5e94\u7684data_value\uff08\u5982\u679c\u5b58\u5728\u7684\u8bdd)\\n\\n## 3. List\u7ed3\u6784\u7684\u5b58\u50a8\\nblackwidow\u4e2d\u7684list\u7531\u4e24\u90e8\u5206\u6784\u6210\uff0c\u5143\u6570\u636e(meta_key, meta_value), \u548c\u666e\u901a\u6570\u636e(data_key, data_value), \u5143\u6570\u636e\u4e2d\u5b58\u50a8\u7684\u4e3b\u8981\u662flist\u94fe\u8868\u7684\u4e00\u4e9b\u4fe1\u606f\uff0c \u6bd4\u5982\u8bf4\u5f53\u524dlist\u94fe\u8868\u7ed3\u70b9\u7684\u7684\u6570\u91cf\u4ee5\u53ca\u5f53\u524dlist\u94fe\u8868\u7684\u7248\u672c\u53f7\u548c\u8fc7\u671f\u65f6\u95f4(\u7528\u505a\u79d2\u5220\u529f\u80fd), \u8fd8\u6709\u5f53\u524dlist\u94fe\u8868\u7684\u5de6\u53f3\u8fb9\u754c(\u7531\u4e8enemo\u5b9e\u73b0\u7684\u94fe\u8868\u7ed3\u6784\u88ab\u5410\u69fdlrange\u6548\u7387\u4f4e\u4e0b\uff0c\u6240\u4ee5\u8fd9\u6b21blackwidow\u6211\u4eec\u5e95\u5c42\u7528\u6570\u7ec4\u6765\u6a21\u62df\u94fe\u8868\uff0c\u8fd9\u6837lrange\u901f\u5ea6\u4f1a\u5927\u5927\u63d0\u5347\uff0c\u56e0\u4e3a\u7ed3\u70b9\u5b58\u50a8\u90fd\u662f\u6709\u5e8f\u7684), \u666e\u901a\u6570\u636e\u5b9e\u9645\u4e0a\u5c31\u662f\u6307\u7684list\u4e2d\u6bcf\u4e00\u4e2a\u7ed3\u70b9\u4e2d\u7684\u6570\u636e\uff0c\u4f5c\u4e3a\u5177\u4f53\u6700\u540eRocksdb\u843d\u76d8\u7684kv\u683c\u5f0f\uff0c\u4e0b\u9762\u662f\u5177\u4f53\u7684\u5b9e\u73b0\u65b9\u5f0f\\n1. \u6bcf\u4e2alist\u94fe\u8868\u7684meta_key\u548cmeta_value\u7684\u843d\u76d8\u65b9\u5f0f:\\n![pika-blackwidow-5](pika-blackwidow-5.png)\\n\\nmeta_key\u5b9e\u9645\u4e0a\u5c31\u662flist\u94fe\u8868\u7684key, \u800cmeta_value\u7531\u4e94\u4e2a\u90e8\u5206\u6784\u6210: 8Bytes\u7684List size(\u7528\u4e8e\u5b58\u50a8\u5f53\u524d\u94fe\u8868\u4e2d\u603b\u5171\u6709\u591a\u5c11\u4e2a\u7ed3\u70b9) + 4Bytes\u7684Version(\u7528\u4e8e\u79d2\u5220\u529f\u80fd) + 4Bytes\u7684Timestamp(\u7528\u4e8e\u8bb0\u5f55\u6211\u4eec\u7ed9\u8fd9\u4e2aList\u94fe\u8868\u8bbe\u7f6e\u7684\u8d85\u65f6\u65f6\u95f4\u7684\u65f6\u95f4\u6233\uff0c \u9ed8\u8ba4\u4e3a0) + 8Bytes\u7684Left Index\uff08\u6570\u7ec4\u7684\u5de6\u8fb9\u754c) + 8Bytes\u7684Right Index(\u6570\u7ec4\u7684\u53f3\u8fb9\u754c)\\n\\n2. list\u94fe\u8868\u4e2ddata_key\u548cdata_value\u7684\u843d\u76d8\u65b9\u5f0f:\\n![pika-blackwidow-6](pika-blackwidow-6.png)\\n\\ndata_key\u7531\u56db\u4e2a\u90e8\u5206\u6784\u6210: 4Bytes\u7684Key size(\u7528\u4e8e\u8bb0\u5f55\u540e\u9762\u8ffd\u52a0\u7684key\u7684\u957f\u5ea6\uff0c\u4fbf\u4e0e\u89e3\u6790) + key\u7684\u5185\u5bb9 + 4Bytes\u7684Version + 8Bytes\u7684Index(\u8fd9\u4e2a\u8bb0\u5f55\u7684\u5c31\u662f\u5f53\u524d\u7ed3\u70b9\u7684\u5728\u8fd9\u4e2alist\u94fe\u8868\u4e2d\u7684\u7d22\u5f15)\uff0c \u800cdata_value\u5c31\u662flist\u94fe\u8868\u8be5node\u4e2d\u5b58\u50a8\u7684\u503c\\n\\n## 4. Set\u7ed3\u6784\u7684\u5b58\u50a8\\nblackwidow\u4e2d\u7684set\u7531\u4e24\u90e8\u5206\u6784\u6210\uff0c\u5143\u6570\u636e(meta_key, meta_value), \u548c\u666e\u901a\u6570\u636e(data_key, data_value), \u5143\u6570\u636e\u4e2d\u5b58\u50a8\u7684\u4e3b\u8981\u662fset\u96c6\u5408\u7684\u4e00\u4e9b\u4fe1\u606f\uff0c \u6bd4\u5982\u8bf4\u5f53\u524dset\u96c6\u5408member\u7684\u6570\u91cf\u4ee5\u53ca\u5f53\u524dset\u96c6\u5408\u7684\u7248\u672c\u53f7\u548c\u8fc7\u671f\u65f6\u95f4(\u7528\u505a\u79d2\u5220\u529f\u80fd), \u666e\u901a\u6570\u636e\u5b9e\u9645\u4e0a\u5c31\u662f\u6307\u7684set\u96c6\u5408\u4e2d\u7684member\uff0c\u4f5c\u4e3a\u5177\u4f53\u6700\u540eRocksdb\u843d\u76d8\u7684kv\u683c\u5f0f\uff0c\u4e0b\u9762\u662f\u5177\u4f53\u7684\u5b9e\u73b0\u65b9\u5f0f\uff1a\\n1. \u6bcf\u4e2aset\u96c6\u5408\u7684meta_key\u548cmeta_value\u7684\u843d\u76d8\u65b9\u5f0f:\\n![pika-blackwidow-7](pika-blackwidow-7.png)\\n\\nmeta_key\u5b9e\u9645\u4e0a\u5c31\u662fset\u96c6\u5408\u7684key, \u800cmeta_value\u7531\u4e09\u4e2a\u90e8\u5206\u6784\u6210: 4Bytes\u7684Set size(\u7528\u4e8e\u5b58\u50a8\u5f53\u524dSet\u96c6\u5408\u7684\u5927\u5c0f) + 4Bytes\u7684Version(\u7528\u4e8e\u79d2\u5220\u529f\u80fd) + 4Bytes\u7684Timestamp(\u7528\u4e8e\u8bb0\u5f55\u6211\u4eec\u7ed9\u8fd9\u4e2aset\u96c6\u5408\u8bbe\u7f6e\u7684\u8d85\u65f6\u65f6\u95f4\u7684\u65f6\u95f4\u6233\uff0c \u9ed8\u8ba4\u4e3a0)\\n\\n2. set\u96c6\u5408\u4e2ddata_key\u548cdata_value\u7684\u843d\u76d8\u65b9\u5f0f:\\n![pika-blackwidow-8](pika-blackwidow-8.png)\\n\\ndata_key\u7531\u56db\u4e2a\u90e8\u5206\u6784\u6210: 4Bytes\u7684Key size(\u7528\u4e8e\u8bb0\u5f55\u540e\u9762\u8ffd\u52a0\u7684key\u7684\u957f\u5ea6\uff0c\u4fbf\u4e0e\u89e3\u6790) + key\u7684\u5185\u5bb9 + 4Bytes\u7684Version + member\u7684\u5185\u5bb9\uff0c \u7531\u4e8eset\u96c6\u5408\u53ea\u9700\u8981\u5b58\u50a8member, \u6240\u4ee5data_value\u5b9e\u9645\u4e0a\u5c31\u662f\u7a7a\u4e32\\n\\n## 5. ZSet\u7ed3\u6784\u7684\u5b58\u50a8\\nblackwidow\u4e2d\u7684zset\u7531\u4e24\u90e8\u90e8\u5206\u6784\u6210\uff0c\u5143\u6570\u636e(meta_key, meta_value), \u548c\u666e\u901a\u6570\u636e(data_key, data_value), \u5143\u6570\u636e\u4e2d\u5b58\u50a8\u7684\u4e3b\u8981\u662fzset\u96c6\u5408\u7684\u4e00\u4e9b\u4fe1\u606f\uff0c \u6bd4\u5982\u8bf4\u5f53\u524dzset\u96c6\u5408member\u7684\u6570\u91cf\u4ee5\u53ca\u5f53\u524dzset\u96c6\u5408\u7684\u7248\u672c\u53f7\u548c\u8fc7\u671f\u65f6\u95f4(\u7528\u505a\u79d2\u5220\u529f\u80fd), \u800c\u666e\u901a\u6570\u636e\u5c31\u662f\u6307\u7684zset\u4e2d\u6bcf\u4e2amember\u4ee5\u53ca\u5bf9\u5e94\u7684score, \u7531\u4e8ezset\u8fd9\u79cd\u6570\u636e\u7ed3\u6784\u6bd4\u8f83\u7279\u6b8a\uff0c\u9700\u8981\u6309\u7167memer\u8fdb\u884c\u6392\u5e8f\uff0c\u4e5f\u9700\u8981\u6309\u7167score\u8fdb\u884c\u6392\u5e8f\uff0c \u6240\u4ee5\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e00\u4e2azset\u6211\u4eec\u4f1a\u6309\u7167\u4e0d\u540c\u7684\u683c\u5f0f\u5b58\u50a8\u4e24\u4efd\u666e\u901a\u6570\u636e, \u5728\u8fd9\u91cc\u6211\u4eec\u79f0\u4e3amember to score\u548cscore to member\uff0c\u4f5c\u4e3a\u5177\u4f53\u6700\u540eRocksdb\u843d\u76d8\u7684kv\u683c\u5f0f\uff0c\u4e0b\u9762\u662f\u5177\u4f53\u7684\u5b9e\u73b0\u65b9\u5f0f\uff1a\\n1. \u6bcf\u4e2azset\u96c6\u5408\u7684meta_key\u548cmeta_value\u7684\u843d\u76d8\u65b9\u5f0f:\\n![](https://i.imgur.com/RhZ8KMw.png)\\n\\nmeta_key\u5b9e\u9645\u4e0a\u5c31\u662fzset\u96c6\u5408\u7684key, \u800cmeta_value\u7531\u4e09\u4e2a\u90e8\u5206\u6784\u6210: 4Bytes\u7684ZSet size(\u7528\u4e8e\u5b58\u50a8\u5f53\u524dzSet\u96c6\u5408\u7684\u5927\u5c0f) + 4Bytes\u7684Version(\u7528\u4e8e\u79d2\u5220\u529f\u80fd) + 4Bytes\u7684Timestamp(\u7528\u4e8e\u8bb0\u5f55\u6211\u4eec\u7ed9\u8fd9\u4e2aZset\u96c6\u5408\u8bbe\u7f6e\u7684\u8d85\u65f6\u65f6\u95f4\u7684\u65f6\u95f4\u6233\uff0c \u9ed8\u8ba4\u4e3a0)\\n\\n2. \u6bcf\u4e2azset\u96c6\u5408\u7684data_key\u548cdata_value\u7684\u843d\u76d8\u65b9\u5f0f(member to score):\\n![](https://i.imgur.com/C85Ba5Z.png)\\n\\nmember to socre\u7684data_key\u7531\u56db\u4e2a\u90e8\u5206\u6784\u6210\uff1a4Bytes\u7684Key size(\u7528\u4e8e\u8bb0\u5f55\u540e\u9762\u8ffd\u52a0\u7684key\u7684\u957f\u5ea6\uff0c\u4fbf\u4e0e\u89e3\u6790) + key\u7684\u5185\u5bb9 + 4Bytes\u7684Version + member\u7684\u5185\u5bb9\uff0c data_value\u4e2d\u5b58\u50a8\u7684\u5176member\u5bf9\u5e94\u7684score\u7684\u503c\uff0c\u5927\u5c0f\u4e3a8\u4e2a\u5b57\u8282\uff0c\u7531\u4e8erocksdb\u9ed8\u8ba4\u662f\u6309\u7167\u5b57\u5178\u5e8f\u8fdb\u884c\u6392\u5217\u7684\uff0c\u6240\u4ee5\u540c\u4e00\u4e2azset\u4e2d\u4e0d\u540c\u7684member\u5c31\u662f\u6309\u7167member\u7684\u5b57\u5178\u5e8f\u6765\u6392\u5217\u7684(\u540c\u4e00\u4e2azset\u7684key size, key, \u4ee5\u53caversion\uff0c\u4e5f\u5c31\u662f\u524d\u7f00\u90fd\u662f\u4e00\u81f4\u7684\uff0c\u4e0d\u540c\u7684\u53ea\u6709\u672b\u7aef\u7684member).\\n\\n3. \u6bcf\u4e2azset\u96c6\u5408\u7684data_key\u548cdata_value\u7684\u843d\u76d8\u65b9\u5f0f(score to member):\\n![](https://i.imgur.com/QV9XHEk.png)\\n\\nscore to member\u7684data_key\u7531\u4e94\u4e2a\u90e8\u5206\u6784\u6210\uff1a4Bytes\u7684Key size(\u7528\u4e8e\u8bb0\u5f55\u540e\u9762\u8ffd\u52a0\u7684key\u7684\u957f\u5ea6\uff0c\u4fbf\u4e0e\u89e3\u6790) + key\u7684\u5185\u5bb9 + 4Bytes\u7684Version + 8Bytes\u7684Score + member\u7684\u5185\u5bb9\uff0c \u7531\u4e8escore\u548cmember\u90fd\u5df2\u7ecf\u653e\u5728data_key\u4e2d\u8fdb\u884c\u5b58\u50a8\u4e86\u6240\u4ee5data_value\u5c31\u662f\u4e00\u4e2a\u7a7a\u4e32\uff0c\u65e0\u9700\u5b58\u50a8\u5176\u4ed6\u5185\u5bb9\u4e86\uff0c\u5bf9\u4e8escore to member\u4e2d\u7684data_key\u6211\u4eec\u81ea\u5df1\u5b9e\u73b0\u4e86rocksdb\u7684comparator\uff0c\u540c\u4e00\u4e2azset\u4e2dscore to member\u7684data_key\u4f1a\u9996\u5148\u6309\u7167score\u6765\u6392\u5e8f\uff0c \u5728score\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\u518d\u6309\u7167member\u6765\u6392\u5e8f\\n\\n\\n## Blackwidow\u76f8\u5bf9\u4e8eNemo\u6709\u54ea\u4e9b\u4f18\u52bf\\n\\n1. Blackwidow\u91c7\u7528\u4e86rocksdb\u7684column families\u7684\u65b0\u7279\u6027\uff0c\u5c06\u5143\u6570\u636e\u548c\u5b9e\u9645\u6570\u636e\u5206\u5f00\u5b58\u653e(\u5bf9\u5e94\u4e8e\u4e0a\u9762\u7684meta\u6570\u636e\u548cdata\u6570\u636e), \u8fd9\u79cd\u5b58\u50a8\u65b9\u5f0f\u76f8\u5bf9\u4e8eNemo\u5c06meta, data\u6df7\u5728\u4e00\u8d77\u5b58\u653e\u66f4\u52a0\u5408\u7406\uff0c \u5e76\u4e14\u53ef\u4ee5\u63d0\u5347\u67e5\u627e\u6548\u7387(\u6bd4\u5982info keyspace\u7684\u6548\u7387\u4f1a\u5927\u5927\u63d0\u5347)\\n2. Blackwidow\u4e2d\u53c2\u6570\u4f20\u9012\u5927\u91cf\u91c7\u7528Slice\u800cNemo\u4e2d\u91c7\u7528\u7684\u662fstd::string, \u6240\u4ee5Nemo\u4f1a\u6709\u5f88\u591a\u6ca1\u6709\u5fc5\u8981\u7684string\u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570\u4ee5\u53ca\u6790\u6784\u51fd\u6570\u7684\u8c03\u7528\uff0c\u9020\u6210\u989d\u5916\u7684\u8d44\u6e90\u6d88\u8017\uff0c\u800cBlackwidow\u5219\u4e0d\u4f1a\u6709\u8fd9\u4e2a\u95ee\u9898\\n3. Blackwidow\u5bf9kv\u6a21\u62df\u591a\u6570\u636e\u7ed3\u6784\u7684\u5b58\u50a8\u683c\u5f0f\u4e0a\u505a\u4e86\u91cd\u65b0\u8bbe\u8ba1(\u5177\u4f53\u53ef\u4ee5\u53c2\u8003Nemo\u5f15\u64ce\u6570\u636e\u5b58\u50a8\u683c\u5f0f\u548c\u672c\u7bc7\u6587\u7ae0)\uff0c\u4f7f\u4e4b\u524d\u5728Nemo\u4e0a\u51fa\u73b0\u7684\u4e00\u4e9b\u65e0\u6cd5\u89e3\u51b3\u7684\u6027\u80fd\u95ee\u9898\u5f97\u4ee5\u89e3\u51b3\uff0c\u6240\u4ee5Blackwidow\u7684\u591a\u6570\u636e\u7ed3\u6784\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\u6027\u80fd\u8fdc\u8fdc\u4f18\u4e8eNemo\\n4. \u539f\u6765Nemo\u5bf9\u591a\u6570\u636e\u7ed3\u6784\u7684Key\u7684\u957f\u5ea6\u6700\u5927\u53ea\u80fd\u652f\u6301\u5230256 Bytes\uff0c\u800cBlackwidow\u7ecf\u8fc7\u91cd\u65b0\u8bbe\u8ba1\uff0c\u653e\u5f00\u4e86\u591a\u6570\u636e\u7ed3\u6784Key\u957f\u5ea6\u7684\u8fd9\u4e2a\u9650\u5236\\n5. Blackwidow\u76f8\u5bf9\u4e8eNemo\u66f4\u52a0\u8282\u7701\u7a7a\u95f4\uff0cNemo\u7531\u4e8e\u9700\u8981nemo-rocksdb\u7684\u652f\u6301\uff0c\u6240\u4ee5\u4e0d\u7ba1\u5728meta\u8fd8\u662fdata\u6570\u636e\u90e8\u5206\u90fd\u8ffd\u52a0\u4e86version\u548ctimestamp\u8fd9\u4e9b\u4fe1\u606f\uff0c\u5e76\u4e14\u4e3a\u4e86\u533a\u5206meta_key\u548cdata_key, \u5728\u6700\u524d\u9762\u52a0\u5165s\u548cS(\u62ffSet\u6570\u636e\u7ed3\u6784\u6253\u6bd4\u65b9)\uff0cBlackwidow\u5728\u8fd9\u65b9\u9762\u505a\u4e86\u4f18\u5316\uff0c\u4f7f\u540c\u6837\u7684\u6570\u636e\u91cf\u4e0bBlackwidow\u6240\u5360\u7528\u7684\u7a7a\u95f4\u6bd4Nemo\u8981\u5c0f(\u4e3e\u4e2a\u4f8b\u5b50\uff0cBlackwidow\u4e2dList\u7ed3\u6784\u4e2d\u7684\u4e00\u4e2aNode\u5c31\u6bd4Nemo\u4e2d\u7684\u4e00\u4e2aNode\u8282\u7701\u4e8616 Bytes\u7684\u7a7a\u95f4)\\n6. Blackwidow\u5728\u9501\u7684\u5b9e\u73b0\u4e0a\u53c2\u7167\u4e86RocksDB\u4e8b\u52a1\u91cc\u9501\u7684\u5b9e\u73b0\u65b9\u6cd5\uff0c\u800c\u5f03\u7528\u4e86\u4e4b\u524dNemo\u7684\u884c\u9501\uff0c\u6240\u4ee5\u5728\u591a\u7ebf\u7a0b\u5bf9\u540c\u4e00\u628a\u9501\u6709\u62a2\u5360\u7684\u60c5\u51b5\u4e0b\u6027\u80fd\u4f1a\u6709\u6240\u63d0\u5347"},{"id":"Pika-Tools-Port-Bin","metadata":{"permalink":"/blog/Pika-Tools-Port-Bin","source":"@site/blog/2020-04-26-Pika-Tools-Port-Bin.md","title":"pika_port \u8fc1\u79fb\u5de5\u5177","description":"\u9879\u76ee\u4f5c\u8005\uff1a","date":"2020-04-26T00:00:00.000Z","tags":[],"readingTime":2.56,"hasTruncateMarker":false,"authors":[{"name":"\u4e8e\u96e8","title":"Pika \u5f00\u6e90\u793e\u533a"}],"frontMatter":{"title":"pika_port \u8fc1\u79fb\u5de5\u5177","slug":"Pika-Tools-Port-Bin","authors":[{"name":"\u4e8e\u96e8","title":"Pika \u5f00\u6e90\u793e\u533a"}],"hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"Pika Blackwidow \u5f15\u64ce\u6570\u636e\u5b58\u50a8\u683c\u5f0f","permalink":"/blog/pika-blackwidow"}},"content":"## \u9879\u76ee\u4f5c\u8005\uff1a\\n[AlexStocks](https://github.com/alexstocks)\\n\\n## \u9002\u7528\u7248\u672c\uff1a\\n3.1 \u548c 2.x\\n\\n## \u9879\u76ee\u5730\u5740\uff1a\\n[https://github.com/ipixiu/pika-tools](https://github.com/ipixiu/pika-tools)\\n\\n[https://github.com/Axlgrep/pika-tools \u957f\u671f\u7ef4\u62a4\u5730\u5740\u9700\u81ea\u884c\u7f16\u8bd1](https://github.com/Axlgrep/pika-tools)\\n\\n## \u4e8c\u8fdb\u5236\u5305\uff1a\\n[https://github.com/ipixiu/pika-port-bin](https://github.com/ipixiu/pika-port-bin)\\n\\n## \u529f\u80fd\uff1a\\n\u5c06Pika\u4e2d\u7684\u6570\u636e\u5728\u7ebf\u8fc1\u79fb\u5230Pika\u3001Redis\uff08\u652f\u6301\u5168\u91cf\u3001\u589e\u91cf\u540c\u6b65\uff09\\n\\n## \u5f00\u53d1\u80cc\u666f\uff1a\\n\u4e4b\u524dPika\u9879\u76ee\u5b98\u65b9\u63d0\u4f9b\u7684pika_to_redis\u5de5\u5177\u4ec5\u652f\u6301\u79bb\u7ebf\u5c06Pika\u7684DB\u4e2d\u7684\u6570\u636e\u8fc1\u79fb\u5230Pika\u3001Redis, \u4e14\u65e0\u6cd5\u589e\u91cf\u540c\u6b65\uff0c\u8be5\u5de5\u5177\u53ef\u4ee5\u76f4\u63a5\u4f2a\u88c5\u4e3a\u4e00\u4e2aPika\u7684\u4ece\u5e93\uff0c\u5c06\u4e3b\u5e93\u6570\u636e\u901a\u8fc7\u540c\u6b65\u83b7\u53d6\u5e76\u8f6c\u53d1\u7ed9Pika\u3001Redis\uff0c\u540c\u65f6\u5e76\u652f\u6301\u589e\u91cf\u540c\u6b65\\n\\n\\n## \u5b9e\u73b0\uff1a\\n### trysync\u7ebf\u7a0b\\n1. \u5c1d\u8bd5\u4e0e\u4e3b\u5e93\u5efa\u7acb\u540c\u6b65\u5173\u7cfb  \\n2. \u5982\u679c\u9700\u8981\u5168\u540c\u6b65\uff0c\u5219\u5728\u63a5\u6536\u5230master\u7684db\u4e4b\u540e\uff0c\u542f\u52a8migrator\u548csender\u7ebf\u7a0b\u5c06db\u91cc\u9762\u7684\u6570\u636e\u53d1\u9001\u7ed9Pika\u3001Redis  \\n3. \u542f\u52a8Slaveping\u7ebf\u7a0b\u5b9a\u671f\u7ed9\u4e3b\u5e93\u53d1\u9001\u5fc3\u8df3\uff0c\u5b8c\u6210\u5efa\u7acb\u4e3b\u4ece\u5173\u7cfb\\n\\n### binlog_receiver\u7ebf\u7a0b\\n1. \u63a5\u6536\u4e3b\u5e93\u53d1\u9001\u8fc7\u6765\u7684binlog\u5e76\u4e14\u5c06\u5176\u89e3\u6790\u6210redis\u547d\u4ee4\\n2. \u5c06redis\u547d\u4ee4\u8f6c\u53d1\u7ed9Pika\u3001Redis\\n\\n### migrator\u7ebf\u7a0b\\n1. \u626b\u63cf\u4e0d\u540c\u6570\u636e\u7c7b\u578b\u7684\u5206\u5e93\\n2. \u5c06key\u8fdb\u884c\u89e3\u6790\u6210\u54cd\u5e94\u6570\u636ePika\u3001redis\u6307\u4ee4\\n3. \u5c06\u89e3\u6790\u597d\u7684redis\u6307\u4ee4\u52a0\u8f7d\u5230sender\u7684\u53d1\u9001buf\u4e2d\\n\\n### sender\u7ebf\u7a0b\\n1. \u4ece\u53d1\u9001buf\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u4ee5\u975e\u963b\u585e\u65b9\u5f0f\u5411Pika\u3001redis\u53d1\u9001\u6570\u636e\\n2. \u63a5\u6536Pika\u3001redis\u8fd4\u56de\u7684\u7ed3\u679c\u5e76\u89e3\u6790\uff0c\u5982\u679c\u51fa\u73b0\u9519\u8bef\u5219\u663e\u793a\u9519\u8bef\u7ed3\u679c\\n\\n## \u4f7f\u7528\u5e2e\u52a9\uff1a\\n```\\nUsage: \\n       pika_port [-h] [-t local_ip -p local_port -i master_ip -o master_port\\n                  -m forward_ip -n forward_port -x forward_thread_num -y forward_passwd]\\n                  -f filenum -s offset -w password -r rsync_dump_path  -l log_path\\n        -h     -- show this help\\n        -t     -- local host ip(OPTIONAL default: 127.0.0.1)\\n        -p     -- local port(OPTIONAL)\\n        -i     -- master ip(OPTIONAL default: 127.0.0.1)\\n        -o     -- master port(REQUIRED)\\n        -m     -- forward ip(OPTIONAL default: 127.0.0.1)\\n        -n     -- forward port(REQUIRED)\\n        -x     -- forward thread num(OPTIONAL default: 1)\\n        -y     -- forward password(OPTIONAL)\\n        -f     -- binlog filenum(OPTIONAL default: local offset)\\n        -s     -- binlog offset(OPTIONAL default: local offset)\\n        -w     -- password for master(OPTIONAL)\\n        -r     -- rsync dump data path(OPTIONAL default: ./rsync_dump)\\n        -l     -- local log path(OPTIONAL default: ./log)\\n        -b     -- max batch number when port rsync dump data (OPTIONAL default: 512)\\n        -d     -- daemonize(OPTIONAL)\\n  example: ./pika_port -t 127.0.0.1 -p 12345 -i 127.0.0.1 -o 9221 -m 127.0.0.1 -n 6379 -x 7 -f 0 -s 0 -w abc -l ./log -r ./rsync_dump -b 512 -d\\n```"}]}}')}}]);