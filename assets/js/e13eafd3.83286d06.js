"use strict";(self.webpackChunkPikiwiDB_Pika_=self.webpackChunkPikiwiDB_Pika_||[]).push([[7963],{2010:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>x,frontMatter:()=>t,metadata:()=>c,toc:()=>a});var o=i(4848),s=i(8453);const t={title:"\u7ba1\u7406\u6307\u4ee4",sidebar_position:40},l=void 0,c={id:"\u4f7f\u7528\u4e0e\u8fd0\u7ef4/\u7ba1\u7406\u6307\u4ee4/index",title:"\u7ba1\u7406\u6307\u4ee4",description:"client kill all",source:"@site/docs/\u4f7f\u7528\u4e0e\u8fd0\u7ef4/\u7ba1\u7406\u6307\u4ee4/index.md",sourceDirName:"\u4f7f\u7528\u4e0e\u8fd0\u7ef4/\u7ba1\u7406\u6307\u4ee4",slug:"/\u4f7f\u7528\u4e0e\u8fd0\u7ef4/\u7ba1\u7406\u6307\u4ee4/",permalink:"/docs/\u4f7f\u7528\u4e0e\u8fd0\u7ef4/\u7ba1\u7406\u6307\u4ee4/",draft:!1,unlisted:!1,editUrl:"https://github.com/pikiwidb/website/tree/main/docs/\u4f7f\u7528\u4e0e\u8fd0\u7ef4/\u7ba1\u7406\u6307\u4ee4/index.md",tags:[],version:"current",sidebarPosition:40,frontMatter:{title:"\u7ba1\u7406\u6307\u4ee4",sidebar_position:40},sidebar:"tutorialSidebar",previous:{title:"\u6570\u636e\u76ee\u5f55",permalink:"/docs/\u4f7f\u7528\u4e0e\u8fd0\u7ef4/\u6570\u636e\u76ee\u5f55/"},next:{title:"\u5dee\u5f02\u5316\u547d\u4ee4",permalink:"/docs/\u4f7f\u7528\u4e0e\u8fd0\u7ef4/\u5dee\u5f02\u5316\u547d\u4ee4/"}},r={},a=[{value:"client kill all",id:"client-kill-all",level:2},{value:"bgsave",id:"bgsave",level:2},{value:"delbackup",id:"delbackup",level:2},{value:"info keyspace",id:"info-keyspace",level:2},{value:"config get/set *",id:"config-getset-",level:2},{value:"compact",id:"compact",level:2},{value:"readonly \uff083.1\u4e4b\u540e\u7248\u672c\u5e9f\u9664\uff09",id:"readonly-31\u4e4b\u540e\u7248\u672c\u5e9f\u9664",level:2}];function d(e){const n={br:"br",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"client-kill-all",children:"client kill all"}),"\n",(0,o.jsx)(n.p,{children:"\u5220\u9664\u5168\u90e8\u7684\u5ba2\u6237\u7aef"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"xxx.qihoo.net:8221> client kill all\nOK\nxxx.qihoo.net:8221>\n"})}),"\n",(0,o.jsx)(n.h2,{id:"bgsave",children:"bgsave"}),"\n",(0,o.jsx)(n.p,{children:"\u6267\u884c\u65b9\u5f0f\u548credis\u4e00\u6837\u3002\u4f46\u662f\u5f02\u6b65dump\u5b8c\u540e\uff0c\u6570\u636e\u5e93\u4fdd\u5b58\u5728dump_path\u76ee\u5f55\u4e0b\uff0cdump\u51fa\u6765\u7684\u6570\u636e\u5e93\u5305\u542bdump_prefix\u548cdump\u65f6\u95f4\u7b49\u4fe1\u606f\uff1b"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"xxx.qihoo.net:8221> BGSAVE\n20160422134755 : 2213: 32582292\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u8fd4\u56de\u7684\u4fe1\u606f\u5305\u62ecdump\u7684\u65f6\u95f4\uff0820160422134755\uff09\u548c\u5f53\u524d\u7684binlog\u4f4d\u7f6e\uff0c\u5373\u6587\u4ef6\u53f7\uff1a\u504f\u79fb\u91cf\uff082213: 32582292\uff09"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"xxx.qihoo.net # ll /data3/pika_test/dump/\n\u603b\u7528\u91cf 0\ndrwxr-xr-x 1 root root 42 4\u6708  22 13:47 pika8221-20160422\n"})}),"\n",(0,o.jsx)(n.p,{children:'"/data3/pika_test/dump/"\u662fdump\u7684\u8def\u5f84\uff0c"pika9221-"\u4e3adump_prefix\uff0c20160422\u662fdump\u7684\u65e5\u671f'}),"\n",(0,o.jsx)(n.h2,{id:"delbackup",children:"delbackup"}),"\n",(0,o.jsx)(n.p,{children:"\u5220\u9664dump\u76ee\u5f55\u4e0b\u9664\u6b63\u5728\u4f7f\u7528\uff08\u5168\u540c\u6b65\u4e2d\uff09\u7684db\u5feb\u7167\u5916\u7684\u5176\u4ed6\u5feb\u7167"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"xxx.qihoo.net:8221> DELBACKUP\nOK\n"})}),"\n",(0,o.jsx)(n.h2,{id:"info-keyspace",children:"info keyspace"}),"\n",(0,o.jsxs)(n.p,{children:["\u6267\u884c\u65b9\u5f0f\u662f\u201cinfo keyspace 1\u201d\uff0c\u201cinfo keyspace 0\u201d\u548c\u201dinfo keyspace\u201c\uff0c \u201cinfo keyspace\u201d\u548c\u201cinfo keyspace 0\u201d\u7b49\u4ef7\uff1b",(0,o.jsx)(n.br,{}),"\n","info keyspace 1\uff1a \u5f02\u6b65\u5f00\u59cb\u4e00\u6b21keyspace\u7684\u626b\u63cf\uff0c\u5e76\u8fd4\u56de\u5df2\u5b8c\u6210\u7684\u4e0a\u4e00\u6b21keyspace\u626b\u63cf\u7684\u7ed3\u679c",(0,o.jsx)(n.br,{}),"\n","info keyspace 0: \u8fd4\u56de\u5df2\u5b8c\u6210\u7684\u4e0a\u4e00\u6b21keyspace\u626b\u63cf\u7684\u7ed3\u679c"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"xxx.qihoo.net:8221> info keyspace 1\n# Keyspace\n# Time:1970-01-01 08:00:00\nkv keys:0\nhash keys:0\nlist keys:0\nzset keys:0\nset keys:0\nxxx.qihoo.net:8221> info keyspace\n# Keyspace\n# Time:2016-04-22 13:45:54\nkv keys:13\nhash keys:0\nlist keys:0\nzset keys:0\nset keys:0\n"})}),"\n",(0,o.jsx)(n.h2,{id:"config-getset-",children:"config get/set *"}),"\n",(0,o.jsx)(n.p,{children:"config get\u548cconfig set\u7684\u7528\u6cd5\u548credis\u662f\u4e00\u6837\u7684\uff0c\u4f46\u662f\u9009\u9879\u53ef\u80fd\u4f1a\u6709\u6240\u4e0d\u540c\uff0c\u6240\u4ee5\u914d\u4e86\u4e24\u4e2a\u547d\u4ee4"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"config get *"}),"\n",(0,o.jsx)(n.li,{children:"config set *\n\u7528\u4e8e\u5206\u522b\u5217\u51faconfig get\u548cconfig set\u6240\u80fd\u64cd\u4f5c\u7684\u9009\u9879"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'xxx.qihoo.net:8221> config get *\n 1) "port"\n 2) "thread_num"\n 3) "log_path"\n 4) "log_level"\n 5) "db_path"\n 6) "maxmemory"\n 7) "write_buffer_size"\n 8) "timeout"\n 9) "requirepass"\n10) "userpass"\n11) "userblacklist"\n12) "daemonize"\n13) "dump_path"\n14) "dump_prefix"\n15) "pidfile"\n16) "maxconnection"\n17) "target_file_size_base"\n18) "expire_logs_days"\n19) "expire_logs_nums"\n20) "root_connection_num"\n21) "slowlog_log_slower_than"\n22) "slave-read-only"\n23) "binlog_file_size"\n24) "compression"\n25) "db_sync_path"\n26) "db_sync_speed"\nxxx.qihoo.net:8221> config set *\n 1) "log_level"\n 2) "timeout"\n 3) "requirepass"\n 4) "userpass"\n 5) "userblacklist"\n 6) "dump_prefix"\n 7) "maxconnection"\n 8) "expire_logs_days"\n 9) "expire_logs_nums"\n10) "root_connection_num"\n11) "slowlog_log_slower_than"\n12) "slave-read-only"\n13) "db_sync_speed"\nbada06.add.zwt.qihoo.net:8221>\n'})}),"\n",(0,o.jsx)(n.h2,{id:"compact",children:"compact"}),"\n",(0,o.jsx)(n.p,{children:"\u56e0\u4e3apika\u5e95\u5c42\u5b58\u50a8\u5f15\u64ce\u662f\u57fa\u4e8erocksdb\u6539\u9020\u6765\u7684\uff0c\u4f1a\u5b58\u5728\u8bfb\u5199\u548c\u7a7a\u95f4\u653e\u5927\u7684\u95ee\u9898\uff0c\u9664\u4e86rocksdb\u7684\u81ea\u52a8compaction\uff0cpika\u4e5f\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u624b\u52a8compaction\u7684\u547d\u4ee4\uff0c\u4ee5\u5f3a\u5236compact\u6574\u4e2akespace\u5185\u7684\u5185\u5bb9\uff0c\u652f\u6301\u5bf9\u5355\u4e2a\u6570\u636e\u7ed3\u6784\u8fdb\u884ccompact\uff0c\u8bed\u6cd5\u4e3a\uff1acompact [string/hash/set/zset/list/all]"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"xxx.qihoo.net:8221> compact\nOK\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u4e00\u822ckeyspace\u6bd4\u8f83\u5927\u65f6\uff0c\u6267\u884c\u5b8ccompact\u547d\u4ee4\u540e\uff0c\u5360\u7528\u7a7a\u95f4\u4f1a\u663e\u8457\u51cf\u5c0f\uff0c\u4f46\u662f\u8017\u65f6\u6bd4\u8f83\u957f\uff0c\u5bf9\u8bfb\u5199\u6027\u80fd\u4e5f\u6709\u5f71\u54cd\uff0c\u6240\u4ee5\u5efa\u8bae\u5728\u6d41\u91cf\u4e0d\u5927\u7684\u60c5\u51b5\u4e0b\u6267\u884c"}),"\n",(0,o.jsx)(n.h2,{id:"readonly-31\u4e4b\u540e\u7248\u672c\u5e9f\u9664",children:"readonly \uff083.1\u4e4b\u540e\u7248\u672c\u5e9f\u9664\uff09"}),"\n",(0,o.jsxs)(n.p,{children:["\u8be5\u547d\u4ee4\u7528\u6237\u8bbe\u7f6e\u670d\u52a1\u5668\u7684\u5199\u6743\u9650\uff1b\u6267\u884c\u65b9\u5f0f\u4e3a\uff1a\n1\uff09\u201creadonly on\u201d",(0,o.jsx)(n.br,{}),"\n","2\uff09\u201creadonly off\u201d",(0,o.jsx)(n.br,{}),"\n","3\uff09\u201creadonly 1\u201d",(0,o.jsx)(n.br,{}),"\n","4\uff09\u201creadonly 0\u201d\n\u5176\u4e2d1\uff09\u548c3\uff09\u7b49\u4ef7\uff0c2\uff09\u548c4\uff09\u7b49\u4ef7"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'xxx.qihoo.net:8221> set a b\nOK\nxxx.qihoo.net:8221> get a\n"b"\nxxx.qihoo.net:8221> readonly 1\nOK\nxxx.qihoo.net:8221> set a c\n(error) ERR Server in read-only\nxxx.qihoo.net:8221> get a\n"b"\nxxx.qihoo.net:8221> readonly 0\nOK\nxxx.qihoo.net:8221> set a c\nOK\nxxx.qihoo.net:8221> get a\n"c"\nxxx.qihoo.net:8221>\n'})})]})}function x(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>c});var o=i(6540);const s={},t=o.createContext(s);function l(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);