"use strict";(self.webpackChunkPikiwiDB_Pika_=self.webpackChunkPikiwiDB_Pika_||[]).push([[5533],{7496:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>d,default:()=>m,frontMatter:()=>c,metadata:()=>n,toc:()=>o});var a=s(4848),i=s(8453);const c={title:"\u65e7\u5b58\u50a8\u7ed3\u6784",sidebar_position:14},d=void 0,n={id:"\u8bbe\u8ba1\u4e0e\u5b9e\u73b0/\u65e7\u5b58\u50a8\u7ed3\u6784/index",title:"\u65e7\u5b58\u50a8\u7ed3\u6784",description:"Blackwidow \u672c\u8d28\u4e0a\u662f\u57fa\u4e8e rocksdb \u7684\u5c01\u88c5\uff0c\u4f7f\u672c\u8eab\u53ea\u652f\u6301 kv \u5b58\u50a8\u7684 rocksdb \u80fd\u591f\u652f\u6301\u591a\u79cd\u6570\u636e\u7ed3\u6784, \u76ee\u524d Blackwidow \u652f\u6301\u4e94\u79cd\u6570\u636e\u7ed3\u6784\u7684\u5b58\u50a8\uff1aString \u7ed3\u6784(\u5b9e\u9645\u4e0a\u5c31\u662f\u5b58\u50a8 key, value), Hash \u7ed3\u6784\uff0cList \u7ed3\u6784\uff0cSet \u7ed3\u6784\u548c ZSet \u7ed3\u6784\uff0c \u56e0\u4e3a Rocksdb \u7684\u5b58\u50a8\u65b9\u5f0f\u53ea\u6709 kv \u4e00\u79cd\uff0c \u6240\u4ee5\u4e0a\u8ff0\u4e94\u79cd\u6570\u636e\u7ed3\u6784\u6700\u7ec8\u90fd\u8981\u843d\u76d8\u5230 Rocksdb \u7684 kv \u5b58\u50a8\u65b9\u5f0f\u4e0a\uff0c\u4e0b\u9762\u6211\u4eec\u5c55\u793a Blackwidow \u548c rocksdb \u7684\u5173\u7cfb\u5e76\u4e14\u8bf4\u660e\u6211\u4eec\u662f\u5982\u4f55\u7528 kv \u6765\u6a21\u62df\u591a\u6570\u636e\u7ed3\u6784\u7684\u3002",source:"@site/docs/\u8bbe\u8ba1\u4e0e\u5b9e\u73b0/\u65e7\u5b58\u50a8\u7ed3\u6784/index.md",sourceDirName:"\u8bbe\u8ba1\u4e0e\u5b9e\u73b0/\u65e7\u5b58\u50a8\u7ed3\u6784",slug:"/\u8bbe\u8ba1\u4e0e\u5b9e\u73b0/\u65e7\u5b58\u50a8\u7ed3\u6784/",permalink:"/docs/\u8bbe\u8ba1\u4e0e\u5b9e\u73b0/\u65e7\u5b58\u50a8\u7ed3\u6784/",draft:!1,unlisted:!1,editUrl:"https://github.com/OpenAtomFoundation/PikiwiDB-Pika--Website/tree/main/docs/\u8bbe\u8ba1\u4e0e\u5b9e\u73b0/\u65e7\u5b58\u50a8\u7ed3\u6784/index.md",tags:[],version:"current",sidebarPosition:14,frontMatter:{title:"\u65e7\u5b58\u50a8\u7ed3\u6784",sidebar_position:14},sidebar:"tutorialSidebar",previous:{title:"NoSQL \u539f\u7406\u6982\u8ff0",permalink:"/docs/\u8bbe\u8ba1\u4e0e\u5b9e\u73b0/NoSQL \u539f\u7406\u6982\u8ff0/"},next:{title:"\u65b0\u5b58\u50a8\u7ed3\u6784",permalink:"/docs/\u8bbe\u8ba1\u4e0e\u5b9e\u73b0/\u65b0\u5b58\u50a8\u7ed3\u6784/"}},l={},o=[{value:"1. String \u7ed3\u6784\u7684\u5b58\u50a8",id:"1-string-\u7ed3\u6784\u7684\u5b58\u50a8",level:2},{value:"2. Hash \u7ed3\u6784\u7684\u5b58\u50a8",id:"2-hash-\u7ed3\u6784\u7684\u5b58\u50a8",level:2},{value:"3. List \u7ed3\u6784\u7684\u5b58\u50a8",id:"3-list-\u7ed3\u6784\u7684\u5b58\u50a8",level:2},{value:"4. Set \u7ed3\u6784\u7684\u5b58\u50a8",id:"4-set-\u7ed3\u6784\u7684\u5b58\u50a8",level:2},{value:"5. ZSet \u7ed3\u6784\u7684\u5b58\u50a8",id:"5-zset-\u7ed3\u6784\u7684\u5b58\u50a8",level:2},{value:"Blackwidow \u76f8\u5bf9\u4e8e Nemo \u6709\u54ea\u4e9b\u4f18\u52bf",id:"blackwidow-\u76f8\u5bf9\u4e8e-nemo-\u6709\u54ea\u4e9b\u4f18\u52bf",level:2}];function r(e){const t={h2:"h2",img:"img",li:"li",ol:"ol",p:"p",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["Blackwidow \u672c\u8d28\u4e0a\u662f\u57fa\u4e8e rocksdb \u7684\u5c01\u88c5\uff0c\u4f7f\u672c\u8eab\u53ea\u652f\u6301 kv \u5b58\u50a8\u7684 rocksdb \u80fd\u591f\u652f\u6301\u591a\u79cd\u6570\u636e\u7ed3\u6784, \u76ee\u524d Blackwidow \u652f\u6301\u4e94\u79cd\u6570\u636e\u7ed3\u6784\u7684\u5b58\u50a8\uff1aString \u7ed3\u6784(\u5b9e\u9645\u4e0a\u5c31\u662f\u5b58\u50a8 key, value), Hash \u7ed3\u6784\uff0cList \u7ed3\u6784\uff0cSet \u7ed3\u6784\u548c ZSet \u7ed3\u6784\uff0c \u56e0\u4e3a Rocksdb \u7684\u5b58\u50a8\u65b9\u5f0f\u53ea\u6709 kv \u4e00\u79cd\uff0c \u6240\u4ee5\u4e0a\u8ff0\u4e94\u79cd\u6570\u636e\u7ed3\u6784\u6700\u7ec8\u90fd\u8981\u843d\u76d8\u5230 Rocksdb \u7684 kv \u5b58\u50a8\u65b9\u5f0f\u4e0a\uff0c\u4e0b\u9762\u6211\u4eec\u5c55\u793a Blackwidow \u548c rocksdb \u7684\u5173\u7cfb\u5e76\u4e14\u8bf4\u660e\u6211\u4eec\u662f\u5982\u4f55\u7528 kv \u6765\u6a21\u62df\u591a\u6570\u636e\u7ed3\u6784\u7684\u3002 ",(0,a.jsx)(t.img,{src:"https://camo.githubusercontent.com/331c73e57e3c93ce0eb4661c0fbca74e1881b79af43e0237807c650c760a4fab/68747470733a2f2f692e696d6775722e636f6d2f6e71656c6975762e706e67",alt:""})]}),"\n",(0,a.jsx)(t.h2,{id:"1-string-\u7ed3\u6784\u7684\u5b58\u50a8",children:"1. String \u7ed3\u6784\u7684\u5b58\u50a8"}),"\n",(0,a.jsx)(t.p,{children:"String \u672c\u8d28\u4e0a\u5c31\u662f Key, Value, \u6211\u4eec\u77e5\u9053 Rocksdb \u672c\u8eab\u5c31\u662f\u652f\u6301 kv \u5b58\u50a8\u7684\uff0c \u6211\u4eec\u4e3a\u4e86\u5b9e\u73b0 Redis \u4e2d\u7684 expire \u529f\u80fd\uff0c\u6240\u4ee5\u5728 value \u540e\u9762\u6dfb\u52a0\u4e86 4 Bytes \u7528\u4e8e\u5b58\u50a8 timestamp, \u4f5c\u4e3a\u6700\u540e Rocksdb \u843d\u76d8\u7684 kv \u683c\u5f0f\uff0c\u4e0b\u9762\u662f\u5177\u4f53\u7684\u5b9e\u73b0\u65b9\u5f0f:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://camo.githubusercontent.com/24ea0bc73f9b3ca36e92e18415dae3f8d0da2be3f8760b745e8cd33f1b28e216/68747470733a2f2f692e696d6775722e636f6d2f4b6e41373037612e706e67",alt:""})}),"\n",(0,a.jsx)(t.p,{children:"\u5982\u679c\u6211\u4eec\u6ca1\u6709\u5bf9\u8be5 String \u5bf9\u8c61\u8bbe\u7f6e\u8d85\u65f6\u65f6\u95f4\uff0c\u5219 timestamp \u5b58\u50a8\u7684\u503c\u5c31\u662f\u9ed8\u8ba4\u503c 0\uff0c \u5426\u5219\u5c31\u662f\u8be5\u5bf9\u8c61\u8fc7\u671f\u65f6\u95f4\u7684\u65f6\u95f4\u6233\uff0c \u6bcf\u6b21\u6211\u4eec\u83b7\u53d6\u4e00\u4e2a String \u5bf9\u8c61\u7684\u65f6\u5019\uff0c \u9996\u5148\u4f1a\u89e3\u6790 Value \u90e8\u5206\u7684\u540e\u56db\u5b57\u8282\uff0c \u83b7\u53d6\u5230 timestamp \u505a\u51fa\u5224\u65ad\u4e4b\u540e\u518d\u8fd4\u56de\u7ed3\u679c\u3002"}),"\n",(0,a.jsx)(t.h2,{id:"2-hash-\u7ed3\u6784\u7684\u5b58\u50a8",children:"2. Hash \u7ed3\u6784\u7684\u5b58\u50a8"}),"\n",(0,a.jsx)(t.p,{children:"blackwidow \u4e2d\u7684 hash \u8868\u7531\u4e24\u90e8\u5206\u6784\u6210\uff0c\u5143\u6570\u636e(meta_key, meta_value), \u548c\u666e\u901a\u6570\u636e(data_key, data_value), \u5143\u6570\u636e\u4e2d\u5b58\u50a8\u7684\u4e3b\u8981\u662f hash \u8868\u7684\u4e00\u4e9b\u4fe1\u606f\uff0c \u6bd4\u5982\u8bf4\u5f53\u524d hash \u8868\u7684\u57df\u7684\u6570\u91cf\u4ee5\u53ca\u5f53\u524d hash \u8868\u7684\u7248\u672c\u53f7\u548c\u8fc7\u671f\u65f6\u95f4(\u7528\u505a\u79d2\u5220\u529f\u80fd), \u800c\u666e\u901a\u6570\u636e\u4e3b\u8981\u5c31\u662f\u6307\u7684\u540c\u4e00\u4e2a hash \u8868\u4e2d\u4e00\u4e00\u5bf9\u5e94\u7684 field \u548c value\uff0c\u4f5c\u4e3a\u5177\u4f53\u6700\u540e Rocksdb \u843d\u76d8\u7684 kv \u683c\u5f0f\uff0c\u4e0b\u9762\u662f\u5177\u4f53\u7684\u5b9e\u73b0\u65b9\u5f0f:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\u6bcf\u4e2a hash \u8868\u7684 meta_key \u548c meta_value \u7684\u843d\u76d8\u65b9\u5f0f: ",(0,a.jsx)(t.img,{src:"https://camo.githubusercontent.com/b77cc4f678067be6a8b1198baa566b10cc2c938a4635f4ec6234d9d38d5c2e65/68747470733a2f2f692e696d6775722e636f6d2f594c50343872672e706e67",alt:""})]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"meta_key \u5b9e\u9645\u4e0a\u5c31\u662f hash \u8868\u7684 key, \u800c meta_value \u7531\u4e09\u4e2a\u90e8\u5206\u6784\u6210: 4Bytes \u7684 Hash size(\u7528\u4e8e\u5b58\u50a8\u5f53\u524d hash \u8868\u7684\u5927\u5c0f) + 4Bytes \u7684 Version(\u7528\u4e8e\u79d2\u5220\u529f\u80fd) + 4Bytes \u7684 Timestamp(\u7528\u4e8e\u8bb0\u5f55\u6211\u4eec\u7ed9\u8fd9\u4e2a Hash \u8868\u8bbe\u7f6e\u7684\u8d85\u65f6\u65f6\u95f4\u7684\u65f6\u95f4\u6233\uff0c \u9ed8\u8ba4\u4e3a 0)"}),"\n",(0,a.jsxs)(t.ol,{start:"2",children:["\n",(0,a.jsxs)(t.li,{children:["hash \u8868\u4e2d data_key \u548c data_value \u7684\u843d\u76d8\u65b9\u5f0f: ",(0,a.jsx)(t.img,{src:"https://camo.githubusercontent.com/cafbc8c87956df45017a94963c3a0f539ca9c0a14f8eacfbeb2cc007740ed2f4/68747470733a2f2f692e696d6775722e636f6d2f706869427371642e706e67",alt:""})]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"data_key \u7531\u56db\u4e2a\u90e8\u5206\u6784\u6210: 4Bytes \u7684 Key size(\u7528\u4e8e\u8bb0\u5f55\u540e\u9762\u8ffd\u52a0\u7684 key \u7684\u957f\u5ea6\uff0c\u4fbf\u4e0e\u89e3\u6790) + key \u7684\u5185\u5bb9 + 4Bytes \u7684 Version + Field \u7684\u5185\u5bb9\uff0c \u800c data_value \u5c31\u662f hash \u8868\u67d0\u4e2a field \u5bf9\u5e94\u7684 value\u3002"}),"\n",(0,a.jsxs)(t.ol,{start:"3",children:["\n",(0,a.jsx)(t.li,{children:"\u5982\u679c\u6211\u4eec\u9700\u8981\u67e5\u627e\u4e00\u4e2a hash \u8868\u4e2d\u7684\u67d0\u4e00\u4e2a field \u5bf9\u5e94\u7684 value, \u6211\u4eec\u9996\u5148\u4f1a\u83b7\u53d6\u5230 meta_value \u89e3\u6790\u51fa\u5176\u4e2d\u7684 timestamp \u5224\u65ad\u8fd9\u4e2a hash \u8868\u662f\u5426\u8fc7\u671f\uff0c \u5982\u679c\u6ca1\u6709\u8fc7\u671f\uff0c \u6211\u4eec\u53ef\u4ee5\u62ff\u5230\u5176\u4e2d\u7684 version, \u7136\u540e\u6211\u4eec\u4f7f\u7528 key, version\uff0c\u548c field \u62fc\u51fa data_key, \u8fdb\u800c\u627e\u5230\u5bf9\u5e94\u7684 data_value\uff08\u5982\u679c\u5b58\u5728\u7684\u8bdd)"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"3-list-\u7ed3\u6784\u7684\u5b58\u50a8",children:"3. List \u7ed3\u6784\u7684\u5b58\u50a8"}),"\n",(0,a.jsx)(t.p,{children:"blackwidow \u4e2d\u7684 list \u7531\u4e24\u90e8\u5206\u6784\u6210\uff0c\u5143\u6570\u636e(meta_key, meta_value), \u548c\u666e\u901a\u6570\u636e(data_key, data_value), \u5143\u6570\u636e\u4e2d\u5b58\u50a8\u7684\u4e3b\u8981\u662f list \u94fe\u8868\u7684\u4e00\u4e9b\u4fe1\u606f\uff0c \u6bd4\u5982\u8bf4\u5f53\u524d list \u94fe\u8868\u7ed3\u70b9\u7684\u7684\u6570\u91cf\u4ee5\u53ca\u5f53\u524d list \u94fe\u8868\u7684\u7248\u672c\u53f7\u548c\u8fc7\u671f\u65f6\u95f4(\u7528\u505a\u79d2\u5220\u529f\u80fd), \u8fd8\u6709\u5f53\u524d list \u94fe\u8868\u7684\u5de6\u53f3\u8fb9\u754c(\u7531\u4e8e nemo \u5b9e\u73b0\u7684\u94fe\u8868\u7ed3\u6784\u88ab\u5410\u69fd lrange \u6548\u7387\u4f4e\u4e0b\uff0c\u6240\u4ee5\u8fd9\u6b21 blackwidow \u6211\u4eec\u5e95\u5c42\u7528\u6570\u7ec4\u6765\u6a21\u62df\u94fe\u8868\uff0c\u8fd9\u6837 lrange \u901f\u5ea6\u4f1a\u5927\u5927\u63d0\u5347\uff0c\u56e0\u4e3a\u7ed3\u70b9\u5b58\u50a8\u90fd\u662f\u6709\u5e8f\u7684), \u666e\u901a\u6570\u636e\u5b9e\u9645\u4e0a\u5c31\u662f\u6307\u7684 list \u4e2d\u6bcf\u4e00\u4e2a\u7ed3\u70b9\u4e2d\u7684\u6570\u636e\uff0c\u4f5c\u4e3a\u5177\u4f53\u6700\u540e Rocksdb \u843d\u76d8\u7684 kv \u683c\u5f0f\uff0c\u4e0b\u9762\u662f\u5177\u4f53\u7684\u5b9e\u73b0\u65b9\u5f0f"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\u6bcf\u4e2a list \u94fe\u8868\u7684 meta_key \u548c meta_value \u7684\u843d\u76d8\u65b9\u5f0f: ",(0,a.jsx)(t.img,{src:"https://camo.githubusercontent.com/6ab6eedc64e22d524e216867772a3a3f0a7f1909d7b3b939bb6b46d150df42a3/68747470733a2f2f692e696d6775722e636f6d2f303833536a49632e706e67",alt:""})]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"meta_key \u5b9e\u9645\u4e0a\u5c31\u662f list \u94fe\u8868\u7684 key, \u800c meta_value \u7531\u4e94\u4e2a\u90e8\u5206\u6784\u6210: 8Bytes \u7684 List size(\u7528\u4e8e\u5b58\u50a8\u5f53\u524d\u94fe\u8868\u4e2d\u603b\u5171\u6709\u591a\u5c11\u4e2a\u7ed3\u70b9) + 4Bytes \u7684 Version(\u7528\u4e8e\u79d2\u5220\u529f\u80fd) + 4Bytes \u7684 Timestamp(\u7528\u4e8e\u8bb0\u5f55\u6211\u4eec\u7ed9\u8fd9\u4e2a List \u94fe\u8868\u8bbe\u7f6e\u7684\u8d85\u65f6\u65f6\u95f4\u7684\u65f6\u95f4\u6233\uff0c \u9ed8\u8ba4\u4e3a 0) + 8Bytes \u7684 Left Index\uff08\u6570\u7ec4\u7684\u5de6\u8fb9\u754c) + 8Bytes \u7684 Right Index(\u6570\u7ec4\u7684\u53f3\u8fb9\u754c)"}),"\n",(0,a.jsxs)(t.ol,{start:"2",children:["\n",(0,a.jsxs)(t.li,{children:["list \u94fe\u8868\u4e2d data_key \u548c data_value \u7684\u843d\u76d8\u65b9\u5f0f: ",(0,a.jsx)(t.img,{src:"https://camo.githubusercontent.com/e39c47b452e1eb53b098644a81d284f162d309231dcc0980f49fc33079c95e96/68747470733a2f2f692e696d6775722e636f6d2f4642426e366b642e706e67",alt:""})]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"data_key \u7531\u56db\u4e2a\u90e8\u5206\u6784\u6210: 4Bytes \u7684 Key size(\u7528\u4e8e\u8bb0\u5f55\u540e\u9762\u8ffd\u52a0\u7684 key \u7684\u957f\u5ea6\uff0c\u4fbf\u4e0e\u89e3\u6790) + key \u7684\u5185\u5bb9 + 4Bytes \u7684 Version + 8Bytes \u7684 Index(\u8fd9\u4e2a\u8bb0\u5f55\u7684\u5c31\u662f\u5f53\u524d\u7ed3\u70b9\u7684\u5728\u8fd9\u4e2a list \u94fe\u8868\u4e2d\u7684\u7d22\u5f15)\uff0c \u800c data_value \u5c31\u662f list \u94fe\u8868\u8be5 node \u4e2d\u5b58\u50a8\u7684\u503c"}),"\n",(0,a.jsx)(t.h2,{id:"4-set-\u7ed3\u6784\u7684\u5b58\u50a8",children:"4. Set \u7ed3\u6784\u7684\u5b58\u50a8"}),"\n",(0,a.jsx)(t.p,{children:"blackwidow \u4e2d\u7684 set \u7531\u4e24\u90e8\u5206\u6784\u6210\uff0c\u5143\u6570\u636e(meta_key, meta_value), \u548c\u666e\u901a\u6570\u636e(data_key, data_value), \u5143\u6570\u636e\u4e2d\u5b58\u50a8\u7684\u4e3b\u8981\u662f set \u96c6\u5408\u7684\u4e00\u4e9b\u4fe1\u606f\uff0c \u6bd4\u5982\u8bf4\u5f53\u524d set \u96c6\u5408 member \u7684\u6570\u91cf\u4ee5\u53ca\u5f53\u524d set \u96c6\u5408\u7684\u7248\u672c\u53f7\u548c\u8fc7\u671f\u65f6\u95f4(\u7528\u505a\u79d2\u5220\u529f\u80fd), \u666e\u901a\u6570\u636e\u5b9e\u9645\u4e0a\u5c31\u662f\u6307\u7684 set \u96c6\u5408\u4e2d\u7684 member\uff0c\u4f5c\u4e3a\u5177\u4f53\u6700\u540e Rocksdb \u843d\u76d8\u7684 kv \u683c\u5f0f\uff0c\u4e0b\u9762\u662f\u5177\u4f53\u7684\u5b9e\u73b0\u65b9\u5f0f\uff1a"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\u6bcf\u4e2a set \u96c6\u5408\u7684 meta_key \u548c meta_value \u7684\u843d\u76d8\u65b9\u5f0f: ",(0,a.jsx)(t.img,{src:"https://camo.githubusercontent.com/2ba8bc8d101143aa1df9e148de7914718dee68ae5aad709dfd145014432fc9fe/68747470733a2f2f692e696d6775722e636f6d2f6251655676536a2e706e67",alt:""})]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"meta_key \u5b9e\u9645\u4e0a\u5c31\u662f set \u96c6\u5408\u7684 key, \u800c meta_value \u7531\u4e09\u4e2a\u90e8\u5206\u6784\u6210: 4Bytes \u7684 Set size(\u7528\u4e8e\u5b58\u50a8\u5f53\u524d Set \u96c6\u5408\u7684\u5927\u5c0f) + 4Bytes \u7684 Version(\u7528\u4e8e\u79d2\u5220\u529f\u80fd) + 4Bytes \u7684 Timestamp(\u7528\u4e8e\u8bb0\u5f55\u6211\u4eec\u7ed9\u8fd9\u4e2a set \u96c6\u5408\u8bbe\u7f6e\u7684\u8d85\u65f6\u65f6\u95f4\u7684\u65f6\u95f4\u6233\uff0c \u9ed8\u8ba4\u4e3a 0)"}),"\n",(0,a.jsxs)(t.ol,{start:"2",children:["\n",(0,a.jsxs)(t.li,{children:["set \u96c6\u5408\u4e2d data_key \u548c data_value \u7684\u843d\u76d8\u65b9\u5f0f: ",(0,a.jsx)(t.img,{src:"https://camo.githubusercontent.com/f51fea5da2f158cb3307736964e651b9ce346fa93ea43abaafe5568d92f64b80/68747470733a2f2f692e696d6775722e636f6d2f6432637471506f2e706e67",alt:""})]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"data_key \u7531\u56db\u4e2a\u90e8\u5206\u6784\u6210: 4Bytes \u7684 Key size(\u7528\u4e8e\u8bb0\u5f55\u540e\u9762\u8ffd\u52a0\u7684 key \u7684\u957f\u5ea6\uff0c\u4fbf\u4e0e\u89e3\u6790) + key \u7684\u5185\u5bb9 + 4Bytes \u7684 Version + member \u7684\u5185\u5bb9\uff0c \u7531\u4e8e set \u96c6\u5408\u53ea\u9700\u8981\u5b58\u50a8 member, \u6240\u4ee5 data_value \u5b9e\u9645\u4e0a\u5c31\u662f\u7a7a\u4e32"}),"\n",(0,a.jsx)(t.h2,{id:"5-zset-\u7ed3\u6784\u7684\u5b58\u50a8",children:"5. ZSet \u7ed3\u6784\u7684\u5b58\u50a8"}),"\n",(0,a.jsx)(t.p,{children:"blackwidow \u4e2d\u7684 zset \u7531\u4e24\u90e8\u90e8\u5206\u6784\u6210\uff0c\u5143\u6570\u636e(meta_key, meta_value), \u548c\u666e\u901a\u6570\u636e(data_key, data_value), \u5143\u6570\u636e\u4e2d\u5b58\u50a8\u7684\u4e3b\u8981\u662f zset \u96c6\u5408\u7684\u4e00\u4e9b\u4fe1\u606f\uff0c \u6bd4\u5982\u8bf4\u5f53\u524d zset \u96c6\u5408 member \u7684\u6570\u91cf\u4ee5\u53ca\u5f53\u524d zset \u96c6\u5408\u7684\u7248\u672c\u53f7\u548c\u8fc7\u671f\u65f6\u95f4(\u7528\u505a\u79d2\u5220\u529f\u80fd), \u800c\u666e\u901a\u6570\u636e\u5c31\u662f\u6307\u7684 zset \u4e2d\u6bcf\u4e2a member \u4ee5\u53ca\u5bf9\u5e94\u7684 score, \u7531\u4e8e zset \u8fd9\u79cd\u6570\u636e\u7ed3\u6784\u6bd4\u8f83\u7279\u6b8a\uff0c\u9700\u8981\u6309\u7167 memer \u8fdb\u884c\u6392\u5e8f\uff0c\u4e5f\u9700\u8981\u6309\u7167 score \u8fdb\u884c\u6392\u5e8f\uff0c \u6240\u4ee5\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e00\u4e2a zset \u6211\u4eec\u4f1a\u6309\u7167\u4e0d\u540c\u7684\u683c\u5f0f\u5b58\u50a8\u4e24\u4efd\u666e\u901a\u6570\u636e, \u5728\u8fd9\u91cc\u6211\u4eec\u79f0\u4e3a member to score \u548c score to member\uff0c\u4f5c\u4e3a\u5177\u4f53\u6700\u540e Rocksdb \u843d\u76d8\u7684 kv \u683c\u5f0f\uff0c\u4e0b\u9762\u662f\u5177\u4f53\u7684\u5b9e\u73b0\u65b9\u5f0f\uff1a"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\u6bcf\u4e2a zset \u96c6\u5408\u7684 meta_key \u548c meta_value \u7684\u843d\u76d8\u65b9\u5f0f: ",(0,a.jsx)(t.img,{src:"https://camo.githubusercontent.com/ef672f1a699febc2c0a941b4b1044e52e88829a491e66770b9e04d44b1da01d6/68747470733a2f2f692e696d6775722e636f6d2f52685a384b4d772e706e67",alt:""})]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"meta_key \u5b9e\u9645\u4e0a\u5c31\u662f zset \u96c6\u5408\u7684 key, \u800c meta_value \u7531\u4e09\u4e2a\u90e8\u5206\u6784\u6210: 4Bytes \u7684 ZSet size(\u7528\u4e8e\u5b58\u50a8\u5f53\u524d zSet \u96c6\u5408\u7684\u5927\u5c0f) + 4Bytes \u7684 Version(\u7528\u4e8e\u79d2\u5220\u529f\u80fd) + 4Bytes \u7684 Timestamp(\u7528\u4e8e\u8bb0\u5f55\u6211\u4eec\u7ed9\u8fd9\u4e2a Zset \u96c6\u5408\u8bbe\u7f6e\u7684\u8d85\u65f6\u65f6\u95f4\u7684\u65f6\u95f4\u6233\uff0c \u9ed8\u8ba4\u4e3a 0)"}),"\n",(0,a.jsxs)(t.ol,{start:"2",children:["\n",(0,a.jsxs)(t.li,{children:["\u6bcf\u4e2a zset \u96c6\u5408\u7684 data_key \u548c data_value \u7684\u843d\u76d8\u65b9\u5f0f(member to score): ",(0,a.jsx)(t.img,{src:"https://camo.githubusercontent.com/72f31e9af4e24f9cc224eec299904e514543a28360f6632b86ee48303cdea1f0/68747470733a2f2f692e696d6775722e636f6d2f4338354261355a2e706e67",alt:""})]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"member to socre \u7684 data_key \u7531\u56db\u4e2a\u90e8\u5206\u6784\u6210\uff1a4Bytes \u7684 Key size(\u7528\u4e8e\u8bb0\u5f55\u540e\u9762\u8ffd\u52a0\u7684 key \u7684\u957f\u5ea6\uff0c\u4fbf\u4e0e\u89e3\u6790) + key \u7684\u5185\u5bb9 + 4Bytes \u7684 Version + member \u7684\u5185\u5bb9\uff0c data_value \u4e2d\u5b58\u50a8\u7684\u5176 member \u5bf9\u5e94\u7684 score \u7684\u503c\uff0c\u5927\u5c0f\u4e3a 8 \u4e2a\u5b57\u8282\uff0c\u7531\u4e8e rocksdb \u9ed8\u8ba4\u662f\u6309\u7167\u5b57\u5178\u5e8f\u8fdb\u884c\u6392\u5217\u7684\uff0c\u6240\u4ee5\u540c\u4e00\u4e2a zset \u4e2d\u4e0d\u540c\u7684 member \u5c31\u662f\u6309\u7167 member \u7684\u5b57\u5178\u5e8f\u6765\u6392\u5217\u7684(\u540c\u4e00\u4e2a zset \u7684 key size, key, \u4ee5\u53ca version\uff0c\u4e5f\u5c31\u662f\u524d\u7f00\u90fd\u662f\u4e00\u81f4\u7684\uff0c\u4e0d\u540c\u7684\u53ea\u6709\u672b\u7aef\u7684 member)."}),"\n",(0,a.jsxs)(t.ol,{start:"3",children:["\n",(0,a.jsxs)(t.li,{children:["\u6bcf\u4e2a zset \u96c6\u5408\u7684 data_key \u548c data_value \u7684\u843d\u76d8\u65b9\u5f0f(score to member): ",(0,a.jsx)(t.img,{src:"https://camo.githubusercontent.com/e6722072aa2fc2043c9b0a4e40fcca103e7244dcb28a7f6f949459b7f1b01eec/68747470733a2f2f692e696d6775722e636f6d2f5156395848456b2e706e67",alt:""})]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"score to member \u7684 data_key \u7531\u4e94\u4e2a\u90e8\u5206\u6784\u6210\uff1a4Bytes \u7684 Key size(\u7528\u4e8e\u8bb0\u5f55\u540e\u9762\u8ffd\u52a0\u7684 key \u7684\u957f\u5ea6\uff0c\u4fbf\u4e0e\u89e3\u6790) + key \u7684\u5185\u5bb9 + 4Bytes \u7684 Version + 8Bytes \u7684 Score + member \u7684\u5185\u5bb9\uff0c \u7531\u4e8e score \u548c member \u90fd\u5df2\u7ecf\u653e\u5728 data_key \u4e2d\u8fdb\u884c\u5b58\u50a8\u4e86\u6240\u4ee5 data_value \u5c31\u662f\u4e00\u4e2a\u7a7a\u4e32\uff0c\u65e0\u9700\u5b58\u50a8\u5176\u4ed6\u5185\u5bb9\u4e86\uff0c\u5bf9\u4e8e score to member \u4e2d\u7684 data_key \u6211\u4eec\u81ea\u5df1\u5b9e\u73b0\u4e86 rocksdb \u7684 comparator\uff0c\u540c\u4e00\u4e2a zset \u4e2d score to member \u7684 data_key \u4f1a\u9996\u5148\u6309\u7167 score \u6765\u6392\u5e8f\uff0c \u5728 score \u76f8\u540c\u7684\u60c5\u51b5\u4e0b\u518d\u6309\u7167 member \u6765\u6392\u5e8f"}),"\n",(0,a.jsx)(t.h2,{id:"blackwidow-\u76f8\u5bf9\u4e8e-nemo-\u6709\u54ea\u4e9b\u4f18\u52bf",children:"Blackwidow \u76f8\u5bf9\u4e8e Nemo \u6709\u54ea\u4e9b\u4f18\u52bf"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:"Blackwidow \u91c7\u7528\u4e86 rocksdb \u7684 column families \u7684\u65b0\u7279\u6027\uff0c\u5c06\u5143\u6570\u636e\u548c\u5b9e\u9645\u6570\u636e\u5206\u5f00\u5b58\u653e(\u5bf9\u5e94\u4e8e\u4e0a\u9762\u7684 meta \u6570\u636e\u548c data \u6570\u636e), \u8fd9\u79cd\u5b58\u50a8\u65b9\u5f0f\u76f8\u5bf9\u4e8e Nemo \u5c06 meta, data \u6df7\u5728\u4e00\u8d77\u5b58\u653e\u66f4\u52a0\u5408\u7406\uff0c \u5e76\u4e14\u53ef\u4ee5\u63d0\u5347\u67e5\u627e\u6548\u7387(\u6bd4\u5982 info keyspace \u7684\u6548\u7387\u4f1a\u5927\u5927\u63d0\u5347)"}),"\n",(0,a.jsx)(t.li,{children:"Blackwidow \u4e2d\u53c2\u6570\u4f20\u9012\u5927\u91cf\u91c7\u7528 Slice \u800c Nemo \u4e2d\u91c7\u7528\u7684\u662f std::string, \u6240\u4ee5 Nemo \u4f1a\u6709\u5f88\u591a\u6ca1\u6709\u5fc5\u8981\u7684 string \u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570\u4ee5\u53ca\u6790\u6784\u51fd\u6570\u7684\u8c03\u7528\uff0c\u9020\u6210\u989d\u5916\u7684\u8d44\u6e90\u6d88\u8017\uff0c\u800c Blackwidow \u5219\u4e0d\u4f1a\u6709\u8fd9\u4e2a\u95ee\u9898"}),"\n",(0,a.jsx)(t.li,{children:"Blackwidow \u5bf9 kv \u6a21\u62df\u591a\u6570\u636e\u7ed3\u6784\u7684\u5b58\u50a8\u683c\u5f0f\u4e0a\u505a\u4e86\u91cd\u65b0\u8bbe\u8ba1(\u5177\u4f53\u53ef\u4ee5\u53c2\u8003 Nemo \u5f15\u64ce\u6570\u636e\u5b58\u50a8\u683c\u5f0f\u548c\u672c\u7bc7\u6587\u7ae0)\uff0c\u4f7f\u4e4b\u524d\u5728 Nemo \u4e0a\u51fa\u73b0\u7684\u4e00\u4e9b\u65e0\u6cd5\u89e3\u51b3\u7684\u6027\u80fd\u95ee\u9898\u5f97\u4ee5\u89e3\u51b3\uff0c\u6240\u4ee5 Blackwidow \u7684\u591a\u6570\u636e\u7ed3\u6784\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\u6027\u80fd\u8fdc\u8fdc\u4f18\u4e8e Nemo"}),"\n",(0,a.jsx)(t.li,{children:"\u539f\u6765 Nemo \u5bf9\u591a\u6570\u636e\u7ed3\u6784\u7684 Key \u7684\u957f\u5ea6\u6700\u5927\u53ea\u80fd\u652f\u6301\u5230 256 Bytes\uff0c\u800c Blackwidow \u7ecf\u8fc7\u91cd\u65b0\u8bbe\u8ba1\uff0c\u653e\u5f00\u4e86\u591a\u6570\u636e\u7ed3\u6784 Key \u957f\u5ea6\u7684\u8fd9\u4e2a\u9650\u5236"}),"\n",(0,a.jsx)(t.li,{children:"Blackwidow \u76f8\u5bf9\u4e8e Nemo \u66f4\u52a0\u8282\u7701\u7a7a\u95f4\uff0cNemo \u7531\u4e8e\u9700\u8981 nemo-rocksdb \u7684\u652f\u6301\uff0c\u6240\u4ee5\u4e0d\u7ba1\u5728 meta \u8fd8\u662f data \u6570\u636e\u90e8\u5206\u90fd\u8ffd\u52a0\u4e86 version \u548c timestamp \u8fd9\u4e9b\u4fe1\u606f\uff0c\u5e76\u4e14\u4e3a\u4e86\u533a\u5206 meta_key \u548c data_key, \u5728\u6700\u524d\u9762\u52a0\u5165 s \u548c S(\u62ff Set \u6570\u636e\u7ed3\u6784\u6253\u6bd4\u65b9)\uff0cBlackwidow \u5728\u8fd9\u65b9\u9762\u505a\u4e86\u4f18\u5316\uff0c\u4f7f\u540c\u6837\u7684\u6570\u636e\u91cf\u4e0b Blackwidow \u6240\u5360\u7528\u7684\u7a7a\u95f4\u6bd4 Nemo \u8981\u5c0f(\u4e3e\u4e2a\u4f8b\u5b50\uff0cBlackwidow \u4e2d List \u7ed3\u6784\u4e2d\u7684\u4e00\u4e2a Node \u5c31\u6bd4 Nemo \u4e2d\u7684\u4e00\u4e2a Node \u8282\u7701\u4e86 16 Bytes \u7684\u7a7a\u95f4)"}),"\n",(0,a.jsx)(t.li,{children:"Blackwidow \u5728\u9501\u7684\u5b9e\u73b0\u4e0a\u53c2\u7167\u4e86 RocksDB \u4e8b\u52a1\u91cc\u9501\u7684\u5b9e\u73b0\u65b9\u6cd5\uff0c\u800c\u5f03\u7528\u4e86\u4e4b\u524d Nemo \u7684\u884c\u9501\uff0c\u6240\u4ee5\u5728\u591a\u7ebf\u7a0b\u5bf9\u540c\u4e00\u628a\u9501\u6709\u62a2\u5360\u7684\u60c5\u51b5\u4e0b\u6027\u80fd\u4f1a\u6709\u6240\u63d0\u5347"}),"\n"]})]})}function m(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(r,{...e})}):r(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>d,x:()=>n});var a=s(6540);const i={},c=a.createContext(i);function d(e){const t=a.useContext(c);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function n(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),a.createElement(c.Provider,{value:t},e.children)}}}]);