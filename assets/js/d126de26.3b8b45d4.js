"use strict";(self.webpackChunkPikiwiDB_Pika_=self.webpackChunkPikiwiDB_Pika_||[]).push([[2439],{9027:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>d,toc:()=>o});var l=i(4848),t=i(8453);const s={title:"\u5b89\u88c5\u4f7f\u7528",sidebar_position:100},c=void 0,d={id:"\u4f7f\u7528\u4e0e\u8fd0\u7ef4/\u5b89\u88c5\u4f7f\u7528/index",title:"\u5b89\u88c5\u4f7f\u7528",description:"\u5feb\u901f\u8bd5\u7528",source:"@site/docs/\u4f7f\u7528\u4e0e\u8fd0\u7ef4/\u5b89\u88c5\u4f7f\u7528/index.md",sourceDirName:"\u4f7f\u7528\u4e0e\u8fd0\u7ef4/\u5b89\u88c5\u4f7f\u7528",slug:"/\u4f7f\u7528\u4e0e\u8fd0\u7ef4/\u5b89\u88c5\u4f7f\u7528/",permalink:"/docs/\u4f7f\u7528\u4e0e\u8fd0\u7ef4/\u5b89\u88c5\u4f7f\u7528/",draft:!1,unlisted:!1,editUrl:"https://github.com/OpenAtomFoundation/PikiwiDB-Pika--Website/tree/main/docs/\u4f7f\u7528\u4e0e\u8fd0\u7ef4/\u5b89\u88c5\u4f7f\u7528/index.md",tags:[],version:"current",sidebarPosition:100,frontMatter:{title:"\u5b89\u88c5\u4f7f\u7528",sidebar_position:100},sidebar:"tutorialSidebar",previous:{title:"\u526f\u672c\u4e00\u81f4\u6027\uff08\u4f7f\u7528\u6587\u6863\uff09",permalink:"/docs/\u4f7f\u7528\u4e0e\u8fd0\u7ef4/\u526f\u672c\u4e00\u81f4\u6027\uff08\u4f7f\u7528\u6587\u6863\uff09/"},next:{title:"\u526f\u672c\u4e00\u81f4\u6027\uff08\u8bbe\u8ba1\u6587\u6863\uff09",permalink:"/docs/\u4f7f\u7528\u4e0e\u8fd0\u7ef4/\u526f\u672c\u4e00\u81f4\u6027\uff08\u8bbe\u8ba1\u6587\u6863\uff09/"}},r={},o=[{value:"\u5feb\u901f\u8bd5\u7528",id:"\u5feb\u901f\u8bd5\u7528",level:2},{value:"\u7f16\u8bd1\u5b89\u88c5",id:"\u7f16\u8bd1\u5b89\u88c5",level:2},{value:"CentOS (Fedora, Redhat)",id:"centos-fedora-redhat",level:3},{value:"Debian (Ubuntu)",id:"debian-ubuntu",level:3},{value:"\u9759\u6001\u7f16\u8bd1\u65b9\u6cd5",id:"\u9759\u6001\u7f16\u8bd1\u65b9\u6cd5",level:3},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:2},{value:"\u6ce8\u610f",id:"\u6ce8\u610f",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"\u5feb\u901f\u8bd5\u7528",children:"\u5feb\u901f\u8bd5\u7528"}),"\n",(0,l.jsxs)(n.p,{children:["\u5982\u679c\u60f3\u5feb\u901f\u8bd5\u7528pika\uff0c\u76ee\u524d\u63d0\u4f9b\u4e86Centos5\uff0cCentos6\u548cDebian(Ubuntu16) binary\u7248\u672c\uff0c\u53ef\u4ee5\u5728",(0,l.jsx)(n.a,{href:"https://github.com/Qihoo360/pika/releases",children:"release\u9875\u9762"}),"\u770b\u5230\uff0c\u5177\u4f53\u6587\u4ef6\u662fpikaX.Y.Z_xxx_bin.tar.gz\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"1. unzip file\n$ tar zxf pikaX.Y.Z_xxx_bin.tar.gz\n2. change working directory to output\nnote: we should in this directory, caz the RPATH is ./lib;\n$ cd output\n3. run pika:\n$ ./bin/pika -c conf/pika.conf\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u7f16\u8bd1\u5b89\u88c5",children:"\u7f16\u8bd1\u5b89\u88c5"}),"\n",(0,l.jsx)(n.h3,{id:"centos-fedora-redhat",children:"CentOS (Fedora, Redhat)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5b89\u88c5\u5fc5\u8981\u7684lib"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"$ sudo yum install gflags-devel snappy-devel glog-devel protobuf-devel\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u53ef\u9009\u62e9\u7684lib"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"$ sudo yum install zlib-devel lz4-devel libzstd-devel\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5b89\u88c5gcc"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"$ sudo yum install gcc-c++\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5982\u679c\u673a\u5668gcc\u7248\u672c\u4f4e\u4e8e4.8\uff0c\u9700\u8981\u5207\u6362\u5230gcc4.8\u6216\u8005\u4ee5\u4e0a\uff0c\u4e0b\u9762\u6307\u4ee4\u53ef\u4e34\u65f6\u5207\u6362\u5230gcc4.8"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"$ sudo wget -O /etc/yum.repos.d/slc6-devtoolset.repo http://linuxsoft.cern.ch/cern/devtoolset/slc6-devtoolset.repo\n$ sudo yum install --nogpgcheck devtoolset-2\n$ scl enable devtoolset-2 bash\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u83b7\u53d6\u9879\u76ee\u6e90\u4ee3\u7801"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"$ git clone https://github.com/OpenAtomFoundation/pika.git\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u66f4\u65b0\u4f9d\u8d56\u7684\u5b50\u9879\u76ee"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"$ cd pika\n$ git submodule update --init\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5207\u6362\u5230\u6700\u65b0release\u7248\u672c"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"a. \u6267\u884c git tag \u67e5\u770b\u6700\u65b0\u7684release tag\uff0c\uff08\u5982 v2.3.1\uff09\nb. \u6267\u884c git checkout TAG\u5207\u6362\u5230\u6700\u65b0\u7248\u672c\uff0c\uff08\u5982 git checkout v2.3.1\uff09\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u7f16\u8bd1"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"$ make\n"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"note: \u82e5\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\uff0c\u63d0\u793a\u6709\u4f9d\u8d56\u7684\u5e93\u6ca1\u6709\u5b89\u88c5\uff0c\u5219\u6709\u63d0\u793a\u5b89\u88c5\u540e\u518d\u91cd\u65b0\u7f16\u8bd1"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"debian-ubuntu",children:"Debian (Ubuntu)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5b89\u88c5\u5fc5\u8981\u7684lib"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"$ sudo apt-get install libgflags-dev libsnappy-dev\n$ sudo apt-get install libprotobuf-dev protobuf-compiler\n$ sudo apt install libgoogle-glog-dev\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u83b7\u53d6\u9879\u76ee\u6e90\u4ee3\u7801"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"$ git clone https://github.com/OpenAtomFoundation/pika.git\n$ cd pika\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5207\u6362\u5230\u6700\u65b0release\u7248\u672c"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"a. \u6267\u884c git tag \u67e5\u770b\u6700\u65b0\u7684release tag\uff0c\uff08\u5982 v2.3.1\uff09\nb. \u6267\u884c git checkout TAG\u5207\u6362\u5230\u6700\u65b0\u7248\u672c\uff0c\uff08\u5982 git checkout v2.3.1\uff09\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u7f16\u8bd1"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"$ make\n"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"note: \u82e5\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\uff0c\u63d0\u793a\u6709\u4f9d\u8d56\u7684\u5e93\u6ca1\u6709\u5b89\u88c5\uff0c\u5219\u6709\u63d0\u793a\u5b89\u88c5\u540e\u518d\u91cd\u65b0\u7f16\u8bd1"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u9759\u6001\u7f16\u8bd1\u65b9\u6cd5",children:(0,l.jsx)(n.a,{href:"https://github.com/OpenAtomFoundation/pika/issues/1148",children:"\u9759\u6001\u7f16\u8bd1\u65b9\u6cd5"})}),"\n",(0,l.jsx)(n.h2,{id:"\u4f7f\u7528",children:"\u4f7f\u7528"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"$ ./output/bin/pika -c ./conf/pika.conf\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u6ce8\u610f",children:"\u6ce8\u610f"}),"\n",(0,l.jsx)(n.p,{children:"\u542f\u52a8\u51fa\u73b0 Attempt to free invalid pointer \u95ee\u9898\u8bf7\u5c1d\u8bd5\u5347\u7ea7tcmalloc \u7248\u672c\uff0c\u5efa\u8bae\u4f7f\u7528gperftools 2.7 \u7248\u672c\u5305\u542b\u7684tcmalloc\u3002"})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>d});var l=i(6540);const t={},s=l.createContext(t);function c(e){const n=l.useContext(s);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),l.createElement(s.Provider,{value:n},e.children)}}}]);